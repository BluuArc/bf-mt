(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["squads"],{"083f":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-selector",{attrs:{showCancelButton:t.showCancelButton,value:t.nameFilter,hasSelection:t.hasSelection,requiredModules:t.requiredModules,allEntryIds:t.allIds},on:{input:function(e){return t.nameFilter=(e||"").toLowerCase()},cancel:function(e){return t.$emit("cancel")}},scopedSlots:t._u([{key:"entries",fn:function(e){var i=e.entries;return n("v-layout",{attrs:{row:"",wrap:""}},t._l(i,function(e){return n("v-flex",{key:e,attrs:{xs12:"",sm6:"",md4:"",xl3:""}},[n("entry-card",{staticClass:"ma-2",staticStyle:{background:"var(--background-color)",cursor:"pointer",height:"auto"},attrs:{entry:t.pageDb[e]},nativeOn:{click:function(n){return t.sendEntry(e)}}})],1)}),1)}}])})},r=[],a=n("d939"),s=n("3e0d"),o={props:{showCancelButton:{type:Boolean,default:!0}},components:{BaseSelector:a["a"],EntryCard:s["a"]},computed:{requiredModules:function(){return["items"]},pageDb:function(){return this.$store.state.items.pageDb},allIds:function(){var t=this;return Object.keys(this.pageDb).filter(function(e){var n="sphere"===t.pageDb[e].type,i=!t.nameFilter||t.hasName(t.pageDb[e].name,t.nameFilter);return n&&i})}},data:function(){return{nameFilter:"",hasSelection:!1}},methods:{hasName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.toLowerCase().includes(e)},sendEntry:function(t){this.hasSelection=!0,this.$emit("input",{id:t})}}},u=o,l=n("2877"),c=Object(l["a"])(u,i,r,!1,null,null,null);e["a"]=c.exports},"08a6":function(t,e,n){},"09c5":function(t,e,n){},"0a43":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-entry-card",{staticStyle:{height:"100%"},attrs:{to:t.to}},[n("v-container",{staticClass:"pa-3",attrs:{fluid:""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs9:""}},[n("div",{staticClass:"d-flex-container items-center"},[n("h1",{staticClass:"subheading d-inline-block",staticStyle:{"word-break":"break-word"}},[n("b",{domProps:{textContent:t._s(t.entry.name||"No Name")}})])])]),n("v-flex",{staticClass:"test-xs-right",attrs:{xs3:""}},[n("div",{staticClass:"d-flex-container items-center content-flex-end"},[t.rarity<8?n("span",[t._v(t._s(t.rarity))]):t._e(),n("rarity-icon",{class:{"ml-1":8!==t.rarity},attrs:{rarity:t.rarity,displaySize:18}})],1)])],1),n("v-layout",{attrs:{row:""}},[n("v-flex",{staticStyle:{"word-break":"break-word"}},[t.entry.desc&&"None"!==t.entry.desc&&"0"!==t.entry.desc?n("span",[t._v(t._s(t.entry.desc))]):n("span",[t._v("No description.")])])],1),t.showAssociatedUnits&&t.entry.associated_units?n("v-layout",{staticClass:"d-align-items-center",attrs:{row:"",wrap:""}},[n("v-flex",{staticClass:"text-xs-center",attrs:{xs5:"",sm4:""}},[t._v("\n        Associated Units:\n      ")]),n("v-flex",{staticClass:"text-xs-left",attrs:{xs7:""}},t._l(t.entry.associated_units,function(e,i){return n("unit-thumbnail",{key:i,attrs:{src:t.getImageUrls(e).ills_thum,rarity:t.getUnit(e).rarity,imageTitle:t.getUnit(e).name,displayWidth:t.thumbnailSize,displayHeight:t.thumbnailSize}})}),1)],1):t._e()],1)],1)},r=[],a=n("2f62"),s=n("50a6"),o=n("69c9"),u=n("ac4c");function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){c(t,e,n[e])})}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={mixins:[s["a"]],props:{showAssociatedUnits:{type:Boolean,default:!0}},components:{RarityIcon:o["a"],UnitThumbnail:u["a"]},computed:l({},Object(a["e"])("units",["pageDb"]),Object(a["c"])("units",["getImageUrls"]),{rarity:function(){return+this.entry.rarity},thumbnailSize:function(){var t=this.$vuetify.breakpoint;return t.xlOnly?64:t.mdAndUp?56:48}}),methods:{getUnit:function(t){return this.pageDb[t]||{}}}},f=d,p=n("2877"),h=Object(p["a"])(f,i,r,!1,null,null,null);e["a"]=h.exports},"0e03":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-selector",{attrs:{showCancelButton:t.showCancelButton,value:t.nameFilter,hasSelection:t.hasSelection,requiredModules:t.requiredModules,allEntryIds:t.allIds},on:{input:function(e){return t.nameFilter=(e||"").toLowerCase()},cancel:function(e){return t.$emit("cancel")}},scopedSlots:t._u([{key:"entries",fn:function(e){var i=e.entries;return n("v-layout",{attrs:{row:"",wrap:""}},t._l(i,function(e){return n("v-flex",{key:e,attrs:{xs12:"",sm6:"",md4:"",xl3:""}},[n("entry-card",{staticClass:"ma-2",staticStyle:{background:"var(--background-color)",cursor:"pointer",height:"auto"},attrs:{entry:t.pageDb[e]},nativeOn:{click:function(n){return t.sendEntry(e)}}})],1)}),1)}}])})},r=[],a=n("d939"),s=n("0a43"),o={props:{showCancelButton:{type:Boolean,default:!0}},components:{BaseSelector:a["a"],EntryCard:s["a"]},computed:{requiredModules:function(){return["extraSkills","units"]},pageDb:function(){return this.$store.state.extraSkills.pageDb},allIds:function(){var t=this;return Object.keys(this.pageDb).filter(function(e){var n=!t.nameFilter||t.hasName(t.pageDb[e].name,t.nameFilter);return n})}},data:function(){return{nameFilter:"",hasSelection:!1}},methods:{hasName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.toLowerCase().includes(e)},sendEntry:function(t){this.hasSelection=!0,this.$emit("input",{id:t})}}},u=o,l=n("2877"),c=Object(l["a"])(u,i,r,!1,null,null,null);e["a"]=c.exports},"0f27":function(t,e,n){"use strict";var i=n("6cb7"),r=n.n(i);r.a},"15bb":function(t,e,n){},"164a":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("module-checker",{attrs:{requiredModules:t.requiredModules,isExternallyLoading:t.isVisuallyLoading,externalLoadingMessage:"Fetching squad information..."},on:{initfinished:t.getDbData}},[n("v-container",[n("v-toolbar",{attrs:{app:"",fixed:"",extended:"","scroll-off-screen":"","extension-height":"72px"}},[n("v-container",{directives:[{name:"show",rawName:"v-show",value:!t.showCopyModal,expression:"!showCopyModal"}],class:{"pt-0 pb-0 mb-2 px-1":!0,focused:t.searchIsFocused},attrs:{slot:"extension",fluid:"",id:"squad-list--search-extension"},slot:"extension"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.onFilterUpdate(e)}}},[n("v-layout",{attrs:{row:"","align-center":""}},[n("v-flex",[n("v-text-field",{attrs:{clearable:"",color:t.lightMode?"black":"white",label:"Search","prepend-inner-icon":"search",hint:t.sortedSquads.length+" "+(1===t.sortedSquads.length?"squad":"squads"),"persistent-hint":""},on:{focusin:function(e){t.searchIsFocused=!0},focusout:function(e){t.searchIsFocused=!1}},model:{value:t.nameFilter,callback:function(e){t.nameFilter=e},expression:"nameFilter"}})],1),n("v-layout",{staticStyle:{"flex-grow":"0"},attrs:{row:""}},[n("v-flex",{staticStyle:{"flex-grow":"0"}},[n("v-btn",{attrs:{icon:"",flat:""},on:{click:function(e){t.sortOrderAscending=!t.sortOrderAscending}}},[n("v-icon",[t._v(t._s("fa-sort-alpha-"+(t.sortOrderAscending?"down":"up")))])],1)],1),n("v-flex",{staticStyle:{"flex-grow":"0"}},[n("v-btn",{staticStyle:{"min-width":"64px"},attrs:{type:"submit",outline:!t.filterChanged,color:t.filterChanged?"primary":"",round:""},on:{click:t.onFilterUpdate}},[n("v-icon",[t._v("search")])],1)],1)],1)],1)],1)])],1),n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.squadsToShow,function(e,i){return n("v-flex",{key:e.id,attrs:{xs12:""}},[n("squad-list-card",{staticClass:"ma-2",attrs:{id:"squad-result-"+(i+1),squad:e,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,to:"/tools/squads/"+e.id},on:{share:function(){t.activeSquadIndex=i,t.activeSquadDialog="share"},delete:function(){t.activeSquadIndex=i,t.activeSquadDialog="delete"}}},[t.isCopyMode?[n("v-card-actions",{attrs:{slot:"card-actions"},slot:"card-actions"},[n("v-spacer"),n("v-btn",{attrs:{flat:"",to:t.getSquadUrl(e)}},[n("v-icon",{attrs:{left:""}},[t._v("file_copy")]),t._v("\n                Copy\n              ")],1)],1)]:t._e()],2)],1)}),1),n("v-bottom-nav",{attrs:{fixed:"",value:t.sortedSquads.length>t.squadsPerPage,app:""}},[n("v-pagination",{staticStyle:{"justify-content":"center"},attrs:{length:t.numPages,"total-visible":t.$vuetify.breakpoint.mdAndUp?20:void 0},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t.isCopyMode?t._e():[n("v-dialog",{attrs:{value:!!t.activeSquadDialog,lazy:""},on:{input:function(e){return t.activeSquadDialog=e?t.activeSquadDialog:""}}},[t.squadsToShow[t.activeSquadIndex]?["share"===t.activeSquadDialog?n("share-squad-card",{attrs:{squad:t.squadsToShow[t.activeSquadIndex],getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill},on:{back:function(e){t.activeSquadDialog=""}}}):"delete"===t.activeSquadDialog?n("delete-squad-card",{attrs:{squad:t.squadsToShow[t.activeSquadIndex],squadId:t.squadsToShow[t.activeSquadIndex].id,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill},on:{delete:function(){t.activeSquadDialog="",t.getDbData()},cancel:function(e){t.activeSquadDialog=""}}}):t._e()]:n("v-card",[n("v-card-text",[t._v("\n            No squad selected\n          ")]),n("v-card-actions",{staticStyle:{"justify-content":"flex-end"}},[n("v-btn",{attrs:{flat:""},on:{click:function(e){t.activeSquadDialog=""}}},[t._v("\n              Back\n            ")])],1)],1)],2),t.isCopyMode?t._e():n("v-speed-dial",{attrs:{transition:"slide-y-reverse-transition",direction:"top",right:"",bottom:"",fixed:""},model:{value:t.fabModel,callback:function(e){t.fabModel=e},expression:"fabModel"}},[n("v-btn",{attrs:{slot:"activator",color:"primary",fab:""},on:{transitionend:function(){return t.repositionTooltip()}},slot:"activator",model:{value:t.fabModel,callback:function(e){t.fabModel=e},expression:"fabModel"}},[n("v-icon",[t._v("add")]),n("v-icon",[t._v("close")])],1),n("v-tooltip",{attrs:{left:""},model:{value:t.showTooltip,callback:function(e){t.showTooltip=e},expression:"showTooltip"}},[n("v-btn",{attrs:{slot:"activator",to:"/tools/squads/add",fab:"",small:"",outline:""},slot:"activator"},[n("v-icon",[t._v("add")])],1),n("span",[t._v("New Squad")])],1),n("v-tooltip",{attrs:{left:""},model:{value:t.showTooltip,callback:function(e){t.showTooltip=e},expression:"showTooltip"}},[n("v-btn",{attrs:{slot:"activator",fab:"",small:"",outline:""},on:{click:function(e){t.showImportFromCodeModal=!0}},slot:"activator"},[n("v-icon",[t._v("input")])],1),n("span",[t._v("Import From Code")])],1),n("v-tooltip",{attrs:{left:""},model:{value:t.showTooltip,callback:function(e){t.showTooltip=e},expression:"showTooltip"}},[n("v-btn",{attrs:{slot:"activator",fab:"",small:"",outline:""},on:{click:function(e){t.showCopyModal=!0}},slot:"activator"},[n("v-icon",[t._v("file_copy")])],1),n("span",[t._v("Copy Existing Squad")])],1)],1),n("v-dialog",{attrs:{lazy:"",fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.showCopyModal,callback:function(e){t.showCopyModal=e},expression:"showCopyModal"}},[n("v-card",{staticStyle:{"background-color":"var(--background-color)"}},[n("v-toolbar",{staticStyle:{"z-index":"5"},attrs:{fixed:""}},[n("v-btn",{attrs:{icon:""},on:{click:function(e){t.showCopyModal=!1}}},[n("v-icon",[t._v("close")])],1),n("v-toolbar-title",[t._v("Copy Existing Squad")])],1),t.showCopyModal?n("squad-list",{staticStyle:{"padding-top":"128px","padding-bottom":"64px"},attrs:{isCopyMode:!0,squadDb:{units:t.units,items:t.items,extraSkills:t.extraSkills}}}):t._e()],1)],1),n("v-dialog",{attrs:{lazy:"","max-width":"500px"},model:{value:t.showImportFromCodeModal,callback:function(e){t.showImportFromCodeModal=e},expression:"showImportFromCodeModal"}},[n("v-card",[n("v-card-text",[n("v-textarea",{attrs:{rows:10,label:"Import Code"},model:{value:t.importCode,callback:function(e){t.importCode=e},expression:"importCode"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{disabled:!t.importCode,flat:"",to:t.getSquadUrl(t.importCode)}},[t._v("\n              Import\n            ")])],1)],1)],1)]],2)],1)},r=[],a=n("a34a"),s=n.n(a),o=n("2f62"),u=n("34b9"),l=n("080f"),c=n("f022"),d=n("fca9"),f=n("6a92"),p=n("b047"),h=n.n(p),v=n("d239"),g=n("bdea"),A=n("1b56"),b=n("a598"),m=n("88fe");function y(t,e,n,i,r,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(i,r)}function S(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(t){y(a,i,r,s,o,"next",t)}function o(t){y(a,i,r,s,o,"throw",t)}s(void 0)})}}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){w(t,e,n[e])})}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}new d["a"]({prefix:"[SquadList]"});var k,O={name:"squad-list",props:{isCopyMode:{type:Boolean,default:!1},squadDb:{required:!1}},components:{SquadListCard:g["a"],ShareSquadCard:A["a"],DeleteSquadCard:b["a"],ModuleChecker:m["a"]},computed:x({},Object(o["e"])("settings",["activeServer","lightMode"]),{requiredModules:function(){return c["b"]},squads:function(){return this.$store.state.squads.squads},sortedSquads:function(){var t=this;return Object.freeze(this.filteredSquads.slice().sort(function(e,n){var i=e.name<n.name?-1:1;return t.sortOrderAscending?i:-i}))},squadsPerPage:function(){return 10},squadsToShow:function(){var t=this.currentPage-1,e=t*this.squadsPerPage;return Object.freeze(this.sortedSquads.slice(e,e+this.squadsPerPage))},numPages:function(){return Math.ceil(this.sortedSquads.length/this.squadsPerPage)}}),data:function(){return{units:{},items:{},extraSkills:{},isInternallyLoading:!1,isVisuallyLoading:!1,activeCallToken:"0",nameFilter:"",searchIsFocused:!1,filterChanged:!1,sortOrderAscending:!0,filteredSquads:[],currentPage:1,activeSquadIndex:-1,activeSquadDialog:"",fabModel:!1,showTooltip:!0,showCopyModal:!1,showImportFromCodeModal:!1,importCode:""}},beforeCreate:function(){var t=this;k&&k.dispose(),k=new v["a"](function(e){t.isVisuallyLoading=e})},methods:x({},Object(o["b"])("units",{getUnits:"getByIds"}),Object(o["b"])("items",{getItems:"getByIds"}),Object(o["b"])("extraSkills",{getExtraSkills:"getByIds"}),{getDbData:function(){var t=S(s.a.mark(function t(){var e,n,i,r,a=this;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isInternallyLoading=!0,e=[(new Date).valueOf().toString(),Math.random().toString()].join("-"),this.activeCallToken=e,!this.squadDb){t.next=9;break}this.units=this.squadDb.units,this.items=this.squadDb.items,this.extraSkills=this.squadDb.extraSkills,t.next=16;break;case 9:return t.next=11,this.$store.dispatch("squads/getSquads",this.$store.state.settings.activeServer).then(function(t){var e=t.map(function(t){return x({id:t.id},t.squad)});return a.$store.commit("squads/setSquadList",e),e});case 11:return n=t.sent,i=Object(f["f"])(n),r=this.activeServer,t.next=16,[S(s.a.mark(function t(){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.getUnits({ids:i.units,server:r,extractedFields:["id","rarity","feskills","name","sbb","cost"]});case 2:return t.abrupt("return",a.units=t.sent);case 3:case"end":return t.stop()}},t,this)})),S(s.a.mark(function t(){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.getItems({ids:i.items,server:r,extractedFields:["name","sphere type"]});case 2:return t.abrupt("return",a.items=t.sent);case 3:case"end":return t.stop()}},t,this)})),S(s.a.mark(function t(){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.getExtraSkills({ids:i.extraSkills,server:r,extractedFields:["name"]});case 2:return t.abrupt("return",a.extraSkills=t.sent);case 3:case"end":return t.stop()}},t,this)}))].reduce(function(t,n){return t.then(function(){if(e===a.activeCallToken)return n()})},Promise.resolve());case 16:e===this.activeCallToken&&(this.isInternallyLoading=!1);case 17:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getUnit:function(t){return this.units[t]||{}},getItem:function(t){return this.items[t]||{}},getExtraSkill:function(t){return this.extraSkills[t]||{}},filterSquads:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,i=void 0===n?"":n,r=i&&i.toLowerCase(),a=function(t){return(t||"").toLowerCase().includes(r)};return this.squads.filter(function(e){return[function(){return!r},function(){return a(e.id.toString())},function(){return e.name&&a(e.name)},function(){return e.units.some(function(e){return[function(){return a(t.getUnit(e.id).name)},function(){return e.es&&a(t.getExtraSkill(e.es).name)},function(){return Array.isArray(e.spheres)&&e.spheres.some(function(e){return a(t.getItem(e).name)})}].some(function(t){return t()})})}].some(function(t){return t()})})},onFilterUpdate:h()(function(){this.filteredSquads=this.filterSquads({name:this.nameFilter}),this.filterChanged=!1},300),repositionTooltip:h()(function(){var t=S(s.a.mark(function t(e){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.fabModel&&!e){t.next=4;break}return t.next=3,this.$nextTick();case 3:this.showTooltip=!1;case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),200),getModuleName:function(t){var e=u["C"].find(function(e){return e.name===t});return e?e.fullName:t},getSquadUrl:function(t){return this.$router.resolve({path:"/tools/squads/add",query:{import:"string"!==typeof t?Object(f["k"])(t):t}}).route.fullPath}}),watch:{isInternallyLoading:function(){var t=this;k.setValue(function(){return t.isInternallyLoading})},squads:{immediate:!0,handler:function(){this.onFilterUpdate()}},nameFilter:function(){this.filterChanged=!0},currentPage:function(){window.scrollTo(0,0)},activeSquadDialog:function(t){t||(this.activeSquadIndex=-1)},sortedSquads:function(){this.currentPage=1},showTooltip:function(){var t=S(s.a.mark(function t(e){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=4;break}return t.next=3,this.$nextTick();case 3:this.showTooltip=!0;case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),showCopyModal:function(){var t=S(s.a.mark(function t(e){var n;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$store.commit("setHtmlOverflowDisableState",!!e),e){t.next=6;break}return t.next=4,Object(l["b"])(1e3);case 4:n=document.querySelector("nav.v-toolbar").offsetHeight,Object(l["c"])(n,56);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},E=O,C=(n("7587"),n("2877")),q=Object(C["a"])(E,i,r,!1,null,null,null);e["default"]=q.exports},1700:function(t,e,n){},1791:function(t,e,n){"use strict";var i=n("1700"),r=n.n(i);r.a},"1b56":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"squad-card--share"},[n("card-tabs-container",{attrs:{tabs:t.tabConfig},model:{value:t.activeTabIndex,callback:function(e){t.activeTabIndex=e},expression:"activeTabIndex"}},[n("v-layout",{attrs:{slot:"markdown",column:t.$vuetify.breakpoint.smAndDown,row:t.$vuetify.breakpoint.mdAndUp},slot:"markdown"},[n("v-layout",{style:{"max-width":t.$vuetify.breakpoint.mdAndUp?"50%":"100%"},attrs:{column:"",wrap:""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("h2",{staticClass:"title"},[t._v("\n              Formatting\n            ")])]),n("v-flex",[n("v-select",{attrs:{items:t.possibleTargets,label:"Platform"},model:{value:t.target,callback:function(e){t.target=e},expression:"target"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"Use Bulleted List"},model:{value:t.useBullets,callback:function(e){t.useBullets=e},expression:"useBullets"}})],1)],1),n("v-divider",{staticClass:"mb-3"}),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("h2",{staticClass:"title"},[t._v("\n              Information\n            ")])]),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"List View"},model:{value:t.showByList,callback:function(e){t.showByList=e},expression:"showByList"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"Table View"},model:{value:t.showByTable,callback:function(e){t.showByTable=e},expression:"showByTable"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"Squad Name"},model:{value:t.showName,callback:function(e){t.showName=e},expression:"showName"}})],1),t.sparkResult?n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{disabled:!t.showName&&!t.showByTable,label:"Total Spark Percentage"},model:{value:t.showTotalSparkability,callback:function(e){t.showTotalSparkability=e},expression:"showTotalSparkability"}})],1):t._e(),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{disabled:!t.showByList,label:"Position"},model:{value:t.showPosition,callback:function(e){t.showPosition=e},expression:"showPosition"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"BB Order"},model:{value:t.showOrder,callback:function(e){t.showOrder=e},expression:"showOrder"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"Action"},model:{value:t.showAction,callback:function(e){t.showAction=e},expression:"showAction"}})],1),t.sparkResult?n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"Show Sparks per Unit"},model:{value:t.showSparkStatisticsByUnit,callback:function(e){t.showSparkStatisticsByUnit=e},expression:"showSparkStatisticsByUnit"}})],1):t._e(),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{disabled:!t.showByList,label:"Extra Skill"},model:{value:t.showExtraSkill,callback:function(e){t.showExtraSkill=e},expression:"showExtraSkill"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{disabled:!t.showByList,label:"Spheres"},model:{value:t.showSpheres,callback:function(e){t.showSpheres=e},expression:"showSpheres"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{disabled:!t.showByList,label:"SP Enhancements"},model:{value:t.showEnhancements,callback:function(e){t.showEnhancements=e},expression:"showEnhancements"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{disabled:!t.showByList,label:"Abbreviate Results"},model:{value:t.abbreviate,callback:function(e){t.abbreviate=e},expression:"abbreviate"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{disabled:!t.showByList||t.abbreviate||!t.showEnhancements,label:"SP Costs"},model:{value:t.showSpCost,callback:function(e){t.showSpCost=e},expression:"showSpCost"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"Share Link"},model:{value:t.showShareLink,callback:function(e){t.showShareLink=e},expression:"showShareLink"}})],1)],1)],1),n("v-flex",[n("text-viewer",{staticStyle:{height:"100%"},attrs:{inputText:t.markdownText,value:t.markdownText}})],1)],1),n("v-layout",{attrs:{slot:"code",row:""},slot:"code"},[n("one-line-text-viewer",{staticStyle:{flex:"0 1 100%"},attrs:{inputText:t.squadShorthand,label:"Code",value:t.squadShorthand}})],1),n("v-layout",{attrs:{slot:"link",row:""},slot:"link"},[n("one-line-text-viewer",{staticStyle:{flex:"0 1 100%"},attrs:{inputText:t.shareLink,label:"Link",value:t.shareLink}})],1)],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{flat:""},on:{click:function(e){return t.$emit("back")}}},[t._v("Back")])],1)],1)},r=[],a=n("00e0"),s=n("6a92"),o=n("34b9"),u=n("e5b6"),l=n("5517"),c=n("874d"),d=n("8398");function f(t,e){if(null==t)return{};var n,i,r=p(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function p(t,e){if(null==t)return{};var n,i,r={},a=Object.keys(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}var h={mixins:[d["a"]],props:{squad:{type:Object,required:!0},sparkResult:{required:!1}},components:{CardTabsContainer:u["a"],TextViewer:l["a"],OneLineTextViewer:c["a"]},computed:{tabConfig:function(){return["markdown","code","link"].map(function(t){return{name:t,slot:t}})},copyableJson:function(){var t=this.squad,e=(t.id,f(t,["id"]));return e},markdownText:function(){return this.squadToMarkdown(this.squad,this)},squadShorthand:function(){return Object(s["k"])(this.squad)},shareLink:function(){var t=this.$router.resolve({path:"/tools/squads/add",query:{import:this.squadShorthand}}).href;return"".concat(location.protocol,"//").concat(location.host).concat(location.pathname).concat(t)},possibleTargets:function(){return["Discord","Reddit"]},sparkTextByUnit:function(){var t=this,e=new Map;return this.sparkResult&&this.squad.units.forEach(function(n){var i=t.sparkResult.squad.find(function(t){return n.position===t.position});i&&e.set(n,"(".concat(i.actualSparks,"/").concat(i.possibleSparks,")"))}),e}},data:function(){return{activeTabIndex:0,updateTime:new Date,showPosition:!1,showAction:!1,showOrder:!1,showName:!1,useBullets:!1,abbreviate:!1,showSpCost:!1,showShareLink:!1,showExtraSkill:!1,showSpheres:!1,showEnhancements:!1,showSparkStatisticsByUnit:!0,showTotalSparkability:!0,showByList:!0,showByTable:!0,target:"Discord"}},mounted:function(){this.setWithPreset()},methods:{squadToMarkdown:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.showPosition,r=void 0===i||i,a=n.showAction,s=void 0===a||a,u=n.showOrder,l=void 0===u||u,c=n.showName,d=void 0!==c&&c,f=n.useBullets,p=void 0===f||f,h=n.abbreviate,v=void 0!==h&&h,g=n.showSpCost,A=void 0===g||g,b=n.showShareLink,m=void 0!==b&&b,y=n.showExtraSkill,S=void 0!==y&&y,x=n.showSpheres,w=void 0!==x&&x,k=n.showEnhancements,O=void 0===k||k,E=n.showSparkStatisticsByUnit,C=void 0===E||E,q=n.showTotalSparkability,_=void 0===q||q,T=n.showByList,P=void 0===T||T,I=n.showByTable,j=void 0===I||I,B=[];if(d){var U=["".concat(e.name),_&&this.sparkResult&&"(".concat((100*this.sparkResult.weightedPercentage).toFixed(2),"%)")].filter(function(t){return t}).join(" ");B.push("# ".concat(U,"\n"))}if(P&&e.units.forEach(function(n,i){var a=[],u=p?"*":"",c=n.id===o["I"].ANY||n.id===o["I"].EMPTY;a.push([u,c&&"**__".concat(t.getUnit(n.id).name||n.id,"__**"),!c&&["**__".concat(t.getUnit(n.id).rarity&&"".concat(8===t.getUnit(n.id).rarity?"OE":"".concat(t.getUnit(n.id).rarity,"\\*"))),"".concat(t.getUnit(n.id).name||n.id,"__**")].join(" "),i===e.lead&&"**(".concat(v?"L":"Leader",")**"),i===e.friend&&"**(".concat(v?"F":"Friend",")**"),(r||l||s)&&"-",[r&&n.position,[l&&n.bbOrder,s&&t.getActionText(n)].filter(function(t){return t}).join("-")].filter(function(t){return t}).join("; "),C&&t.sparkTextByUnit.get(n)].filter(function(t){return t}).join(" ")),p&&(u="\t*"),S&&n.es&&a.push([u,"**".concat(v?"ES":"Extra Skill",":**"),t.getExtraSkill(n.es).name||n.es].filter(function(t){return t}).join(" ")),w&&Array.isArray(n.spheres)&&n.spheres.length>0&&a.push([u,"**Spheres:**",n.spheres.map(function(e){return t.getItem(e).name||e}).join(", ")].filter(function(t){return t}).join(" ")),O&&n.sp&&t.getSpCost(n)>0&&a.push([u,"**SP Enhancements (".concat(t.getSpCost(n)," SP):**"),v&&n.sp,!v&&["\n",t.getSpText(n).map(function(t){return["\t".concat(p?"".concat(u," "):""),A&&"[".concat(t.cost," SP] - "),"**".concat(t.code,":** ").concat(t.text)].filter(function(t){return t}).join("")}).join("\n")].join("")].filter(function(t){return t}).join(" ")),B.push("".concat(a.join("\n"),"\n"))}),j&&B.push("".concat(this.getTableView(n),"\n")),m){var M="Reddit"===this.target?"[Save Squad](".concat(this.shareLink,")"):"Save Squad: ".concat(this.shareLink);B.push(M)}return B.join("\n")},getActionText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action||this.getUnit(t.id).sbb&&o["J"].SBB||this.getUnit(t.id).bb&&o["J"].BB||o["J"].ATK;return e.toUpperCase()},getSpCost:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getUnit(t.id).feskills,n=t.sp;return Object(a["o"])(e,n)},getSpText:function(t){var e=this.getUnit(t.id).feskills,n=t.sp;return e&&n?n.split("").map(function(t){return{code:t,skill:e[Object(a["w"])(t)]}}).filter(function(t){return t.skill}).map(function(t){return{code:t.code,text:Object(a["q"])(t.skill),cost:t.skill.skill.bp}}):[]},setWithPreset:function(){this.showOrder=!0,this.abbreviate=!1,this.showSpCost=!0,this.showShareLink=!0,this.showExtraSkill=!0,this.showSpheres=!0,this.showEnhancements=!0,this.showPosition=!0,this.showAction=!0,this.showName="Discord"===this.target,this.useBullets="Reddit"===this.target},getTableView:function(t){var e,n=t.showAction,i=void 0===n||n,r=t.showOrder,a=void 0===r||r,s=t.showName,u=void 0!==s&&s,l=t.showSparkStatisticsByUnit,c=void 0===l||l,d=t.showTotalSparkability,f=void 0===d||d,p=this.squad,h=this.getUnit,v=this.sparkTextByUnit,g=this.getActionText,A="Discord"===this.target,b=o["N"].map(function(t){var e=p.units.findIndex(function(e){return e.position===t}),n=p.units[e],r=n.id===o["I"].ANY||n.id===o["I"].EMPTY,s=[r&&"**__".concat(h(n.id).name||n.id,"__**"),!r&&["**__".concat(h(n.id).rarity&&"".concat(8===h(n.id).rarity?"OE":"".concat(h(n.id).rarity,"\\*"))),"".concat(h(n.id).name||n.id,"__**")].join(" "),e===p.lead&&"**(L)**",e===p.friend&&"**(F)**","-",[a&&n.bbOrder,i&&g(n)].filter(function(t){return t}).join("-"),c&&v.get(n)].filter(function(t){return t}).join(" ");return A?s.replace(/\*\*/g,"").replace(/__/g,""):s}),m=this.sparkResult&&"".concat((100*this.sparkResult.weightedPercentage).toFixed(2),"%")||"",y=f&&!u;if(A){var S=b.reduce(function(t,e,n){return Math.max(t,n%2===0?e.length:0)},0),x=b.map(function(t,e){return"".concat(t.padEnd(S," ")).concat(e%2===0?" | ":"\n")}).join("").trim(),w="```";e=[w,y&&m,x,w].filter(function(t){return t}).join("\n")}else{var k=b.map(function(t,e){return"".concat(e%2===0?"| ":"").concat(t).concat(e%2===0?" | ":" |\n")});e=["|".concat(y?" ".concat(m):""," | |"),"| --- | --- |",k.join("").trim()].join("\n")}return e}},watch:{target:function(){this.setWithPreset()}}},v=h,g=(n("97a2"),n("2877")),A=Object(g["a"])(v,i,r,!1,null,null,null);e["a"]=A.exports},2393:function(t,e,n){"use strict";var i=n("e7ab"),r=n.n(i);r.a},"2b3e0":function(t,e,n){"use strict";var i=n("c7e9"),r=n.n(i);r.a},"2c86":function(t,e,n){},"38fd1":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"buff-expandable-list"},[t.isVisuallyLoadingList?n("loading-indicator",{attrs:{progress:t.loadProgress,loadingMessage:"Loading list..."}}):t._e(),t.isVisuallyLoadingList||0!==t.sortedEffectIds.length?t._e():n("div",{staticClass:"my-2"},[t._t("noentries",[n("span",[t._v("No entries of type ["+t._s(t.effectType)+"] were found.")])])],2),n("delayed-v-for-expansion-panel",{directives:[{name:"show",rawName:"v-show",value:!t.isVisuallyLoadingList,expression:"!isVisuallyLoadingList"}],attrs:{entries:t.sortedEffectIds,expand:"",focusable:""},on:{start:t.handleLoadStart,end:t.handleLoadEnd,progress:function(e){return t.loadProgress=e}},scopedSlots:t._u([{key:"header",fn:function(e){var i=e.arrayEntry;return[n("div",{class:t.getEntryHeaderClasses(i)},[n("span",{staticClass:"expandable-list-entry--title subheading",domProps:{textContent:t._s(i+": "+t.effectNameById[i])}}),t._t("allentrypreview",t._l(t.getSourcesForEffectId(i),function(e,i){return n("div",{key:i},[t._v("\n            "+t._s(e)+"\n          ")])}),{entries:t.getSourcesForEffectId(i),effectId:i})],2)]}},{key:"default",fn:function(e){var i=e.arrayEntry,r=e.index;return[t.viewedTables[r]?[n("value-subgrid",{directives:[{name:"show",rawName:"v-show",value:t.expandedTables[r],expression:"expandedTables[index]"}],attrs:{properties:t.propsById[i],values:t.getSourcesForEffectId(i).map(function(e){return t.getValueSubgridEntry(e.source,i)}),allowOverflow:!0,minValueColumnWidth:"300px",getTextForSource:t.getTextForSource},scopedSlots:t._u([{key:"value-header",fn:function(e){var i=e.entry;return[t._t("value-header",[n("span",[t._v(t._s(i.identifier))])],{entry:i.identifier})]}}],null,!0)})]:t._e()]}}],null,!0),model:{value:t.expandedTables,callback:function(e){t.expandedTables=e},expression:"expandedTables"}})],1)},r=[],a=n("d239"),s=n("abcf"),o=n("c7df"),u=n("080f"),l=n("fca9"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"generic-value-subgrid",style:t.mainValueGridStyle},[t.showHeaders?[n("span",{staticClass:"property-cell header-cell"},[n("v-btn",{attrs:{flat:""},on:{click:function(e){t.lockPropertyColumn=!t.lockPropertyColumn}}},[n("span",{staticStyle:{"text-transform":"capitalize"}},[t._v("Buff Property")]),n("v-icon",[t._v(t._s(t.lockPropertyColumn?"lock":"lock_open"))])],1)],1),t._l(t.values,function(e,i){return n("span",{key:i,staticClass:"value-cell header-cell",style:t.convertNumberToColumnSpanStyle(t.columnCountMappingByValueEntry.get(e))},[t._t("value-header",[t._v("\n        "+t._s(e.identifier)+"\n      ")],{entry:e})],2)})]:t._e(),t._l(t.properties,function(e,i){return[n("span",{key:e+"-"+i+"-property",class:t.getClassForProperty(e,i),domProps:{textContent:t._s(e)}}),t._l(t.values,function(r,a){return[t._l(r.values,function(s,o){return["sourcePath"===e?n("source-path-cell",{key:e+"-"+i+"-"+a+"-"+o+"-custom-value",class:t.getClassForValue(o,r.values,i,e),attrs:{value:t.getPropertyValue(e,s),source:r.identifier,getTextForSource:t.getTextForSource}}):"triggeredOn"===e?n("triggered-on-cell",{key:e+"-"+i+"-"+a+"-"+o+"-custom-value",class:t.getClassForValue(o,r.values,i,e),attrs:{value:t.getPropertyValue(e,s)}}):n("span",{key:e+"-"+i+"-"+a+"-"+o+"-value",class:t.getClassForValue(o,r.values,i,e),domProps:{textContent:t._s(t.getPropertyValue(e,s))}})]})]})]})],2)},d=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"generic-source-path-cell"},[n("span",{style:t.cellStyle,domProps:{textContent:t._s(t.displayValue)}})])},p=[],h=n("c0a4"),v=n.n(h);function g(t,e){return m(t)||b(t,e)||A()}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function b(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}return n}function m(t){if(Array.isArray(t))return t}var y=Object.freeze({"unit.ls":"green darken-3","unit.es":"orange darken-4","unit.bb":"blue-grey","unit.sbb":"yellow darken-3","unit.ubb":"red darken-3","unit.sp":"light-green darken-3",es:"purple lighten-1",sphere:"grey"}),S=Object.freeze({"unit.ls":"Leader Skill","unit.es":"Extra Skill","unit.bb":"Brave Burst","unit.sbb":"Super Brave Burst","unit.ubb":"Ultimate Brave Burst","unit.sp":"SP Enhancement"}),x={props:{value:{type:String,default:""},source:{type:Object,default:function(){}},getTextForSource:{type:Function,required:!0}},computed:{materialColor:function(){return y[this.value]||"grey"},hexColor:function(){var t=this.materialColor.split(" "),e=g(t,2),n=e[0],i=e[1];if(n.includes("-")){var r=function(t){return[t[0].toUpperCase(),t.slice(1)].join("")},a=n.split("-");n=[a[0],a.slice(1).map(r)].join("")}return i&&(i=i.replace(/-/g,"")),Object(u["j"])(v.a,[n,i||"base"])},cellStyle:function(){return{"border-color":this.hexColor}},displayValue:function(){var t=S[this.value];return t=this.getTextForSource(this.value,this.source,t)||t,t||this.value}}},w=x,k=(n("4c7d"),n("2877")),O=Object(k["a"])(w,f,p,!1,null,null,null),E=O.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"generic-triggered-on-cell"},[n("span",{style:t.cellStyle,domProps:{textContent:t._s(t.displayValue)}})])},q=[];function _(t,e){return I(t)||P(t,e)||T()}function T(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function P(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}return n}function I(t){if(Array.isArray(t))return t}var j=Object.freeze({bb:"blue-grey",sbb:"yellow darken-3",ubb:"red darken-3"}),B=Object.freeze({bb:"Brave Burst",sbb:"Super Brave Burst",ubb:"Ultimate Brave Burst"}),U={props:{value:{type:String,default:""}},computed:{materialColor:function(){return j[this.value]},hexColor:function(){if(!this.materialColor)return"transparent";var t=this.materialColor.split(" "),e=_(t,2),n=e[0],i=e[1];if(n.includes("-")){var r=function(t){return[t[0].toUpperCase(),t.slice(1)].join("")},a=n.split("-");n=[a[0],a.slice(1).map(r)].join("")}return i&&(i=i.replace(/-/g,"")),Object(u["j"])(v.a,[n,i||"base"])},cellStyle:function(){return{"border-color":this.hexColor}},displayValue:function(){return B[this.value]||this.value}}},M=U,L=(n("b404"),Object(k["a"])(M,C,q,!1,null,null,null)),D=L.exports;function N(t){return N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var V={props:{properties:{type:Array,default:function(){return[]}},values:{type:Array,default:function(){return[{identifier:{},values:[]}]}},showHeaders:{type:Boolean,default:!0},allowOverflow:{type:Boolean,default:!1},minValueColumnWidth:{type:String,default:"5em"},freezePropertyColumn:{type:Boolean,default:!1},getTextForSource:{type:Function,default:function(t,e,n){return n||t}}},components:{SourcePathCell:E,TriggeredOnCell:D},computed:{numValueColumns:function(){var t=this.columnCountMappingByValueEntry;return this.values.reduce(function(e,n){return e+t.get(n)},0)},columnCountMappingByValueEntry:function(){var t=new WeakMap,e=this.properties;return this.values.forEach(function(n){var i=n.values.filter(function(t){return e.some(function(e){return t.hasOwnProperty(e)})}),r=Math.max(1,i.length);t.set(n,r)}),t},mainValueGridStyle:function(){var t=this,e=this.$vuetify.breakpoint.smAndDown?"10em":"17.5em",n="minmax(".concat(this.minValueColumnWidth,", 1fr)"),i=[e];return this.values.forEach(function(e){var r=t.columnCountMappingByValueEntry.get(e);r>1?i.push("repeat(".concat(r,", minmax(calc(").concat(t.minValueColumnWidth," / ").concat(r,"), 1fr))")):i.push(n)}),{"grid-template-columns":i.join(" "),overflow:this.allowOverflow?"auto":void 0}},customCellsByPropertyName:function(){return["sourcePath","triggeredOn"]}},data:function(){return{lockPropertyColumn:!1}},mounted:function(){this.lockPropertyColumn=this.freezePropertyColumn},methods:{getClassForProperty:function(t,e){var n;return n={"property-cell":!0},F(n,e%2===0?"even-row":"odd-row",!0),F(n,"only-row",0===this.properties.length),F(n,"sticky-property-cell",this.lockPropertyColumn),n},getClassForValue:function(t,e,n,i){var r;return r={"value-cell":!0},F(r,n%2===0?"even-row":"odd-row",!0),F(r,"is-last-value-cell",t===e.length-1),F(r,"is-custom-cell",this.isCustomCell(i)),r},convertNumberToColumnSpanStyle:function(t){return{"grid-column-start":"span ".concat(t)}},isProcBuffList:function(t){return"triggered effect"===t},isCustomCell:function(t){return this.customCellsByPropertyName.includes(t)},getPropertyValue:function(t,e){var n=void 0!==e[t]?e[t]:"-",i="object"===N(n)?JSON.stringify(n):n;return Array.isArray(n)&&0===n.length?"".concat(i," (None)"):i}}},R=V,z=(n("1791"),Object(k["a"])(R,c,d,!1,null,null,null)),H=z.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-expansion-panel",t._b({attrs:{value:t.value},on:{input:function(e){return t.$emit("input",e)}}},"v-expansion-panel",t.$attrs,!1),t._l(t.internalEntries,function(e,i){return n("v-expansion-panel-content",{key:t.getKeyFunction(e,i)},[n("template",{slot:"header"},[t._t("header",[t._v("\n        Header\n      ")],{arrayEntry:e,index:i})],2),t._t("default",[n("div",[t._v(t._s(e))])],{arrayEntry:e,index:i})],2)}),1)},$=[],Y=n("7f0c"),K={mixins:[Y["a"]],props:{value:{required:!1}}},J=K,G=Object(k["a"])(J,W,$,!1,null,null,null),Q=G.exports,X=n("b758");function Z(t,e){return nt(t)||et(t,e)||tt()}function tt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function et(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}return n}function nt(t){if(Array.isArray(t))return t}function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rt=new l["a"]({prefix:"[BuffExpandableList]"}),at={props:{sources:{type:Array,required:!0},getEffectsFromSource:{type:Function,default:function(){return[]}},inputEffectMappingBySource:{type:WeakMap,default:function(){return new WeakMap}},highlightedBuffIds:{type:Array,default:function(){return[]}},effectType:{type:String,required:!0},getTextForSource:{type:Function,default:function(t,e){return t}}},components:{ValueSubgrid:H,DelayedVForExpansionPanel:Q,LoadingIndicator:X["a"]},computed:{blacklistedKeys:function(){return Object.freeze(["passive id","unknown passive id","proc id","unknown proc id","add to bb","add to sbb","add to ubb","trigger on bb","trigger on sbb","trigger on ubb"])},weightedCompareOptions:function(){return Object.freeze({beginning:["conditions","esConditions","effect delay time(ms)/frame"],end:["passive target","target area","target type","buff turns","sp_type","sourceSpCode","triggeredOn","sourcePath"]})},effectsById:function(){var t=this.getEffectsFromSource,e=this.getEffectDetails,n=this.inputEffectMappingBySource,i=this.sources.reduce(function(i,r){var a=n.get(r)||t(r);return a.forEach(function(t){var n=e(t);n.source=r,i[n.id]||(i[n.id]=[]),i[n.id].push(Object.freeze(n))}),i},{});return Object.freeze(i)},propsById:function(){var t=this.effectsById,e=this.weightedCompareOptions,n=Object.keys(t).reduce(function(n,i){var r=new Set,a=t[i];return a.forEach(function(t){Object.keys(t.effect).forEach(function(t){r.add(t)})}),n[i]=Object.freeze(Array.from(r).sort(function(t,n){return Object(u["l"])(t,n,e)})),n},{});return Object.freeze(n)},sortedEffectIds:function(){return Object.freeze(Object.keys(this.effectsById).sort(function(t,e){return+t-+e}))},effectNameById:function(){var t="".concat(this.effectType," id"),e=this.sortedEffectIds.reduce(function(e,n){return e[n]=Object(o["a"])(it({},t,n)),e},{});return Object.freeze(e)}},data:function(){return{expandedTables:[],viewedTables:{},valueSubgridEntryByEntryByEffectId:{},loadStartToken:0,loadingList:!0,isVisuallyLoadingList:!0,loadingDebouncer:null,highlightCheckerTimeout:null,loadProgress:-1}},beforeDestroy:function(){this.loadingDebouncer&&this.loadingDebouncer.dispose()},methods:{getEffectDetails:function(t){var e=this,n=Object(s["getEffectId"])(t),i={},r=Object(o["c"])(t);return Object.keys(r).filter(function(t){return!e.blacklistedKeys.includes(t)}).forEach(function(t){i[t]=r[t]}),{id:n,effect:i}},handleLoadStart:function(t){this.loadStartToken=t,this.loadingList=!0,this.loadProgress=-1},handleLoadEnd:function(t){this.loadStartToken===t&&(this.loadingList=!1)},getValueSubgridEntry:function(t,e){this.valueSubgridEntryByEntryByEffectId[e]||(this.valueSubgridEntryByEntryByEffectId[e]=new WeakMap);var n=this.valueSubgridEntryByEntryByEffectId[e];if(!n.has(t)){var i={identifier:t,values:this.effectsById[e].filter(function(e){return e.source===t}).map(function(t){return t.effect})};n.set(t,i)}return n.get(t)},toggleEffectView:function(t){this.expandedTables[t]=!this.expandedTables[t]},toggleAllEffectViews:function(){this.expandedTables.length===this.sortedEffectIds.length?this.expandedTables=[]:this.expandedTables=this.sortedEffectIds.map(function(t,e){return e})},isEmptyArray:function(t){return Array.isArray(t)&&0===t.length},getSourcesForEffectId:function(t){var e=this.effectsById[t],n=new Map;return e||rt.warn("Missing effect id array [".concat(t,"]"),this.effectsById),(e||[]).forEach(function(t){var e=n.get(t.source)||new Set;e.add(t.effect.sourcePath),n.set(t.source,e)}),Array.from(n.entries()).map(function(t){var e=Z(t,2),n=e[0],i=e[1];return{source:n,sourcePaths:Array.from(i)}})},isHighlightedHeader:function(t){return this.highlightedBuffIds.includes(t)},highlightHeaders:function(){var t=Array.from(this.$el.querySelectorAll(".highlighted-header")),e=!!this.$store.state.settings.lightMode,n=["blue",e?"lighten-4":"darken-4"];t.forEach(function(t){var e,i=t.parentNode;(e=i.classList).add.apply(e,n),t.classList.add("is-highlighted")})},ensureHeadersAreHighlighted:function(){var t=this;if(!this.highlightCheckerTimeout){var e=0,n=function n(){var i=!!t.$el.querySelector(".highlighted-header:not(.is-highlighted)");i&&!t.isVisuallyLoadingList?(e=0,t.highlightHeaders(),t.highlightCheckerTimeout=setTimeout(n,1e3)):e<3?(e++,t.highlightCheckerTimeout=setTimeout(n,1e3)):t.highlightCheckerTimeout=null};n()}},getEntryHeaderClasses:function(t){return{"expandable-list-entry--header":!0,"highlighted-header":this.isHighlightedHeader(t)}}},watch:{expandedTables:function(t){var e=this;t.forEach(function(t,n){t&&!0!==e.viewedTables[n]&&(e.viewedTables[n]=!0)})},loadingList:function(t){var e=this;this.loadingDebouncer||(this.loadingDebouncer=new a["a"](function(t){e.isVisuallyLoadingList=t})),this.loadingDebouncer.setValue(function(){return e.loadingList}),this.$emit("loadstatechange",t)},isVisuallyLoadingList:function(t){t||this.ensureHeadersAreHighlighted()}}},st=at,ot=(n("ad30"),Object(k["a"])(st,i,r,!1,null,null,null));e["a"]=ot.exports},3971:function(t,e,n){},"3c85":function(t,e,n){t.exports=function(){return new Worker(n.p+"eb965086359c47346e50.worker.js")}},"3e0d":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-entry-card",{staticStyle:{height:"100%"},attrs:{to:t.to}},[n("v-container",{staticClass:"pa-3",attrs:{fluid:""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",[n("div",{staticClass:"d-flex-container items-center"},[t.hasSphereType?n("sphere-type-icon",{staticClass:"mr-1",attrs:{category:t.entry["sphere type"],displaySize:24}}):t._e(),n("h1",{staticClass:"subheading d-inline-block",staticStyle:{"word-break":"break-word"}},[n("b",{domProps:{textContent:t._s(t.entry.name)}})])],1)])],1),n("v-layout",{staticClass:"d-align-items-center",attrs:{row:""}},[n("v-flex",{staticClass:"text-xs-center pb-0",attrs:{xs3:""}},[n("item-thumbnail",{attrs:{src:t.getImageUrl(t.entry.id,t.entry),rarity:t.rarity,type:t.entry.type,isRaidItem:!!t.entry.raid,imageTitle:t.entry.name,displayWidth:t.thumbnailSize,displayHeight:t.thumbnailSize}})],1),n("v-flex",{staticClass:"pb-0",staticStyle:{"word-break":"break-word"},attrs:{xs9:""}},[t._v("\n        "+t._s(t.entry.desc)+"\n      ")])],1),n("v-layout",{staticClass:"d-align-items-center",attrs:{row:""}},[n("v-flex",{attrs:{xs6:""}},[n("h2",{staticClass:"subheading"},[t._v(t._s(t.itemType))])]),n("v-flex",{attrs:{xs3:""}},[t._v("\n        x"+t._s(t.entry.max_stack)+"\n      ")]),n("v-flex",{attrs:{xs3:""}},[n("div",{staticClass:"d-flex-container items-center content-flex-end"},[t.rarity<8?n("span",[t._v(t._s(t.rarity))]):t._e(),n("rarity-icon",{class:{"ml-1":8!==t.rarity},attrs:{rarity:t.rarity,displaySize:18}})],1)])],1)],1)],1)},r=[],a=n("2f62"),s=n("50a6"),o=n("aeb4"),u=n("69c9"),l=n("e4b9"),c=n("5ab2");function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){f(t,e,n[e])})}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={mixins:[s["a"]],components:{SphereTypeIcon:o["a"],RarityIcon:u["a"],ItemThumbnail:l["a"]},computed:d({},Object(a["c"])("items",["getImageUrl"]),{rarity:function(){return this.entry.rarity},hasSphereType:function(){return Object(c["i"])(this.entry)},itemType:function(){return Object(c["g"])(this.entry)},thumbnailSize:function(){var t=this.$vuetify.breakpoint;return t.xlOnly?64:t.mdAndUp?56:48}})},h=p,v=n("2877"),g=Object(v["a"])(h,i,r,!1,null,null,null);e["a"]=g.exports},"3f51":function(t,e,n){},4764:function(t,e,n){"use strict";n.d(e,"d",function(){return g}),n.d(e,"e",function(){return y}),n.d(e,"c",function(){return S}),n.d(e,"b",function(){return x}),n.d(e,"a",function(){return k});var i=n("00e0"),r=n("5ab2"),a=n("34b9"),s=n("c7df");function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){u(t,e,n[e])})}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){if(null==t)return{};var n,i,r=d(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function d(t,e){if(null==t)return{};var n,i,r={},a=Object.keys(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}function f(t,e){return v(t)||h(t,e)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function h(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}return n}function v(t){if(Array.isArray(t))return t}function g(t){var e={unit:[],item:[],sphereType:[]};return t.conditions&&0!==t.conditions.length?(t.conditions.forEach(function(t){void 0!==t["sphere category required"]?e.sphereType.push(t["sphere category required (raw)"]):void 0!==t["item required"]?Array.isArray(t["item required"])&&t["item required"].length>0?t["item required"].forEach(function(t){e.item.includes(t)||e.item.push(t)}):e.item.push(t["item required"]):void 0!==t["unit required"]?Array.isArray(t["unit required"])&&t["unit required"].length>0?t["unit required"].forEach(function(t){e.unit.includes(t)||e.unit.push(t)}):e.unit.push(t["unit required"]):void 0!==t.unknown&&e.item.push("unknown sphere type ".concat(t["unknown"]))}),e):e}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return{name:t,id:t}};return t.map(function(t){var n=[];if(t.name)n.push(t.name);else{var r=t.id?t.id.toString():t.toString();if(+r%10===0){var a=Object(i["l"])(+r,e)||{};n.push("any evolution of ".concat(a.name||r))}else{var s=e(r)||{};n.push(s.name||r)}}return n}).reduce(function(t,e){return t.concat(e)},[])}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return{name:t,id:t}};return t.map(function(t){var n=e(t.toString())||{};return n.name||t})}function m(t,e){var n=t.unit,i=void 0===n?[]:n,a=t.item,s=void 0===a?[]:a,o=t.sphereType,u=void 0===o?[]:o,l=e.unitById,c=e.itemById,d=[];if(i.length>0){var f=A(i,l);1===i.length&&1===f.length?d.push("".concat(f[0]," is in squad")):d.push("".concat(f.join(" or ")," are in squad"))}if(s.length>0){var p=b(s,c);1===s.length?d.push("".concat(p[0]," is equipped")):d.push("".concat(p.join(" or ")," are equipped"))}if(u.length>0){var h=u.map(function(t){return Object(r["h"])(+t)});1===u.length?d.push("".concat(h[0]," sphere is equipped")):d.push("".concat(h.join(" or ")," spheres are equipped"))}return d.join(" or ")}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=e.unitById,i=e.itemById,r={};return r["No Condition"]=t.filter(function(t){return 0===t.conditions.length}),t.filter(function(t){return t.conditions.length>0}).forEach(function(t){var e=m(g(t),{unitById:n,itemById:i});r[e]||(r[e]=[]),r[e].push(t)}),Object.entries(r).map(function(t){var e=f(t,2),n=e[0],i=e[1];return{condition:n,effects:i.map(function(t){t.conditions;var e=c(t,["conditions"]);return e})}}).filter(function(t){var e=t.effects;return e.length>0})}function S(t){var e=["rarity","name","id","desc"];return"object"===l(t)&&e.every(function(e){return void 0!==t[e]})}function x(){return{id:0,name:"None",desc:"No Extra Skill selected",rarity:0}}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t&&Array.isArray(t.effects)?Array.from(t.effects):[]}function k(t){var e=t.skill,n=void 0===e?{}:e,i=t.target,r=void 0===i?a["L"].PARTY:i,u=t.effectType,l=void 0===u?a["H"].PROC:u,c=w(n).map(function(t){return o({},t,{sourcePath:"es"})});return Object(s["b"])({elgifEffects:c,target:r,effectType:l})}},"4c70":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("generic-sprite-icon",{attrs:{iconTitle:t.label,iconWidth:t.sheetSize[0],iconHeight:t.sheetSize[1],sheetWidth:t.sheetSize[0],sheetHeight:t.sheetSize[1],displayWidth:t.displaySize,displayHeight:t.displaySize,src:t.iconSrc,iconX:0,iconY:0}})},r=[],a=n("ef0e"),s={props:{displaySize:{type:Number,default:52}},components:{GenericSpriteIcon:a["a"]},computed:{label:function(){return"Leader Unit"},iconSrc:function(){return n("c31a")},sheetSize:function(){return[17,22]}}},o=s,u=n("2877"),l=Object(u["a"])(o,i,r,!1,null,null,null);e["a"]=l.exports},"4c7d":function(t,e,n){"use strict";var i=n("a004"),r=n.n(i);r.a},"4db1":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-selector",{attrs:{showCancelButton:t.showCancelButton,value:t.nameFilter,hasSelection:t.hasSelection,requiredModules:t.requiredModules,allEntryIds:t.allIds},on:{input:function(e){return t.nameFilter=(e||"").toLowerCase()},cancel:function(e){return t.$emit("cancel")}},scopedSlots:t._u([{key:"entries",fn:function(e){var i=e.entries;return n("v-layout",{attrs:{row:"",wrap:""}},t._l(i,function(e){return n("v-flex",{key:e,attrs:{xs12:"",sm6:"",md4:"",xl3:""}},[n("entry-card",{staticClass:"ma-2",staticStyle:{background:"var(--background-color)",cursor:"pointer"},attrs:{entry:t.pageDb[e]},nativeOn:{click:function(n){return t.sendEntry(e)}}})],1)}),1)}}])})},r=[],a=n("d939"),s=n("de7e"),o=n("de82"),u=Object(o["b"])("units"),l={props:{showCancelButton:{type:Boolean,default:!0}},components:{BaseSelector:a["a"],EntryCard:s["a"]},computed:{requiredModules:function(){return["units"]},pageDb:function(){return this.$store.state.units.pageDb},allIds:function(){var t=this,e=Object.keys(this.pageDb);return this.nameFilter?e.filter(function(e){return t.hasName(t.pageDb[e].name,t.nameFilter)}):e}},data:function(){return{nameFilter:"",hasSelection:!1}},methods:{hasName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.toLowerCase().includes(e)},sendEntry:function(t){this.hasSelection=!0,this.$emit("input",{id:t,data:u.getById({server:this.$store.state.settings.activeServer,id:t}).catch(function(){return{}})})}}},c=l,d=n("2877"),f=Object(d["a"])(c,i,r,!1,null,null,null);e["a"]=f.exports},5044:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"sp-table"},[n("thead",[n("th",{staticClass:"sp-column"},[n("v-checkbox",{staticClass:"mt-0",attrs:{label:t.activeSkillSum+" SP","input-value":"all"===t.overallState,indeterminate:"some"===t.overallState,"hide-details":""},nativeOn:{click:function(e){return t.toggleOverallState(e)}}})],1),n("th",{staticClass:"type-column"},[n("v-subheader",{staticClass:"flex-container align-center justify-center px-0"},[t._v("Type")])],1),n("th",{staticClass:"description-column"},[n("v-subheader",{staticClass:"flex-container align-center px-0"},[t._v("Description")])],1)]),n("tbody",[t._l(t.feSkills,function(e,i){return[n("tr",{key:i+"-content",class:"content-row content-row--"+(i%2===0?"even":"odd")},[n("td",{staticClass:"sp-column"},[n("v-checkbox",{attrs:{label:e.skill.bp+" SP","input-value":t.selectedSpEntries.includes(t.spIndexToCode(i))},nativeOn:{click:function(n){return t.toggleSpEntry(i,e)}}})],1),n("td",{staticClass:"type-column text-xs-center"},[n("sp-icon",{attrs:{category:+e.category,displaySize:24}})],1),n("td",{staticClass:"description-column py-2"},[n("v-layout",{attrs:{row:"",wrap:"","align-center":"","justify-space-between":""}},[n("v-flex",{attrs:{xs12:"",sm8:""}},[n("span",{staticClass:"d-block",domProps:{innerHTML:t._s(t.getSpDescription(i))}}),e.dependency?n("i",[t._v("\n                "+t._s(t.getSpDependencyText(e))+"\n              ")]):t._e()]),n("v-flex",{attrs:{xs12:"",sm4:""}},[t.showTables.includes(i)?n("v-btn",{attrs:{block:"",flat:""},on:{click:function(e){t.showTables=t.showTables.filter(function(t){return t!==i})}}},[t._v("\n                Hide Data\n              ")]):n("v-btn",{attrs:{block:"",flat:""},on:{click:function(e){return t.showTables.push(i)}}},[t._v("\n                Show Data\n              ")])],1)],1)],1)]),n("v-slide-y-transition",{key:i+"-table"},[n("tr",{directives:[{name:"show",rawName:"v-show",value:t.showTables.includes(i),expression:"showTables.includes(index)"}],class:"buff-row buff-row--"+(i%2===0?"even":"odd")},[n("td",{staticStyle:{"overflow-x":"auto"},attrs:{colspan:"3"}},[n("buff-table",{staticClass:"mb-2",attrs:{effects:t.getSpEffects(e,!0),showHeaders:!0}})],1)])])]})],2)])},r=[],a=n("00e0"),s=n("b047"),o=n.n(s),u=n("4427"),l=n("be8b"),c={props:{feSkills:{type:Array,required:!0},value:{type:String,default:""}},components:{SpIcon:u["a"],BuffTable:l["a"]},computed:{allEnhancementsCode:function(){return this.feSkills.map(function(t,e){return Object(a["x"])(e)}).join("")},allEnhancementsSum:function(){return Object(a["o"])(this.feSkills,this.allEnhancementsCode)},overallState:function(){return this.activeSkillSum===this.allEnhancementsSum?"all":0===this.activeSkillSum?"none":"some"},allEffects:function(){var t=this;return this.feSkills?this.feSkills.map(function(e){return t.getSpEffects(e,!1)}).reduce(function(t,e){return t.concat(e)},[]):[]}},data:function(){return{selectedSpEntries:[],activeSkillSum:0,showTables:[],effectCache:new WeakMap,cacheChangeToken:Date.now()}},mounted:function(){this.computeActiveSum()},methods:{getSpEffects:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?(this.effectCache.has(t)||(this.effectCache.set(t,Object(a["r"])(t)),this.cacheExchangeToken=Date.now()),this.effectCache.get(t)):Object(a["r"])(t)},getSpDescription:function(t){return"<b>".concat(Object(a["x"])(t),"</b>: ").concat(Object(a["q"])(this.feSkills[t]))},getSpDependencyText:function(t){return Object(a["p"])(t,this.feSkills)},spIndexToCode:a["x"],toggleOverallState:function(){"all"===this.overallState?this.selectedSpEntries=[]:this.selectedSpEntries=this.allEnhancementsCode.split("")},computeActiveSum:o()(function(){this.activeSkillSum=Object(a["o"])(this.feSkills,this.selectedSpEntries.join(""))},50),toggleSpEntry:function(t,e){var n=Object(a["x"])(t),i=this.selectedSpEntries.includes(n),r=this.selectedSpEntries.slice();if(i){var s=Object(a["d"])(e,this.feSkills);r=r.filter(function(t){return t!==n&&!s.includes(t)})}else{r.push(n);var o=Object(a["c"])(e,this.feSkills);o.forEach(function(t){r.includes(t)||r.push(t)})}this.selectedSpEntries=r}},watch:{value:{immediate:!0,handler:function(t){this.selectedSpEntries=t.split("")}},selectedSpEntries:function(t){this.computeActiveSum();var e=t.slice().sort().join("");e!==this.value&&this.$emit("input",e)}}},d=c,f=(n("d41e"),n("2877")),p=Object(f["a"])(d,i,r,!1,null,null,null);e["a"]=p.exports},"51a2":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("module-checker",{attrs:{requiredModules:t.requiredModules,ensureDbSync:!0}},[n("v-container",[n("v-layout",{attrs:{column:""}},[n("v-flex",[n("v-card",[n("card-tabs-container",{attrs:{tabs:t.tabConfig},model:{value:t.activeTabIndex,callback:function(e){t.activeTabIndex=e},expression:"activeTabIndex"}},[n("v-layout",{attrs:{slot:"squad",column:""},slot:"squad"},[n("v-flex",[n("squad-list-card-editable",{attrs:{flat:"",squad:t.squad,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,isLoadingInParent:t.isLoadingSquadData},on:{selectedindex:function(e){return t.selectedIndex=e},newsquad:function(e){return t.squad=e},newunits:function(e){return t.squad.units=e},save:t.onSuccessfulSave}})],1)],1),n("v-layout",{attrs:{slot:"import-code",column:""},slot:"import-code"},[n("v-flex",[n("v-text-field",{model:{value:t.inputCode,callback:function(e){t.inputCode=e},expression:"inputCode"}})],1),t.parsingCode?n("v-flex",[n("loading-indicator",{attrs:{loadingMessage:"Parsing input code"}})],1):t.parseState.type?n("v-flex",[n("v-alert",{staticClass:"squad-message-alert",attrs:{outline:"",value:!0,type:t.parseState.type}},[n("div",[n("div",{staticClass:"d-flex-container items-center"},[n("span",{staticStyle:{flex:"auto"}},[t._v(t._s(t.parseState.message))]),t.warningMessages.length>0?n("v-btn",{staticStyle:{flex:"none"},attrs:{flat:"",icon:""},on:{click:function(e){t.showWarnings=!t.showWarnings}}},[n("v-icon",[t._v(t._s(t.showWarnings?"keyboard_arrow_up":"keyboard_arrow_down"))])],1):t._e()],1),t.warningMessages.length>0?n("div",[n("v-expansion-panel",{attrs:{value:t.showWarnings?0:-1},on:{input:function(e){return t.showWarnings=0===e}}},[n("v-expansion-panel-content",{key:0},[n("v-list",t._l(t.warningMessages,function(e){return n("v-list-tile",{key:e},[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"pl-2"},[t._v("\n                                  "+t._s(e)+"\n                                ")])],1)],1)}),1)],1)],1)],1):t._e()])])],1):t._e(),n("v-layout",{attrs:{"justify-end":""}},[n("v-flex",{staticStyle:{"flex-grow":"0"}},[n("v-btn",{attrs:{disabled:!t.inputCode||t.parsingCode,flat:""},on:{click:t.attemptSquadImport}},[t._v("\n                    Import\n                  ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},r=[],a=n("a34a"),s=n.n(a),o=n("f022"),u=n("6a92"),l=n("fca9"),c=n("2f62"),d=n("88fe"),f=n("e5b6"),p=n("be55"),h=n("b758");function v(t,e){if(null==t)return{};var n,i,r=g(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function g(t,e){if(null==t)return{};var n,i,r={},a=Object.keys(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}function A(t,e,n,i,r,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(i,r)}function b(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(t){A(a,i,r,s,o,"next",t)}function o(t){A(a,i,r,s,o,"throw",t)}s(void 0)})}}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){y(t,e,n[e])})}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=new l["a"]({prefix:"[SquaddAdd]"}),x={props:{importSquad:{type:String,default:""}},components:{ModuleChecker:d["a"],CardTabsContainer:f["a"],SquadListCardEditable:p["a"],LoadingIndicator:h["a"]},computed:m({},Object(c["e"])("settings",["activeServer"]),Object(c["e"])("units",{allUnits:"pageDb"}),Object(c["e"])("items",{allItems:"pageDb"}),Object(c["e"])("extraSkills",{allExtraSkills:"pageDb"}),{requiredModules:function(){return o["b"]},tabConfig:function(){return["squad","import code"].map(function(t){return{name:t,slot:t.replace(/ /g,"-")}})},parseState:function(){var t=(this.parseErrorMessage?"error":this.parsedSuccessfully&&0===this.warningMessages.length&&"success")||this.parsedSuccessfully&&this.warningMessages.length>0&&"warning",e=this.parseErrorMessage||this.warningMessages.length>0&&"Parsed input code with ".concat(this.warningMessages.length," warnings.")||"Successfully parsed input code";return{type:t,message:e}},currentSquadCode:function(){try{return Object(u["k"])(this.squad)}catch(t){return""}}}),data:function(){return{squad:Object(u["c"])(),inputCode:"",parseErrorMessage:"",warningMessages:[],parsedSuccessfully:!1,parsingCode:!1,activeTabIndex:0,squadUnits:{},squadItems:{},squadExtraSkills:{},isLoadingSquadData:!1,selectedIndex:-1,showWarnings:!1,lastImportedSquadCode:""}},mounted:function(){this.$store.commit("setHtmlOverflowDisableState",!1),this.inputCode?(this.activeTabIndex=1,this.attemptSquadImport()):this.setSquad(this.squad)},methods:m({},Object(c["b"])("units",{getUnits:"getByIds"}),Object(c["b"])("items",{getItems:"getByIds"}),Object(c["b"])("extraSkills",{getExtraSkills:"getByIds"}),{attemptSquadImport:function(){var t=b(s.a.mark(function t(){var e;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.parseErrorMessage="",this.parsedSuccessfully=!1,this.warningMessages=[],this.inputCode){t.next=7;break}this.parseErrorMessage="No input specified",t.next=22;break;case 7:return this.parsingCode=!0,t.next=10,this.$nextTick();case 10:return t.prev=10,e=Object(u["i"])(this.inputCode),t.next=14,this.setSquad(e);case 14:this.parsedSuccessfully=!0,t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](10),S.error("error parsing squad",t.t0),this.parseErrorMessage="Import code is invalid and cannot be parsed.";case 21:this.parsingCode=!1;case 22:case"end":return t.stop()}},t,this,[[10,17]])}));return function(){return t.apply(this,arguments)}}(),setSquad:function(){var t=b(s.a.mark(function t(e){var n,i,r;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.updateSquadPageDbForSquad(e);case 2:n=Object(u["b"])(e,{getUnit:this.getUnit,getExtraSkill:this.getExtraSkill,getItem:this.getItem}),i=n.warnings,r=v(n,["warnings"]),this.warningMessages=i,this.squad=r,this.lastImportedSquadCode=Object(u["k"])(r);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),updateSquadPageDbForSquad:function(){var t=b(s.a.mark(function t(e){var n,i,r,a=this;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=7;break}return n=Object(u["f"])(e),i=function(t){return"".concat(t[0].toLowerCase()).concat(t.slice(1))},r=this.activeServer,t.next=6,["Units","Items","ExtraSkills"].reduce(function(t,e){var o=[],u=a["squad".concat(e)],l=n[i(e)],c={},d=Object.keys(u).map(function(t){return+t}).concat(l);return d.forEach(function(t){!isNaN(t)&&l.includes(t)&&(u[t]?c[t]=u[t]:o.push(t))}),t.then(b(s.a.mark(function t(){var n;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(o.length>0)){t.next=8;break}return a.isLoadingSquadData||(a.isLoadingSquadData=!0),t.next=4,a["get".concat(e)]({ids:o,server:r,extractedFields:[]});case 4:n=t.sent,a["squad".concat(e)]=m({},c,n),t.next=9;break;case 8:a["squad".concat(e)]=c;case 9:case"end":return t.stop()}},t,this)})))},Promise.resolve());case 6:this.isLoadingSquadData=!1;case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getUnit:function(t){return this.squadUnits[t]||{}},getItem:function(t){return this.squadItems[t]||{}},getExtraSkill:function(t){return this.squadExtraSkills[t]||{}},onSuccessfulSave:function(t){this.$router.push({path:"/tools/squads/".concat(t)})}}),watch:{importSquad:{immediate:!0,handler:function(t){t&&(this.inputCode=t)}},inputCode:function(t){t||(this.parseErrorMessage=""),this.parsedSuccessfully=!1},parseErrorMessage:function(t){t&&0===this.warningMessages.length&&(this.activeTabIndex=1)},"squad.units":{deep:!0,handler:function(){this.updateSquadPageDbForSquad(this.squad)}},warningMessages:function(t){this.showWarnings=t.length>0}}},w=x,k=(n("f8bc"),n("2877")),O=Object(k["a"])(w,i,r,!1,null,null,null);e["default"]=O.exports},5517:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{class:{"text-viewer pa-0":!0,"limit-height":t.limitHeight},attrs:{fluid:""}},[n("copy-button",{staticClass:"mb-0",attrs:{block:"",textToCopy:t.inputText,value:t.value}}),n("pre",[n("code",[t._v(t._s(t.inputText))])])],1)},r=[],a=n("6c03"),s={props:{inputText:{type:String,default:""},value:{default:void 0},limitHeight:{type:Boolean,default:!0}},components:{CopyButton:a["a"]}},o=s,u=(n("fa37"),n("2877")),l=Object(u["a"])(o,i,r,!1,null,null,null);e["a"]=l.exports},"5a88":function(t,e,n){"use strict";var i=n("3971"),r=n.n(i);r.a},"63a1":function(t,e,n){},6495:function(t,e,n){},"654e":function(t,e,n){},"6a92":function(t,e,n){"use strict";n.d(e,"k",function(){return g}),n.d(e,"h",function(){return A}),n.d(e,"d",function(){return b}),n.d(e,"c",function(){return y}),n.d(e,"a",function(){return S}),n.d(e,"i",function(){return x}),n.d(e,"b",function(){return w}),n.d(e,"f",function(){return k}),n.d(e,"j",function(){return O}),n.d(e,"e",function(){return E}),n.d(e,"g",function(){return C});var i=n("34b9"),r=n("00e0"),a=n("4764"),s=n("5ab2"),o=n("801b"),u=n("c7df");function l(t){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){return p(t)||f(t,e)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function f(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){r=!0,a=u}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}return n}function p(t){if(Array.isArray(t))return t}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){v(t,e,n[e])})}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{units:[]};return t.units.map(function(e,n){return[(e.id===i["I"].EMPTY?"E":e.id===i["I"].ANY&&"X")||e.id,i["N"].indexOf(e.position),e.es||"-",e.spheres.join("+")||"-",(n===t.lead?"L":n===t.friend&&"F")||"-",e.bbOrder,e.action,e.sp||"-"].join("~")}).join(",")}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=void 0===e?"":e,r=t.position,a=void 0===r?i["N"][0]:r,s=t.es,o=void 0===s?"":s,u=t.spheres,l=void 0===u?[]:u,c=t.bbOrder,d=void 0===c?0:c,f=t.action,p=void 0===f?"":f,h=t.sp,v=void 0===h?"":h,g=function(t){return(t||"").toString()};return{id:"E"===n&&i["I"].EMPTY||"X"===n&&i["I"].ANY||g(n),position:a,es:g(o),spheres:l.map(g),bbOrder:d,action:p,sp:v}}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.isEmpty,n=void 0!==e&&e,r=t.position,a=void 0===r?i["N"][0]:r,s=t.bbOrder,o=void 0===s?0:s;return A({id:n?i["I"].EMPTY:i["I"].ANY,position:a,bbOrder:o,action:n?i["J"].NONE:i["J"].ATK})}function m(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.getUnit,u=void 0===a?function(){}:a,l=n.getItem,c=void 0===l?function(){}:l,d=n.getExtraSkill,f=void 0===d?function(){}:d,p=(t={ls:[],es:[]},v(t,i["J"].BB,[]),v(t,i["J"].SBB,[]),v(t,i["J"].UBB,[]),v(t,"sp",[]),t);if(e.id&&e.id!==i["I"].EMPTY&&e.id!==i["I"].ANY){var g=u(e.id)||{};g["leader skill"]&&Array.isArray(g["leader skill"].effects)&&(p.ls=Array.from(g["leader skill"].effects).map(function(t){return h({},t,{sourcePath:"unit.ls"})})),g["extra skill"]&&Array.isArray(g["extra skill"].effects)&&(p.es=Array.from(g["extra skill"].effects).map(function(t){return h({},t,{sourcePath:"unit.es"})})),i["n"].forEach(function(t){var e=g[t]&&Array.isArray(g[t].levels)?Object(o["c"])(g[t]):{};Array.isArray(e.effects)&&(p[t]=Array.from(e.effects).map(function(e){return h({},e,{sourcePath:"unit.".concat(t)})}))}),e.sp&&Array.isArray(g.feskills)&&(p.sp=Array.from(new Set(Object(r["v"])(e.sp,g.feskills))).reduce(function(t,e){return t.concat(Object(r["r"])(e).map(function(t){return h({},t,{sourcePath:"unit.sp",sourceSpCode:Object(r["x"])(g.feskills.indexOf(e))})}))},[]))}var A=[];if(e.es){var m=f(e.es)||{};Array.isArray(m.effects)&&(A=Array.from(m.effects).map(function(t){return h({},t,{sourcePath:"es"})}))}var y={};return Array.isArray(e.spheres)&&e.spheres.forEach(function(t){var e=c(t)||{},n=Object(s["e"])(e);n.length>0&&(y[t]=n.map(function(e){return h({},e,{sourcePath:"sphere:".concat(t)})}))}),{unit:p,es:A,spheres:y}}function y(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return{lead:0,friend:3,name:"Squad ".concat((new Date).toLocaleString()),units:Array.isArray(e)?e:new Array(6).fill(0).map(function(e,n){return b({isEmpty:t,position:i["N"][n],bbOrder:n+1})})}}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.lead,n=t.friend,i=t.name,r=t.simulatorOptions,a=t.filterOptions,s=t.viewMode;return{lead:e,friend:n,name:i,units:O(t.units.map(A),!1),simulatorOptions:r,filterOptions:a,viewMode:s}}function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Squad ".concat((new Date).toLocaleString()),n=0,r=0,a=t.split(",").map(function(t,e){var a=t.split("~"),s=c(a,8),o=s[0],u=s[1],l=s[2],d=s[3],f=s[4],p=s[5],h=s[6],v=s[7];return"L"===f?n=e:"F"===f&&(r=e),A({id:o,position:i["N"][u],es:"-"!==l?l:"",spheres:"-"!==d?d.split("+"):[],bbOrder:+p,action:h,sp:"-"!==v?v:""})});return{name:e,lead:n,friend:r,units:a}}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getUnit,o=void 0===n?function(){}:n,u=e.getItem,c=void 0===u?function(){}:u,d=e.getExtraSkill,f=void 0===d?function(){}:d,p=[],h=[],v=t.lead,g=t.friend,m=new Set,y=new Set;if(Array.isArray(t.units)){var S=t.units.filter(function(t){return"object"===l(t)}).slice(0,6),x=[i["J"].SBB,i["J"].BB],w=function(t){return t>=1&&t<=6};S.forEach(function(t,e){if("object"===l(t)){var n=o(t.id)||{},u=t.id===i["I"].ANY||t.id===i["I"].EMPTY||Object(r["u"])(n)?t.id:i["I"].ANY,d=n.name?"Unit [".concat(n.name,"] at index ").concat(e):"Unit [".concat(t.id||u,"] at index ").concat(e);u!==t.id&&h.push("".concat(d," has an invalid ID [").concat(t.id,"]. Used default filler unit entry [").concat(i["I"].ANY,"].")),v===e&&u===i["I"].EMPTY?(h.push("There is an empty unit at index ".concat(v," and cannot be leader. Removed leader indicator.")),v=-1):g===e&&u===i["I"].EMPTY&&(h.push("There is an empty unit at index ".concat(g," cannot be friend leader. Removed friend leader indicator.")),g=-1);var b=i["N"].includes(t.position)&&!m.has(t.position)&&t.position;b?m.add(b):h.push("".concat(d," has invalid position [").concat(t.position,"]. Used default position value instead."));var S=u!==i["I"].EMPTY&&w(t.bbOrder)&&!y.has(t.bbOrder)&&t.bbOrder;S?y.add(S):h.push("".concat(d," has invalid BB Order [").concat(t.bbOrder,"]. Used default BB Order value instead."));var k=u===i["I"].EMPTY?i["J"].NONE:u===i["I"].ANY&&t.action||n[t.action]&&t.action||x.find(function(t){return!!n[t]});k!==t.action&&h.push("".concat(d," has invalid action [").concat(t.action,"]. Used default action [").concat(k,"]."));var O=u!==i["I"].EMPTY&&t.es&&Object(a["c"])(f(t.es))?t.es:void 0;O!==t.es&&t.es&&h.push("".concat(d," has invalid Extra Skill [").concat(t.es,"]. Removed Extra Skill."));var E=(u!==i["I"].EMPTY&&Array.isArray(t.spheres)?t.spheres:[]).filter(function(t){return Object(s["j"])(c(t))});Array.isArray(t.spheres)?E.length!==t.spheres.length&&h.push("".concat(d," has invalid spheres [").concat(t.spheres.filter(function(t){return!E.includes(t)}).join(", "),"]. Removed them from the entry.")):h.push("".concat(d," has invalid sphere entry. Used default of no spheres."));var C=u!==i["I"].EMPTY&&n.feskills&&"string"===typeof t.sp?t.sp.split("").filter(function(t){return n.feskills[Object(r["w"])(t)]}).join(""):void 0;if(C!==t.sp&&t.sp){var q=["".concat(d," has invalid SP code [").concat(t.sp,"]."),C?"Set SP code to [".concat(C,"]."):"Removed SP code."].join(" ");h.push(q)}p.push(A({id:u,position:b,bbOrder:S,action:k,es:O,spheres:E,sp:C}))}else h.push("Unit at input index ".concat(e," is invalid and has been removed from squad."))})}var k=new Array(6).fill(0).map(function(t,e){return e+1});p.forEach(function(t){t.position||(t.position=i["N"].find(function(t){return!m.has(t)}),m.add(t.position)),t.bbOrder||(t.bbOrder=k.find(function(t){return!y.has(t)}),y.add(t.bbOrder))}),p.length<6&&h.push("".concat(p.length," valid units found. Added ").concat(6-p.length," filler units."));for(var E=p.length;E<6;++E){var C=i["N"].find(function(t){return!m.has(t)});m.add(C);var q=k.find(function(t){return!y.has(t)});y.add(q),p.push(b({position:C,bbOrder:q}))}return p[v]&&p[v].id!==i["I"].EMPTY||(h.push("Unit at index ".concat(v," cannot be leader because it is invalid or empty. Removed leader indicator.")),v=-1),p[g]&&p[g].id!==i["I"].EMPTY||(h.push("Unit at index ".concat(v," cannot be friend leader because it is invalid or empty. Removed friend leader indicator.")),g=-1),-1!==v&&-1!==g&&v===g&&(h.push("Unit at index ".concat(v," cannot be lead and friend lead. Removed friend leader indicator.")),g=-1),{lead:v,friend:g,name:t.name||"Default Squad Name",units:O(p),warnings:h,simulatorOptions:t.simulatorOptions}}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[y()],e=new Set,n=new Set,i=new Set,r=Array.isArray(t)?t:[t];return r.forEach(function(t){t.units.forEach(function(t){e.add(t.id),t.es&&n.add(t.es),t.spheres.length>0&&t.spheres.forEach(function(t){i.add(t)})})}),{units:Array.from(e),extraSkills:Array.from(n),items:Array.from(i)}}function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e?t.slice():t;return n.sort(function(t,e){var n=[i["N"].indexOf(t.position),i["N"].indexOf(e.position)],r=n[0],a=n[1];return r-a})}function E(t){var e=t.unitEntry,n=void 0===e?b():e,r=t.target,a=void 0===r?i["L"].PARTY:r,s=t.effectType,o=void 0===s?i["H"].PROC:s,l=t.squad,c=void 0===l?y():l,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getUnit:function(){},getItem:function(){},getExtraSkill:function(){}},f=m(n,d),p=c.units.indexOf(n)===c.lead||c.units.indexOf(n)===c.friend;return Object(u["b"])({leaderSkillEffects:p?f.unit.ls:[],extraSkillEffects:f.unit.es,nonUbbBurstEffects:f.unit.bb.concat(f.unit.sbb),ubbBurstEffects:f.unit.ubb,elgifEffects:f.es,sphereEffects:Object.values(f.spheres).reduce(function(t,e){return t.concat(e)},[]),spEnhancementEffects:f.unit.sp,target:a,effectType:o})}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b(),e=[];return t.id!==i["I"].ANY&&t.id!==i["I"].EMPTY&&e.push({moduleName:"units",id:t.id,sp:t.sp}),t.es&&e.push({moduleName:"extraSkills",id:t.es}),Array.from(new Set(t.spheres)).forEach(function(t){e.push({moduleName:"items",id:t})}),e}},"6cb7":function(t,e,n){},"6cf1":function(t,e,n){"use strict";var i=n("3f51"),r=n.n(i);r.a},"6e7f":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAWCAMAAAARtodwAAAAA3NCSVQICAjb4U/gAAADAFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApUwkpVAkpVwkoXAkoXgknZQonZwombgkmcQoldAokfQwjhgsiiwsgmwwgngxDhisfoQseogwfowwfpAwfpQwfpgwepwweqA0eqQweqg0eqw0erA0erQ0drg0erg0dsA0dsQ0itBMntRdPnTwrtxwstx4vuCA8tCw4uyk5vCxepExepUxIwDtbtk1buE1awE5dyFFhyVdlylpqzWBwzmabsYybso130G130W540W6auo560nGD1Xq20a3E3r7D6L7N7sni6d7j6N/i697q+Onr+Onw9u/t+ez////////SciOpAAAA/3RSTlMA/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3N8PqRcAAAAkElEQVQY04WQsQ7CMAxEz03Sgih0QoxFfAH//0NsDEWINE5sppIEVao3P9ln31n8l10jWva0PgM8DgQAMZ4XMnlKLBqPP/JqP4GjNu9bvqWXq5C6fJ36vq3/Mc6wgVjoQlTCs5Mw7LOOTCwqp7wV/cysTgtfMo61crMztQs/gwAqSBJK9cydqavJsJkhbeX8BTdVMwA/hLFSAAAAAElFTkSuQmCC"},7587:function(t,e,n){"use strict";var i=n("f2fe"),r=n.n(i);r.a},"7ac9":function(t,e,n){},"7e25":function(t,e,n){"use strict";var i=n("63a1"),r=n.n(i);r.a},8398:function(t,e,n){"use strict";e["a"]={props:{getUnit:{type:Function,default:function(){return{}}},getItem:{type:Function,default:function(){return{}}},getExtraSkill:{type:Function,default:function(){return{}}}}}},"874d":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-text-field",{attrs:{value:t.inputText,label:t.label,readonly:""}}),n("copy-button",{staticClass:"mb-0",attrs:{block:"",textToCopy:t.inputText,value:t.value}})],1)},r=[],a=n("6c03"),s={props:{inputText:{type:String,default:""},label:{type:String,default:""},value:{default:void 0}},components:{CopyButton:a["a"]}},o=s,u=n("2877"),l=Object(u["a"])(o,i,r,!1,null,null,null);e["a"]=l.exports},"8b06":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",t._g(t._b({staticClass:"squad-unit-entry"},"v-flex",t.$attrs,!1),t.$listeners),[t._t("before-content"),n("div",{staticStyle:{display:"flex"}},[n("v-layout",{staticClass:"mx-2",style:"flex-grow: 0!important; min-width: "+t.thumbnailSize+"px; max-width: "+t.thumbnailSize+"px;",attrs:{column:""}},[t.$vuetify.breakpoint.xsOnly?n("v-flex",{attrs:{"text-xs-center":""}},[n("span",{staticClass:"caption text-no-wrap"},[t._v(t._s(t.unit.position))])]):t._e(),n("v-layout",{staticStyle:{"flex-grow":"0"},attrs:{"align-content-center":"",row:""}},[n("unit-thumbnail",{staticClass:"unit-thumbnail",style:"border-color: "+t.orderSettings.border+";",attrs:{isVisible:t.isVisible,src:t.getImageUrls(t.unit.id).ills_battle,rarity:t.rarity,imageTitle:t.name,displayWidth:t.thumbnailSize,displayHeight:t.thumbnailSize}},[n("template",{slot:"after-image"},[n("text",{attrs:{x:0,y:.75*t.thumbnailSize}},[t._v("\n              "+t._s(isNaN(t.unit.bbOrder)?"-":t.unit.bbOrder)+"\n            ")])])],2)],1),t.orderSettings?n("v-flex",{staticClass:"text-xs-center"},[t.isVisible?n("v-chip",{staticClass:"bb-order-chip",style:"\n            background-color: "+t.orderSettings.background+";\n            color: "+t.orderSettings.foreground+";\n            border-color: "+t.orderSettings.border+";\n          ",attrs:{tabindex:"-1",small:""}},[n("b",[t._v(t._s(t.orderSettings.text))])]):n("span",{staticClass:"body-1",domProps:{textContent:t._s(t.orderSettings.text)}})],1):t._e()],1),n("v-layout",{staticStyle:{"align-self":"flex-start"},attrs:{column:""}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",{staticClass:"d-flex-container align-center font-weight-bold subheading"},[t.rarity<8?n("span",[t._v(t._s(t.rarity))]):t._e(),t.isVisible?n("rarity-icon",{class:{"ml-1":8!==t.rarity,"mr-1":!0},attrs:{rarity:t.rarity||0,displaySize:18}}):t._e(),n("span",[t._v(t._s(t.name))])],1),n("v-spacer"),t.isLead||t.isFriend?n("v-flex",{staticStyle:{"flex-grow":"0"}},[t.isLead?n("leader-icon",{attrs:{displaySize:18}}):t.isFriend?n("friend-icon",{attrs:{displaySize:18}}):t._e()],1):t._e()],1),n("v-layout",{attrs:{"align-center":""}},[n("v-layout",{staticStyle:{"flex-grow":"0"},attrs:{"align-center":"","justify-center":""}},[t.isVisible?n("extra-skill-icon",{staticClass:"mr-1",attrs:{inactive:!t.unit.es,displaySize:22}}):t._e()],1),n("v-flex",{staticStyle:{"word-break":"break-all","text-align":"left"}},[t._v("\n          "+t._s(t.getExtraSkill(t.unit.es).name||"No Extra Skill")+"\n        ")])],1),n("v-layout",{attrs:{row:"",wrap:"","align-center":""}},t._l(t.unit.spheres.length>0?t.unit.spheres:["No Sphere"],function(e,i){return n("v-layout",{key:e+"-"+i,attrs:{"align-center":""}},[n("v-layout",{staticStyle:{"flex-grow":"0"},attrs:{"align-center":"","justify-center":""}},[t.isVisible?n("sphere-type-icon",{staticClass:"mr-1",attrs:{category:t.getItem(e)["sphere type"],displaySize:22}}):t._e()],1),n("v-flex",{staticStyle:{"text-align":"left"}},[t._v("\n            "+t._s(t.getItem(e).name||e)+"\n          ")])],1)}),1),t.unit.sp&&t.isVisible&&t.getSpCost(t.unit)>0?n("v-layout",[n("v-flex",{staticClass:"mr-1",staticStyle:{"flex-grow":"0"}},[t._v("\n          "+t._s(t.getSpCost(t.unit))+" SP:\n        ")]),t._l(t.getSpCategories(t.unit),function(e){return n("v-flex",{key:e+"-"+t.unit.id+"-"+t.index,staticStyle:{"flex-grow":"0"}},[n("sp-icon",{attrs:{category:e,displaySize:22}})],1)})],2):t._e()],1)],1)],2)},r=[],a=n("34b9"),s=n("00e0"),o=n("2f62"),u=n("c0a4"),l=n.n(u),c=n("ac4c"),d=n("69c9"),f=n("aeb4"),p=n("4c70"),h=n("954e"),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("generic-sprite-icon",{style:t.inactive?t.inactiveStyle:t.$attrs.style,attrs:{iconTitle:"Extra Skill Icon",iconWidth:t.iconSize,iconHeight:t.iconSize,sheetWidth:t.sheetSize[0],sheetHeight:t.sheetSize[1],displayWidth:t.displaySize,displayHeight:t.displaySize,src:n("c567"),iconX:0,iconY:0}})},g=[],A=n("ef0e"),b={props:{inactive:{type:Boolean,default:!1},displaySize:{type:Number,default:32}},components:{GenericSpriteIcon:A["a"]},computed:{iconSize:function(){return 32},sheetSize:function(){return[32,32]},inactiveStyle:function(){return"filter: brightness(75%) grayscale(100%)"}}},m=b,y=n("2877"),S=Object(y["a"])(m,v,g,!1,null,null,null),x=S.exports,w=n("4427"),k=n("8398");function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){E(t,e,n[e])})}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C={mixins:[k["a"]],components:{UnitThumbnail:c["a"],RarityIcon:d["a"],SphereTypeIcon:f["a"],LeaderIcon:p["a"],FriendIcon:h["a"],ExtraSkillIcon:x,SpIcon:w["a"]},props:{unit:{type:Object,required:!0},isLead:{type:Boolean,default:!1},isFriend:{type:Boolean,default:!1},isVisible:{type:Boolean,default:!0},index:{type:Number,default:-1}},computed:O({},Object(o["c"])("units",{getImageUrls:"getImageUrls"}),{thumbnailSize:function(){return 64},iconSize:function(){return 22},orderSettings:function(){var t=!isNaN(this.unit.bbOrder);return O({text:t&&this.getOrderText(this.unit)||"-"},this.getColorSetBasedOnAction(t&&this.unit||void 0))},rarity:function(){return this.getUnit(this.unit.id).rarity},name:function(){return this.getUnit(this.unit.id).name||this.unit.id}}),methods:{getColorSetBasedOnAction:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.action===a["J"].UBB?"red":t.action===a["J"].SBB&&"amber")||t.action===a["J"].BB&&"blueGrey"||"grey";return{border:l.a[e].base,background:l.a[e].lighten4,foreground:l.a[e].darken4}},getOrderText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action||this.getUnit(t.id).sbb&&a["J"].SBB||this.getUnit(t.id).bb&&a["J"].BB||a["J"].ATK;return e.toUpperCase()},getSpCategories:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getUnit(t.id).feskills,n=t.sp;if(!e||!n)return[];var i=Object(s["v"])(n,e).map(function(t){return+t.category});return Array.from(new Set(i))},getSpCost:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getUnit(t.id).feskills,n=t.sp;return e&&n?n.split("").map(function(t){return e[Object(s["w"])(t)]}).filter(function(t){return t}).reduce(function(t,e){return t+ +e.skill.bp},0):0}}},q=C,_=(n("b13f"),Object(y["a"])(q,i,r,!1,null,null,null));e["a"]=_.exports},"8d77":function(t,e,n){},"952b":function(t,e,n){"use strict";var i=n("15bb"),r=n.n(i);r.a},"954e":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("generic-sprite-icon",{attrs:{iconTitle:t.label,iconWidth:t.sheetSize[0],iconHeight:t.sheetSize[1],sheetWidth:t.sheetSize[0],sheetHeight:t.sheetSize[1],displayWidth:t.displaySize,displayHeight:t.displaySize,src:t.iconSrc,iconX:0,iconY:0}})},r=[],a=n("ef0e"),s={props:{displaySize:{type:Number,default:52}},components:{GenericSpriteIcon:a["a"]},computed:{label:function(){return"Friend Unit"},iconSrc:function(){return n("6e7f")},sheetSize:function(){return[17,22]}}},o=s,u=n("2877"),l=Object(u["a"])(o,i,r,!1,null,null,null);e["a"]=l.exports},"97a2":function(t,e,n){"use strict";var i=n("6495"),r=n.n(i);r.a},"9dfa":function(t,e,n){},a004:function(t,e,n){},a598:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",[n("h1",{staticClass:"title"},[t._v("Delete Confirmation")])]),n("v-container",{attrs:{fluid:""}},[n("v-flex",[t._v("Are you sure you want to delete the following squad?")]),n("squad-list-card",{attrs:{squad:t.squad,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill}},[n("div",{attrs:{slot:"card-actions"},slot:"card-actions"})])],1),n("v-card-actions",{staticStyle:{"justify-content":"space-between"}},[n("v-btn",{attrs:{disabled:t.isDeleting,flat:"",color:"error"},on:{click:t.deleteSquad}},[n("v-icon",{attrs:{left:""}},[t._v("delete")]),t._v("\n      Delete\n    ")],1),n("v-btn",{attrs:{flat:""},on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n      Cancel\n    ")])],1)],1)},r=[],a=n("a34a"),s=n.n(a),o=n("bdea"),u=n("8398");function l(t,e,n,i,r,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(i,r)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(t){l(a,i,r,s,o,"next",t)}function o(t){l(a,i,r,s,o,"throw",t)}s(void 0)})}}var d={mixins:[u["a"]],props:{squad:{type:Object,required:!0},squadId:{type:Number,required:!0}},components:{SquadListCard:o["a"]},data:function(){return{isDeleting:!1}},methods:{deleteSquad:function(){var t=c(s.a.mark(function t(){var e;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isDeleting=!0,t.prev=1,t.next=4,this.$store.dispatch("squads/deleteSquad",{id:this.squadId});case 4:e=t.sent,this.$emit("delete",e);case 6:return t.prev=6,this.isDeleting,t.finish(6);case 9:case"end":return t.stop()}},t,this,[[1,,6,9]])}));return function(){return t.apply(this,arguments)}}()}},f=d,p=n("2877"),h=Object(p["a"])(f,i,r,!1,null,null,null);e["a"]=h.exports},a648:function(t,e,n){"use strict";var i=n("9dfa"),r=n.n(i);r.a},ad30:function(t,e,n){"use strict";var i=n("09c5"),r=n.n(i);r.a},b13f:function(t,e,n){"use strict";var i=n("08a6"),r=n.n(i);r.a},b404:function(t,e,n){"use strict";var i=n("2c86"),r=n.n(i);r.a},bbc5:function(t,e,n){},bd0f:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"buff-expandable-list-view"},[n("v-expansion-panel",{staticClass:"order-configuration-panel"},[n("v-expansion-panel-content",[n("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n        Configure Buff List View\n      ")]),n("section",[n("v-layout",{staticClass:"pl-2",attrs:{row:"","justify-center":"","align-center":""}},[n("v-flex",{attrs:{xs2:""}},[t._v("\n            View Mode\n          ")]),n("v-flex",{staticClass:"text-xs-center",attrs:{xs5:""}},[n("v-btn",{attrs:{flat:"",outline:t.viewMode===t.TARGET_VIEW_TYPE},on:{click:function(e){return t.emitNewViewMode(t.TARGET_VIEW_TYPE)}}},[t._v("\n              Target\n            ")])],1),n("v-flex",{staticClass:"text-xs-center",attrs:{xs5:""}},[n("v-btn",{attrs:{flat:"",outline:t.viewMode===t.OVERVIEW_VIEW_TYPE},on:{click:function(e){return t.emitNewViewMode(t.OVERVIEW_VIEW_TYPE)}}},[t._v("\n              Overview\n            ")])],1)],1),n("order-configurator",{directives:[{name:"show",rawName:"v-show",value:"target"===t.viewMode,expression:"viewMode === 'target'"}],attrs:{getEntryName:function(e){return t.possibleTables[e].name},fullValueSet:t.defaultBuffTables},model:{value:t.buffTables,callback:function(e){t.buffTables=e},expression:"buffTables"}}),n("section",{directives:[{name:"show",rawName:"v-show",value:"target"===t.viewMode,expression:"viewMode === 'target'"}]},[n("v-btn",{attrs:{flat:""},on:{click:function(e){t.buffTables=t.buffTables.concat(t.defaultBuffTables.filter(function(e,n){return!t.buffTables.includes(n)}))}}},[t._v("Show All")]),n("v-btn",{attrs:{flat:""},on:{click:function(e){t.buffTables=[]}}},[t._v("Hide All")]),n("v-btn",{attrs:{flat:""},on:{click:function(e){t.buffTables=t.defaultBuffTables.slice()}}},[t._v("Reset to Default")])],1)],1),t._t("view-config-extra")],2)],1),n("section",{staticClass:"buff-configuration-area my-2"},[n("proc-selector",{attrs:{showSelector:"procs"===t.activeSelector,filterHelper:t.filterHelper},on:{toggleview:function(e){return t.activeSelector=e?"procs":""}},model:{value:t.filterOptions,callback:function(e){t.filterOptions=e},expression:"filterOptions"}}),n("passive-selector",{attrs:{showSelector:"passives"===t.activeSelector,filterHelper:t.filterHelper},on:{toggleview:function(e){return t.activeSelector=e?"passives":""}},model:{value:t.filterOptions,callback:function(e){t.filterOptions=e},expression:"filterOptions"}}),n("div",{staticClass:"px-2",staticStyle:{"font-weight":"bold"}},[t._v("Buff Highlighting")]),t.hasPassives||t.hasProcs?[n("v-layout",{attrs:{row:"",wrap:""}},[t.hasProcs?n("v-flex",{staticStyle:{cursor:"pointer"},attrs:{xs12:"",md6:t.hasPassives},on:{click:function(e){t.activeSelector="procs"}}},[n("v-combobox",{staticClass:"mx-2",attrs:{value:t.filterOptions.procs,disabled:"",label:"Highlight Active Buffs",hint:"Empty selection is equivalent to showing all.",multiple:"","persistent-hint":""}})],1):t._e(),t.hasPassives?n("v-flex",{staticStyle:{cursor:"pointer"},attrs:{xs12:"",md6:t.hasProcs},on:{click:function(e){t.activeSelector="passives"}}},[n("v-combobox",{staticClass:"mx-2",attrs:{value:t.filterOptions.passives,disabled:"",label:"Highlight Passive Buffs",hint:"Empty selection is equivalent to showing all.",multiple:"","persistent-hint":""}})],1):t._e()],1),n("v-layout",{attrs:{row:"",wrap:""}},[t.hasProcs?n("v-flex",{attrs:{xs12:"",md6:t.hasPassives}},[n("v-alert",{staticClass:"mx-2",attrs:{value:!0,type:t.missingProcs.length>0?"warning":"info"}},[t.missingProcs.length>0?[n("p",[t._v("The following active buffs are missing from the current squad.")]),n("ul",t._l(t.missingProcs,function(e){return n("li",{key:e,domProps:{textContent:t._s(t.getEffectNameForIdAndType(e,"proc"))}})}),0)]:t.filterOptions.procs.length>0?n("span",[t._v("All specified active buffs are present.")]):n("span",[t._v("No filters for active buffs specified.")])],2)],1):t._e(),t.hasPassives?n("v-flex",{attrs:{xs12:"",md6:t.hasProcs}},[n("v-alert",{staticClass:"mx-2",attrs:{value:!0,type:t.missingPassives.length>0?"warning":"info"}},[t.missingPassives.length>0?[n("p",[t._v("The following passive buffs are missing from the current squad.")]),n("ul",t._l(t.missingPassives,function(e){return n("li",{key:e,domProps:{textContent:t._s(t.getEffectNameForIdAndType(e,"passive"))}})}),0)]:t.filterOptions.passives.length>0?n("span",[t._v("All specified passive buffs are present.")]):n("span",[t._v("No filters for passive buffs specified.")])],2)],1):t._e()],1)]:t._e()],2),n("dl",[t.viewMode===t.TARGET_VIEW_TYPE?[t._l(t.buffTables,function(e){return[n("dt",{key:t.possibleTables[e].targetType+"-"+t.possibleTables[e].effectType+"-title",class:t.buffListTitleClass,style:t.buffListTitleStyle,domProps:{textContent:t._s(t.possibleTables[e].name)}}),n("dd",{key:t.possibleTables[e].targetType+"-"+t.possibleTables[e].effectType+"-table"},[t._t("buffexpandablelist",[n("buff-expandable-list",{key:t.getEffectTypeKey(t.possibleTables[e].effectType),attrs:{sources:t.sources,effectType:t.possibleTables[e].effectType,inputEffectMappingBySource:t.effectMappingByTable.get(t.getTableKey(t.possibleTables[e].targetType,t.possibleTables[e].effectType)),highlightedBuffIds:t.getHighlightedBuffListForTable(t.possibleTables[e].effectType),getTextForSource:t.getTextForSource},scopedSlots:t._u([{key:"allentrypreview",fn:function(i){var r=i.entries,a=i.effectId;return[t._t("allentrypreview",t._l(r,function(e,i){return n("div",{key:i},[t._v("\n                    "+t._s(e)+"\n                  ")])}),{entries:r,effectId:a,effectType:t.possibleTables[e].effectType,targetType:t.possibleTables[e].targetType})]}},{key:"value-header",fn:function(e){var i=e.entry;return[t._t("value-header",[n("span",[t._v(t._s(i))])],{entry:i})]}}],null,!0)},[n("template",{slot:"noentries"},[t._t("noentries",[n("span",[t._v("No entries of type ["+t._s(t.possibleTables[e].effectType)+"] were found.")])],{effectType:t.possibleTables[e].effectType,targetType:t.possibleTables[e].targetType})],2)],2)],{sources:t.sources,targetType:t.possibleTables[e].targetType,effectType:t.possibleTables[e].effectType,inputEffectMappingBySource:t.effectMappingByTable.get(t.getTableKey(t.possibleTables[e].targetType,t.possibleTables[e].effectType)),highlightedBuffIds:t.getHighlightedBuffListForTable(t.possibleTables[e].effectType),getTextForSource:t.getTextForSource,listKey:t.getEffectTypeKey(t.possibleTables[e].effectType)})],2)]})]:t.viewMode===t.OVERVIEW_VIEW_TYPE?[t._l(t.overviewTables,function(e){return[n("dt",{key:e.mappingKey+"-"+e.effectType+"-title",class:t.buffListTitleClass,style:t.buffListTitleStyle,domProps:{textContent:t._s(e.name)}}),n("dd",{key:e.mappingKey+"-"+e.effectType+"-table"},[t._t("buffexpandablelist",[n("buff-expandable-list",{key:t.getEffectTypeKey(e.effectType),attrs:{sources:t.sources,effectType:e.effectType,inputEffectMappingBySource:t.effectMappingByTable.get(e.mappingKey),highlightedBuffIds:t.getHighlightedBuffListForTable(e.effectType),getTextForSource:t.getTextForSource},scopedSlots:t._u([{key:"allentrypreview",fn:function(i){var r=i.entries,a=i.effectId;return[t._t("allentrypreview",t._l(r,function(e,i){return n("div",{key:i},[t._v("\n                    "+t._s(e)+"\n                  ")])}),{entries:r,effectId:a,effectType:e.effectType,targetType:e.mappingKey})]}},{key:"value-header",fn:function(e){var i=e.entry;return[t._t("value-header",[n("span",[t._v(t._s(i))])],{entry:i})]}}],null,!0)},[n("template",{slot:"noentries"},[t._t("noentries",[n("span",[t._v("No entries of type ["+t._s(e.effectType)+"] were found.")])],{effectType:e.effectType,targetType:e.mappingKey})],2)],2)],{sources:t.sources,targetType:e.mappingKey,effectType:e.effectType,inputEffectMappingBySource:t.effectMappingByTable.get(e.mappingKey),highlightedBuffIds:t.getHighlightedBuffListForTable(e.effectType),getTextForSource:t.getTextForSource,listKey:t.getEffectTypeKey(e.effectType)})],2)]})]:[t._v("\n      Unknown view mode ["+t._s(t.viewMode)+"]\n    ")]],2)],1)},r=[],a=n("34b9"),s=n("abcf"),o=n("c7df"),u=n("100d"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"order-configurator"},[t._l(t.value,function(e,i){return n("li",{key:t.getValueOfEntry(e,i)},[n("v-btn",{attrs:{icon:"",flat:"",disabled:0===i},on:{click:function(e){return t.moveEntryUp(i)}}},[n("v-icon",[t._v("keyboard_arrow_up")])],1),n("v-btn",{attrs:{icon:"",flat:"",disabled:i===t.value.length-1},on:{click:function(e){return t.moveEntryDown(i)}}},[n("v-icon",[t._v("keyboard_arrow_down")])],1),n("span",{domProps:{textContent:t._s(t.getEntryName(e))}}),n("v-btn",{attrs:{icon:"",flat:""},on:{click:function(e){return t.hideEntry(i)}}},[n("v-icon",[t._v("fa fa-eye")])],1)],1)}),t._l(t.remainingValues,function(e,i){return n("li",{key:t.getValueOfEntry(e,i+t.value.length)},[n("v-btn",{attrs:{icon:"",flat:"",disabled:""}},[n("v-icon",[t._v("keyboard_arrow_up")])],1),n("v-btn",{attrs:{icon:"",flat:"",disabled:""}},[n("v-icon",[t._v("keyboard_arrow_down")])],1),n("span",{staticClass:"grey--text",domProps:{textContent:t._s(t.getEntryName(e))}}),n("v-btn",{attrs:{icon:"",flat:""},on:{click:function(e){return t.showEntry(i)}}},[n("v-icon",[t._v("fa fa-eye-slash")])],1)],1)})],2)},c=[],d={props:{value:{type:Array,default:function(){return[]}},getEntryName:{type:Function,default:function(t){return t&&t.name||t}},getEntryValue:{required:!1},fullValueSet:{required:!1}},computed:{remainingValues:function(){var t,e=this,n=Array.isArray(this.fullValueSet)?this.fullValueSet:this.value;return t=n!==this.value?this.fullValueSet.filter(function(t){return!e.value.includes(t)}):[],t}},methods:{getValueOfEntry:function(t,e){return"function"!==typeof this.getEntryValue?"".concat(this.getEntryName(t),"-").concat(e):this.getEntryValue(t,e)},emitValue:function(t){this.$emit("input",t)},moveEntryUp:function(t){var e=this.value.slice();if(t>0&&t<e.length){var n=e[t-1],i=e[t];e[t-1]=i,e[t]=n}this.emitValue(e)},moveEntryDown:function(t){var e=this.value.slice();if(t>-1&&t<e.length-1){var n=e[t+1],i=e[t];e[t+1]=i,e[t]=n}this.emitValue(e)},hideEntry:function(t){this.emitValue(this.value.filter(function(e,n){return n!==t}))},showEntry:function(t){var e=this.value.slice();t>-1&&t<this.remainingValues.length&&e.push(this.remainingValues[t]),this.emitValue(e)}}},f=d,p=(n("ca29"),n("2877")),h=Object(p["a"])(f,l,c,!1,null,null,null),v=h.exports,g=n("8857"),A=n("4303"),b=n("38fd1");function m(t){return m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}var y="target",S="overview",x=Object.freeze([y,S]),w={props:{sources:{type:Array,required:!0},getEffectsFromSource:{type:Function,default:function(){return[]}},getTextForSource:{type:Function,default:function(t,e,n){return n||t}},titleTopOffset:{type:Number,default:56},hasPassives:{type:Boolean,default:!0},hasProcs:{type:Boolean,default:!0},inputFilterOptions:{required:!1},viewMode:{type:String,default:x[0]},stickyTitles:{type:Boolean,default:!0}},components:{BuffExpandableList:b["a"],OrderConfigurator:v,ProcSelector:g["a"],PassiveSelector:A["a"]},computed:{TARGET_VIEW_TYPE:function(){return y},OVERVIEW_VIEW_TYPE:function(){return S},buffListTitleStyle:function(){return{top:"".concat(this.titleTopOffset,"px")}},buffListTitleClass:function(){return{title:!0,"is-sticky":this.stickyTitles}},possibleTables:function(){return Object.freeze([{name:"Party Passives",targetType:a["L"].PARTY,effectType:a["H"].PASSIVE},{name:"Party Buffs",targetType:a["L"].PARTY,effectType:a["H"].PROC},{name:"For the Enemy",targetType:a["L"].ENEMY,effectType:a["H"].PROC},{name:"Self Passives",targetType:a["L"].SELF,effectType:a["H"].PASSIVE},{name:"Self Buffs",targetType:a["L"].SELF,effectType:a["H"].PROC},{name:"Other Passives",targetType:a["L"].OTHER,effectType:a["H"].PASSIVE},{name:"Other Buffs",targetType:a["L"].OTHER,effectType:a["H"].PROC}])},overviewTables:function(){return Object.freeze([{name:"All Passive Buffs",effectType:a["H"].PASSIVE,mappingKey:"allPassivesMapping"},{name:"All Active Buffs",effectType:a["H"].PROC,mappingKey:"allProcsMapping"}])},defaultBuffTables:function(){return Object.freeze(this.possibleTables.map(function(t,e){return e}))},effectMappingByTable:function(){var t=new Set,e=new Set,n=new Map,i=this.sources,r=this.possibleTables,o=this.getEffectsFromSource,u=this.getTableKey,l=new WeakMap,c=new WeakMap;return r.forEach(function(r){var d=r.targetType,f=r.effectType,p=new WeakMap;i.forEach(function(n){var i=o(n,d,f),r=l.get(n)||[],u=c.get(n)||[];i.forEach(function(n){f===a["H"].PROC?(t.add(Object(s["getEffectId"])(n)),r.push(n)):f===a["H"].PASSIVE&&(e.add(Object(s["getEffectId"])(n)),u.push(n))}),p.set(n,i),l.set(n,r),c.set(n,u)}),n.set(u(d,f),p)}),n.set("allProcs",Array.from(t).sort(function(t,e){return+t-+e})),n.set("allPassives",Array.from(e).sort(function(t,e){return+t-+e})),n.set("allProcsMapping",l),n.set("allPassivesMapping",c),n},missingProcs:function(){var t=this.effectMappingByTable.get("allProcs"),e=this.filterOptions.procs;return e.filter(function(e){return!t.includes(e)})},missingPassives:function(){var t=this.effectMappingByTable.get("allPassives"),e=this.filterOptions.passives;return e.filter(function(e){return!t.includes(e)})},hasBuffFilters:function(){return this.hasProcs&&this.filterOptions.procs.length>0||this.hasPassives&&this.filterOptions.passives.length>0}},data:function(){return{buffTables:[],filterOptions:{procs:[],passives:[]},activeSelector:"",filterHelper:new u["a"]}},created:function(){this.buffTables=this.defaultBuffTables.slice(),"object"===m(this.inputFilterOptions)&&(this.filterOptions.procs=Array.isArray(this.inputFilterOptions.procs)?this.inputFilterOptions.procs.slice():[],this.filterOptions.passives=Array.isArray(this.inputFilterOptions.passives)?this.inputFilterOptions.passives.slice():[])},methods:{getTableKey:function(t,e){return"".concat(t,"-").concat(e)},getEffectTypeKey:function(t){var e="";return t===a["H"].PROC?e=this.filterOptions.procs.join("-"):t===a["H"].PASSIVE&&(e=this.filterOptions.passives.join("-")),e},getEffectNameForIdAndType:function(t,e){var n;return e===a["H"].PASSIVE?n=Object(o["a"])({"passive id":t}):e===a["H"].PROC&&(n=Object(o["a"])({"proc id":t})),n||(n="Unknown buff"),"".concat(n," [").concat(t,"]")},getHighlightedBuffListForTable:function(t){var e=[];return t===a["H"].PASSIVE&&this.hasPassives?e=this.filterOptions.passives:t===a["H"].PROC&&this.hasProcs&&(e=this.filterOptions.procs),e},emitNewViewMode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;this.$emit("viewmode",t)}},watch:{activeSelector:function(){var t=this.filterOptions,e=t.procs,n=void 0===e?[]:e,i=t.passives,r=void 0===i?[]:i;this.$emit("filteroptions",{procs:n,passives:r})},viewMode:{immediate:!0,handler:function(t){x.includes(t)||this.emitNewViewMode(x[0])}}}},k=w,O=(n("0f27"),Object(p["a"])(k,i,r,!1,null,null,null));e["a"]=O.exports},bdea:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"squad-list--entry-card"},[n("v-layout",{staticClass:"pa-2",attrs:{row:""}},[n("v-flex",[n("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.squad.name)+"\n      ")])]),n("v-spacer"),n("v-flex",{staticStyle:{"flex-grow":"0"}},[n("h2",{staticClass:"subheading"},[t._v("\n        "+t._s(t.squadCost)+" Cost\n      ")])])],1),n("v-layout",{staticClass:"px-2",attrs:{row:"",wrap:""}},[t.isLoadingInParent?n("loading-indicator",{attrs:{loadingMessage:"Loading squad data"}}):t._l(t.fullUnits,function(e,i){return n("unit-entry",{key:t.getUnitEntryKey(e,i),staticClass:"d-flex py-1",staticStyle:{"align-items":"center",border:"1px solid var(--background-color-alt)"},attrs:{xs12:"",sm6:"",index:i,isVisible:t.isVisible,unit:e,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,isLead:i===t.squad.lead,isFriend:i===t.squad.friend}})})],2),n("v-divider",{staticClass:"mt-2"}),t._t("card-actions",[n("v-card-actions",[t.to?n("v-btn",{attrs:{flat:"",disabled:t.isLoadingInParent||!t.isVisible,to:t.to}},[t._v("View")]):n("v-btn",{attrs:{flat:"",disabled:t.isLoadingInParent||!t.isVisible},on:{click:function(e){return t.$emit("view")}}},[t._v("View")]),n("v-btn",{attrs:{flat:"",disabled:t.isLoadingInParent||!t.isVisible},on:{click:function(e){return t.$emit("share")}}},[n("v-icon",{attrs:{left:""}},[t._v("share")]),t._v("\n        Share\n      ")],1),n("v-spacer"),n("v-btn",{attrs:{flat:"",disabled:t.isLoadingInParent||!t.isVisible},on:{click:function(e){return t.$emit("delete")}}},[n("v-icon",{attrs:{left:""}},[t._v("delete")]),t._v("\n        Delete\n      ")],1)],1)],{disabled:t.isLoadingInParent||!t.isVisible})],2)},r=[],a=n("34b9"),s=n("6a92"),o=n("8b06"),u=n("8398"),l=n("b758"),c={mixins:[u["a"]],components:{UnitEntry:o["a"],LoadingIndicator:l["a"]},props:{squad:{type:Object,required:!0},to:{type:String,default:""},isVisible:{type:Boolean,default:!0},isLoadingInParent:{type:Boolean,default:!1}},computed:{squadCost:function(){var t=this;return this.squad.units.map(function(e){var n=e.id;return t.getUnit(n)}).reduce(function(t,e){return t+ +(e.cost||0)},0)},fullUnits:function(){var t=this;return a["N"].map(function(e){var n=t.squad.units.find(function(t){return t.position===e});return n||(n=Object(s["d"])({isEmpty:!0,bbOrder:null,position:e})),n})}},methods:{getUnitEntryKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(JSON.stringify(t),"-").concat(e)}}},d=c,f=n("2877"),p=Object(f["a"])(d,i,r,!1,null,null,null);e["a"]=p.exports},be39:function(t,e,n){},be55:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",t._b({staticClass:"squad-card--editable"},"v-card",t.$attrs,!1),[n("v-layout",{staticClass:"px-2 pt-2",attrs:{row:"","align-center":""}},[n("v-flex",[n("v-text-field",{attrs:{label:"Squad Name"},model:{value:t.squad.name,callback:function(e){t.$set(t.squad,"name",e)},expression:"squad.name"}})],1),n("v-flex",{staticClass:"ml-2",staticStyle:{"flex-grow":"0"}},[n("h2",{staticClass:"subheading"},[t._v("\n        "+t._s(t.squadCost)+" Cost\n      ")])])],1),n("v-layout",{staticClass:"px-2",attrs:{row:"",wrap:""},on:{mouseleave:function(e){t.highlightedIndex=-1}}},[t.isLoadingInParent?n("loading-indicator",{attrs:{loadingMessage:"Loading squad data"}}):[t._l(t.fullUnits,function(e,i){return n("unit-entry",{key:t.getUnitEntryKey(e,i),staticClass:"d-flex py-1",style:"\n          align-items: center;\n          border: 1px solid "+(t.selectedIndex===i?"yellow":"var(--background-color-alt)")+";\n          position: relative;",attrs:{xs12:"",sm6:"",index:i,unit:e,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,isLead:i===t.squad.lead,isFriend:i===t.squad.friend},on:{mouseover:function(e){t.highlightedIndex=i},click:function(){t.selectedIndex=t.selectedIndex!==i?i:-1}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.highlightedIndex===i,expression:"highlightedIndex === i"}],style:"\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            z-index: 10;\n            cursor: pointer;\n          ",attrs:{slot:"before-content"},slot:"before-content"},[n("v-container",{staticStyle:{background:"rgba(0, 0, 0, 0.5)"},attrs:{fluid:"","justify-center":"","fill-height":""}},[n("v-flex",{attrs:{"align-center":""}},[n("v-btn",{staticStyle:{"pointer-events":"none"},attrs:{flat:"",block:""}},[n("v-icon",{attrs:{left:""}},[t._v("create")]),t._v("\n                Edit\n              ")],1)],1)],1)],1)])}),t.squad.units[t.selectedIndex]?n("v-flex",{staticClass:"py-1",attrs:{xs12:""}},[n("v-divider")],1):t._e(),n("v-layout",{attrs:{column:""}},[n("v-flex",[n("span",{domProps:{textContent:t._s(t.unitSelectionText)}})]),t.squad.units[t.selectedIndex]?n("unit-entry-editor",{staticClass:"py-2",attrs:{squad:t.squad,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,selectedIndex:t.selectedIndex},on:{newunits:function(e){t.selectedIndex=e.newIndex,t.$emit("newunits",e.units)},newsquad:function(e){t.selectedIndex=e.newIndex,t.$emit("newsquad",e.squad)}}}):t._e()],1)]],2),n("v-divider",{staticClass:"mt-2"}),t._t("card-actions",[n("v-card-actions",{staticStyle:{"justify-content":"space-between"},attrs:{disabled:t.isLoadingInParent}},[n("v-btn",{attrs:{flat:"",disabled:t.isLoadingInParent},on:{click:t.onSaveClick}},[n("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n        Save Squad\n      ")],1),n("v-btn",{attrs:{flat:"",disabled:t.isLoadingInParent,to:t.redirectOnCancel?"/tools/squads":void 0},on:{click:function(e){return t.$emit("cancel")}}},[n("span",[t._v("Cancel")])])],1)])],2)},r=[],a=n("a34a"),s=n.n(a),o=n("34b9"),u=n("6a92"),l=n("8b06"),c=n("8398"),d=n("b758"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{staticClass:"unit-entry-editor",attrs:{row:"",wrap:""}},[n("v-dialog",{attrs:{value:!!t.activeDialog,lazy:""},on:{input:function(e){t.activeDialog=""}}},["units"===t.activeDialog?n("unit-selector",{on:{input:function(e){return t.setUnit(e.data)},cancel:function(e){t.activeDialog=""}}}):"extraSkills"===t.activeDialog?n("es-selector",{on:{input:function(e){return t.setExtraSkill(e.id)},cancel:function(e){t.activeDialog=""}}}):"spheres"===t.activeDialog?n("sphere-selector",{on:{input:function(e){return t.onSelectSphere(e.id)},cancel:function(e){t.activeDialog=""}}}):t._e()],1),n("v-layout",{staticStyle:{width:"100%"},attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-subheader",[t._v("Unit")])],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("unit-card",{key:t.unitData.id,staticClass:"no-highlight ml-1",attrs:{entry:t.unitData}})],1),n("v-layout",{attrs:{row:"",wrap:"",grid:""}},[n("v-flex",{staticClass:"px-1",attrs:{xs12:""}},[n("v-btn",{attrs:{block:""},on:{click:function(e){t.activeDialog="units"}}},[t._v("\n          Select Unit\n        ")])],1),n("v-flex",{staticClass:"px-1",attrs:{sm6:""}},[n("v-btn",{attrs:{block:"",disabled:t.unitData.name===t.squadFillerMapping.EMPTY},on:{click:function(e){return t.setUnit(t.squadFillerMapping.EMPTY)}}},[t._v("\n          Set Empty\n        ")])],1),n("v-flex",{staticClass:"px-1",attrs:{sm6:""}},[n("v-btn",{attrs:{block:"",disabled:t.unitData.name===t.squadFillerMapping.ANY},on:{click:function(e){return t.setUnit(t.squadFillerMapping.ANY)}}},[t._v("\n          Set Any\n        ")])],1)],1)],1),n("v-flex",{attrs:{xs12:""}},[n("v-container",{staticClass:"pa-1",attrs:{fluid:"","grid-list-md":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-subheader",[t._v("Position")])],1),n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.unitPositionMapping,function(e){return n("v-flex",{key:e,attrs:{xs12:"",sm6:""}},[n("v-btn",{attrs:{block:"",color:e===t.activeUnit.position?"primary":void 0},on:{click:function(n){return t.setPosition(e)}}},[t._v("\n            "+t._s(e)+"\n          ")])],1)}),1)],1)],1),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-select",{staticClass:"px-1",attrs:{items:t.leadFriendPossibilities,value:t.leadFriendStatus,disabled:t.isEmptyUnit,label:"Leader or Friend?"},on:{input:t.setLeadFriendStatus}})],1),n("v-flex",{attrs:{xs6:"",sm4:""}},[n("v-layout",{attrs:{"align-items-center":""}},[n("v-flex",{staticClass:"d-flex-container items-center",staticStyle:{flex:"none"}},[n("v-subheader",{staticClass:"pl-1",staticStyle:{flex:"auto"}},[t._v("BB Order")])],1),n("v-flex",{staticClass:"d-flex-container items-center"},[n("v-select",{staticClass:"pr-1",attrs:{value:t.activeUnit.bbOrder,items:t.bbOrderPossibilities},on:{input:t.setBbOrder}})],1)],1)],1),n("v-flex",{attrs:{xs6:"",sm4:""}},[n("v-layout",{attrs:{"align-items-center":""}},[n("v-flex",{staticClass:"d-flex-container items-center",staticStyle:{flex:"none"}},[n("v-subheader",{staticClass:"pl-1",staticStyle:{flex:"auto"}},[t._v("Action")])],1),n("v-flex",{staticClass:"d-flex-container items-center"},[n("v-select",{staticClass:"pr-1",attrs:{disabled:t.isEmptyUnit,items:t.actionPossibilities,value:t.activeUnit.action},on:{input:t.setAction}})],1)],1)],1),n("v-layout",{staticStyle:{width:"100%","padding-bottom":"8px"},attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-subheader",[t._v("Extra Skill")])],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("extra-skill-card",{key:t.esData.id,staticClass:"no-highlight ml-1",attrs:{showAssociatedUnits:!1,entry:t.esData}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-layout",{attrs:{row:"",wrap:"","align-center":"","fill-height":""}},[n("v-flex",{staticClass:"px-1",attrs:{xs12:""}},[n("v-btn",{attrs:{block:"",disabled:t.isEmptyUnit},on:{click:function(e){t.activeDialog="extraSkills"}}},[t._v("\n            Select Extra Skill\n          ")])],1),n("v-flex",{staticClass:"px-1",attrs:{xs12:""}},[n("v-btn",{attrs:{block:"",disabled:0===t.esData.id},on:{click:function(e){return t.setExtraSkill("")}}},[t._v("\n            Clear Extra Skill\n          ")])],1)],1)],1)],1),n("v-layout",{attrs:{row:"",wrap:""}},[t.$vuetify.breakpoint.smAndUp?n("v-flex",{attrs:{xs12:""}},[n("v-subheader",[t._v("Spheres")])],1):t._e(),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-layout",{attrs:{column:""}},[t.$vuetify.breakpoint.xsOnly?n("v-flex",[n("v-subheader",[t._v("Sphere 1")])],1):t._e(),n("v-flex",[n("sphere-card",{key:(t.sphereData[0]||t.emptySphere).id,staticClass:"no-highlight ml-1",attrs:{entry:t.sphereData[0]||t.emptySphere}})],1),n("v-flex",{staticClass:"px-1"},[n("v-btn",{attrs:{block:"",disabled:t.isEmptyUnit},on:{click:function(){t.lastSelectedSphereIndex=0,t.activeDialog="spheres"}}},[t._v("\n            Select Sphere 1\n          ")])],1),n("v-flex",{staticClass:"px-1"},[n("v-btn",{attrs:{block:"",disabled:!t.sphereData[0]},on:{click:function(e){t.setSpheres(t.activeUnit.spheres.slice(1,2))}}},[t._v("\n            Clear Sphere 1\n          ")])],1)],1)],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-layout",{attrs:{column:""}},[t.$vuetify.breakpoint.xsOnly?n("v-flex",[n("v-subheader",[t._v("Sphere 2")])],1):t._e(),n("v-flex",[n("sphere-card",{key:(t.sphereData[1]||t.emptySphere).id,staticClass:"no-highlight ml-1",attrs:{entry:t.sphereData[1]||t.emptySphere}})],1),n("v-flex",{staticClass:"px-1"},[n("v-btn",{attrs:{block:"",disabled:t.isEmptyUnit},on:{click:function(){t.lastSelectedSphereIndex=1,t.activeDialog="spheres"}}},[t._v("\n            Select Sphere 2\n          ")])],1),n("v-flex",{staticClass:"px-1"},[n("v-btn",{attrs:{block:"",disabled:!t.sphereData[1]},on:{click:function(e){t.setSpheres(t.activeUnit.spheres.slice(0,1))}}},[t._v("\n            Clear Sphere 2\n          ")])],1)],1)],1)],1),!t.isEmptyUnit&&Array.isArray(t.unitData.feskills)?n("v-layout",{staticStyle:{width:"100%"},attrs:{column:""}},[n("v-flex",[n("v-subheader",[n("span",[t._v("SP Enhancements")]),t.activeUnit.sp?n("span",{staticClass:"pl-1"},[t._v("\n          ("+t._s(t.activeUnit.sp)+")\n        ")]):t._e()])],1),n("v-flex",[n("sp-build-table",{attrs:{value:t.activeUnit.sp,feSkills:t.unitData.feskills},on:{input:t.setEnhancements}})],1)],1):t._e()],1)},p=[],h=n("de7e"),v=n("0a43"),g=n("3e0d"),A=n("5044"),b=n("4db1"),m=n("0e03"),y=n("083f"),S=n("fca9"),x=n("00e0"),w=n("4764"),k=n("5ab2");function O(t,e){if(null==t)return{};var n,i,r=E(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function E(t,e){if(null==t)return{};var n,i,r={},a=Object.keys(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}function C(t,e,n,i,r,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(i,r)}function q(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(t){C(a,i,r,s,o,"next",t)}function o(t){C(a,i,r,s,o,"throw",t)}s(void 0)})}}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){T(t,e,n[e])})}return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P(t){return B(t)||j(t)||I()}function I(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function j(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function B(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}new S["a"]({prefix:"[UnitEntryEditor]"});var U={mixins:[c["a"]],components:{UnitCard:h["a"],ExtraSkillCard:v["a"],SphereCard:g["a"],SpBuildTable:A["a"],UnitSelector:b["a"],EsSelector:m["a"],SphereSelector:y["a"]},props:{squad:{type:Object,required:!0},selectedIndex:{type:Number,default:-1}},computed:{activeUnit:function(){return this.localSquad.units[this.selectedIndex]||{}},isEmptyUnit:function(){return this.unitData.name===o["I"].EMPTY},unitData:function(){var t=this.getUnit(this.activeUnit.id);return Object(x["u"])(t)?t:Object(x["k"])(this.activeUnit.id===o["I"].EMPTY)},esData:function(){var t=this.getExtraSkill(this.activeUnit.es);return Object(w["c"])(t)?t:Object(w["b"])()},sphereData:function(){var t=this;return this.activeUnit.spheres.map(function(e){var n=t.getItem(e);return Object(k["j"])(n)?n:t.emptySphere})},emptySphere:function(){return Object(k["c"])()},unitPositionMapping:function(){return o["N"]},squadFillerMapping:function(){return o["I"]},leadFriendPossibilities:function(){return["Leader","Friend","Neither"]},leadFriendStatus:function(){return[this.localSquad.lead===this.selectedIndex&&"Leader",this.localSquad.friend===this.selectedIndex&&"Friend","Neither"].find(function(t){return t})},bbOrderPossibilities:function(){return Object.freeze(new Array(6).fill(0).map(function(t,e){return e+1}))},actionPossibilities:function(){var t=this,e=[{text:"BB",value:o["J"].BB},{text:"SBB",value:o["J"].SBB},{text:"UBB",value:o["J"].UBB}].filter(function(e){var n=e.value;return t.activeUnit.id===o["I"].ANY||t.unitData[n]||t.activeUnit.action===n}),n=[{text:"None",value:o["J"].NONE},!this.isEmptyUnit&&{text:"Attack",value:o["J"].ATK}].filter(function(t){return t});return n.concat(e)}},data:function(){return{activeDialog:"",localSquad:{},lastSelectedSphereIndex:-1}},methods:{onSelectSphere:function(t){var e=this.activeUnit.spheres.slice();this.lastSelectedSphereIndex>-1&&!e.includes(t)&&!e.includes(+t)&&(e[this.lastSelectedSphereIndex]?e[this.lastSelectedSphereIndex]=t:e.length<2?e.push(t):e=[e[1],t],this.setSpheres(e)),this.activeDialog=""},emitUnits:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;this.$emit("newunits",{units:t,newIndex:isNaN(e)?this.selectedIndex:e}),this.activeDialog&&(this.activeDialog="")},emitSquad:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;this.$emit("newsquad",{squad:t,newIndex:isNaN(e)?this.selectedIndex:e}),this.activeDialog&&(this.activeDialog="")},updateCurrentUnit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.lastSelectedSphereIndex=-1,this.emitUnits(P(this.localSquad.units.slice(0,this.selectedIndex)).concat([_({},this.activeUnit,t)],P(this.localSquad.units.slice(this.selectedIndex+1))))},setPosition:function(t){var e=this,n=this.localSquad,i=n.units,r=n.lead,a=n.friend,s=i.find(function(e){return e.position===t});if(s&&s!==this.activeUnit){var l=i.filter(function(t,n){return n!==e.selectedIndex&&t!==s}),c=Object(u["j"])(P(l).concat([_({},s,{position:this.activeUnit.position}),_({},this.activeUnit,{position:t})]),!1),d=o["N"].indexOf(t);this.emitSquad(_({},this.localSquad,{lead:this.selectedIndex===r?d:r,friend:this.selectedIndex===a?d:a,units:c}),d)}},setLeadFriendStatus:function(t){var e=this.localSquad,n=e.lead,i=e.friend;"Leader"===t?(i===this.selectedIndex&&(this.localSquad.friend=n),this.localSquad.lead=this.selectedIndex):"Friend"===t?(n===this.selectedIndex&&(this.localSquad.lead=i),this.localSquad.friend=this.selectedIndex):n===this.selectedIndex?this.localSquad.lead=-1:i===this.selectedIndex&&(this.localSquad.friend=-1),this.emitSquad(this.localSquad)},setBbOrder:function(t){var e=this,n=this.localSquad.units.find(function(e){return e.bbOrder===t});if(n&&n!==this.activeUnit){var i=this.localSquad.units.filter(function(t,i){return i!==e.selectedIndex&&t!==n}),r=Object(u["j"])(P(i).concat([_({},n,{bbOrder:this.activeUnit.bbOrder}),_({},this.activeUnit,{bbOrder:t})]),!1);this.emitUnits(r)}},setAction:function(t){this.actionPossibilities.some(function(e){var n=e.value;return t===n})&&this.updateCurrentUnit({action:t})},setEnhancements:function(t){this.updateCurrentUnit({sp:t})},setUnit:function(){var t=q(s.a.mark(function t(e){var n,i,r,a,l,c,d,f=this;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(void 0===e.then){t.next=5;break}return t.next=3,e.then(function(t){n=t});case 3:t.next=6;break;case 5:n=this.getUnit(e);case 6:(Object(x["u"])(n)||e===o["I"].ANY||e===o["I"].EMPTY)&&(i=this.localSquad,r=i.lead,a=i.friend,l=i.name,c=Object(u["b"])({lead:r,friend:a,name:l,units:P(this.localSquad.units.slice(0,this.selectedIndex)).concat([_({},this.activeUnit,{id:void 0!==e.then&&n.id||e,sp:""})],P(this.localSquad.units.slice(this.selectedIndex+1)))},{getUnit:function(t){return+t===+n.id?n:f.getUnit(t)},getExtraSkill:this.getExtraSkill,getItem:this.getItem}),c.messages,d=O(c,["messages"]),this.emitSquad(d));case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),setExtraSkill:function(t){this.updateCurrentUnit({es:t})},setSpheres:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.map(function(t){return(t||"").toString()}).filter(function(t){return t});this.updateCurrentUnit({spheres:e})}},watch:{squad:{immediate:!0,deep:!0,handler:function(t){this.localSquad=Object(u["a"])(t)}}}},M=U,L=(n("a648"),n("2877")),D=Object(L["a"])(M,f,p,!1,null,"41d746de",null),N=D.exports;function F(t,e,n,i,r,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(i,r)}function V(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(t){F(a,i,r,s,o,"next",t)}function o(t){F(a,i,r,s,o,"throw",t)}s(void 0)})}}var R={mixins:[c["a"]],components:{UnitEntry:l["a"],LoadingIndicator:d["a"],UnitEntryEditor:N},props:{squad:{type:Object,required:!0},isLoadingInParent:{type:Boolean,default:!1},redirectOnCancel:{type:Boolean,default:!0},squadId:{type:String,default:""}},computed:{squadCost:function(){var t=this;return this.squad.units.map(function(e){var n=e.id;return t.getUnit(n)}).reduce(function(t,e){return t+ +(e.cost||0)},0)},fullUnits:function(){var t=this;return o["N"].map(function(e){var n=t.squad.units.find(function(t){return t.position===e});return n||(n=Object(u["d"])({isEmpty:!0,bbOrder:null,position:e})),n})},unitSelectionText:function(){return["Select a unit to edit its details.",this.squad.units[this.selectedIndex]&&"Select the same unit to deselect it."].filter(function(t){return t}).join(" ")}},data:function(){return{highlightedIndex:-1,selectedIndex:-1}},methods:{getUnitEntryKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(JSON.stringify(t),"-").concat(e)},onSaveClick:function(){var t=V(s.a.mark(function t(){var e;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("squads/storeSquad",{server:this.$store.state.settings.activeServer,squad:this.squad,id:this.squadId||void 0});case 2:e=t.sent,this.$emit("save",e);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},watch:{selectedIndex:function(){this.highlightedIndex=-1}}},z=R,H=(n("6cf1"),Object(L["a"])(z,i,r,!1,null,null,null));e["a"]=H.exports},be6b:function(t,e,n){},be8b:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"buff-table-grid",style:t.mainGridStyle},[t.showHeaders?[n("span",{staticClass:"id-cell header-cell"},[n("v-btn",{staticStyle:{"min-height":"40px"},attrs:{flat:"",small:""},on:{click:t.toggleAllEffectViews}},[n("v-icon",[t._v(t._s(t.hiddenIndices.length===t.mappedEffects.length?"fullscreen":"fullscreen_exit"))]),t._v("\n        ID\n      ")],1)],1),t._m(0)]:t._e(),t._l(t.mappedEffects,function(e,i){return[n("span",{key:e.id+"-"+i+"=id",staticClass:"id-cell"},[n("v-btn",{staticClass:"collapse-btn",attrs:{flat:"",small:""},on:{click:function(){return t.toggleEffectView(i)}}},[n("span",{staticStyle:{flex:"1 1 100%"}},[n("v-icon",[t._v(t._s(t.hiddenIndices.includes(i)?"keyboard_arrow_up":"keyboard_arrow_down"))])],1),n("span",{staticStyle:{flex:"1 1 100%"}},[t._t("default",[t._v("\n            "+t._s(e.id)+"\n          ")])],2),n("span",{staticStyle:{flex:"1 1 100%"}},[n("v-icon",[t._v(t._s(t.hiddenIndices.includes(i)?"keyboard_arrow_down":"keyboard_arrow_up"))])],1)])],1),n("span",{key:e.id+"-"+i+"-value-subgrid",staticClass:"value-subgrid"},[t.hiddenIndices.includes(i)?n("span",{staticClass:"property-cell",staticStyle:{"grid-column":"span 2"},domProps:{textContent:t._s(t.getEffectsHiddenText(t.getSortedProps(e.effect).length,e.effect))}}):[t._l(t.getSortedProps(e.effect),function(r,a){var s,o,u;return[n("span",{key:e.id+"-"+i+"-"+a+"-property",class:(s={"property-cell":!0},s[a%2===0?"even-row":"odd-row"]=!0,s["only-row"]=1===t.getSortedProps(e.effect).length,s)},[n("span",{domProps:{textContent:t._s(r)}})]),t.hasBuffTable&&t.isProcBuffList(r)?n("span",{key:e.id+"-"+i+"-"+a+"-table",class:(o={"value-cell has-table":!0},o[a%2===0?"even-row":"odd-row"]=!0,o["only-row"]=1===t.getSortedProps(e.effect).length,o)},[n("buff-table-grid",{attrs:{effects:e.effect[r]}})],1):n("span",{key:e.id+"-"+i+"-"+a+"-value",class:(u={"value-cell":!0},u[a%2===0?"even-row":"odd-row"]=!0,u["only-row"]=1===t.getSortedProps(e.effect).length,u),staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[t._v("\n            "+t._s(e.effect[r])+"\n            "),t.isEmptyArray(e.effect[r])?n("span",{staticStyle:{"padding-left":"4px"}},[t._v("\n              (None)\n            ")]):t._e()])]})]],2)]})],2)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"value-subgrid header-grid"},[n("span",{staticClass:"property-cell header-cell"},[t._v("\n        Buff Property\n      ")]),n("span",{staticClass:"value-cell header-cell"},[t._v("\n        Buff Value\n      ")])])}],a=n("abcf"),s=n("c7df"),o={props:{effects:{type:Array,default:function(){return[]}},showHeaders:{type:Boolean,default:!1},translateEffectNames:{type:Boolean,default:!0}},computed:{idKeys:function(){return["passive id","unknown passive id","proc id","unknown proc id"]},mappedEffects:function(){return this.effects.map(this.getEffectDetails)},hasBuffTable:function(){return this.mappedEffects.some(function(t){return"passive"===t.type&&66===+t.id})},gridRowConfig:function(){var t=this.mappedEffects.length;return[this.showHeaders?"minmax(40px, auto)":"","repeat(".concat(t,", auto)")].filter(function(t){return t}).join(" ")},mainGridStyle:function(){return{"grid-template-rows":this.gridRowConfig}}},data:function(){return{sortedPropsCache:new WeakMap,hiddenIndices:[]}},methods:{getEffectDetails:function(t){var e=this,n=Object(a["getEffectType"])(t),i=Object(a["getEffectId"])(t),r={},o=Object(s["c"])(t);return Object.keys(o).forEach(function(t){e.idKeys.includes(t)||(r[t]=o[t])}),this.translateEffectNames&&(r["translated name"]=Object(s["a"])(t)||"Unknown buff ".concat(i)),{type:n,id:i,effect:r}},getSortedProps:function(t){return this.sortedPropsCache.has(t)||this.sortedPropsCache.set(t,Object.freeze(Object.keys(t).sort(function(t,e){return"translated name"===t?-1:"translated name"===e?1:t<e?-1:1}))),this.sortedPropsCache.get(t)},toggleEffectView:function(t){this.hiddenIndices.includes(t)?this.hiddenIndices=this.hiddenIndices.filter(function(e){return e!==t}):this.hiddenIndices.push(t)},toggleAllEffectViews:function(){this.hiddenIndices.length===this.mappedEffects.length?this.hiddenIndices=[]:this.hiddenIndices=this.mappedEffects.map(function(t,e){return e})},isProcBuffList:function(t){return"triggered effect"===t},getValueSubgridStyle:function(t){var e=Object.keys(t);return{"grid-template-rows":"repeat(".concat(e,", minmax(36px, auto))")}},isEmptyArray:function(t){return Array.isArray(t)&&0===t.length},getEffectsHiddenText:function(t,e){var n=e["translated name"]||Object(s["a"])(e),i=(e["triggered effect"]||[]).map(s["a"]);return["".concat(t," ").concat(1!==t?"Effects":"Effect"," Hidden"),n&&"for ".concat(n),i.length>0&&"(".concat(i.join(", "),")")].filter(function(t){return t}).join(" ")}},name:"buff-table-grid"},u=o,l=(n("c6de"),n("2877")),c=Object(l["a"])(u,i,r,!1,null,null,null);e["a"]=c.exports},c31a:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAWCAMAAAARtodwAAAAA3NCSVQICAjb4U/gAAADAFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABdQwleRAliSAlnTAl0WQuWeA2afA6fgA6hgg6igw6jhA6niA6pig6qiw+tjQ+fikytjg+tjw+wkA+wkQ+ykhGzlBa0lRe1lxy3miO7ny20nk69oTO+ozbBp0C/qE7BqU/ErErJs1vKtFvLtV7NuWbPu23WxX/XyIbYyIjp4bzt5sft5snv6M3////////v5nCgAAAA/3RSTlMA/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3N8PqRcAAAAZUlEQVQY043PsQqAMAwE0F4MgqOLq///gRJsS85FxSjYZgoPclw0vUf7hOeK36vs8CnInlGjuGFfgrAKY05fQ//IwFPlEh3fnUWLgNRHjtsAL/Ml1QwQkLds7kwpidw5a7MhWl8ckMkhdzTgrLoAAAAASUVORK5CYII="},c567:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAADAFBMVEUAAAAAAAAPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8QEBARERESEhIiIiIkJCQsLCw3G2U1HlstLS03HGg4H104GnM5G3E6GXw6JVo9GYUyMjI9Goc0NDRFIIJDK2I5OTlDHJxEHJo8PDxHHKZNJoBGHKxHG65IHKtJHahLHqhIHLVMHrRHO1ZLHbpCQkJMHb5PH7dIPVZOHr1cJplVMHtbKJZFRUVZI61dKpFQH8VSIMJNPmBfKZxHR0dgLJVISEhRIMtMRFZNQ1hSIMxJSUlSIM9UIcpjKqFMR1FiJ7VOSVNWItFaI85YItVNTU5YItZTS1tPT09dJNZdJNlUS2BnKcVqK7tdQ3hgJNxWTmBfR3dZTmdVU1dnJ91yLcNxLMx2MMV5L9FeVGl9M8ZzYQR6L+WCN8aANNOAMtyFNtSCM+aEM+eINt6GPsiERbmMPNOOOd9mZmaNN+poZ2hqamqUPOttbW18XZtubm6QUcVzcnSIXa2MWreQV7t0dHSdSO11dXWGZ6V4eHiVWsV6enqHbp58fHyCgoKUdrCGhoaYc7eHh4edcMSTeqykatWIiIiKioqNjY2sbeSoctarcNyxa+yQkJCRkZGSkpK0b+6xcumueN22cPCwduSrftKWlpaufdi1du2Xl5eyfeG1eunAoQavgteZmZmpicW4ee+ampqzgd62gOW4fuq8gPG+gvKhoaG+g/K2jNq5ieGlpaW4l9S8mdurq6u9mdusrKy8nNitra3ElujAnd/HmO+xsbHDoOLEoeOzs7O0tLS1tbXIounLoe+5ubm6urq9vb2+vr7AwMDBwcHCwsLExMTHx8fKysrXwejNzc3Ozs7bwvDR0dHdyuzU1NTV1dXW1tb/30HX19fZ2dna2trc3Nzf39/h4eHi4uLq2/fk5OTl5eXm5ubp6env4/nq6urr6+vw5vnt7e3x6fju7u7z6/nw8PD/87n07vry8vLz8/P19fWNGpipAAAAj3RSTlMA/wIEBm1unZ6gsbLCyMnKz/Hy/f///////////////////////////////fz//v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////so7r1QAAALpSURBVDjLY2AgHjCx8goKi4gIC/KxMmGRZuYS9Zhz/c3fv2+uz/EQ5WJGl2cXq3v8/9+vb1++fPv17//jOjF2VHke2Zv/fp2t87IEAq/6c7/+3ZTlQZYX8Hr963xk7owDJw7v3biyJy3y/K/XjgIIed7Ibz/Whk7YfPDEhTMn9m1bPb0peO2PbzF8cPtV3/9YlTL5zs8/9y9cOHN817plM9viV/34oAp1B4v49R/7U6Y+/P7109uLFy+e3LF+6fyZ7dH7f1wXZwEr4Kr58TydEQG2rFk6F0jlPvtRwwUOH9F7XxamMj59+hsEGJ/+ZlyygPH3U8akhV/uiYJCjM3xy8v0DqDEBhBg3PB0AyOYqEx/+cWRDeSFKZ/PuvWBFEBsABoBMoCxwu3U5ym8QAWC578ssm8BK9i5a89yoO7fv4EGVBXaL/xyThCoQPju54nOFTATuroYN/wGMquLMj0nfr4nDFQg8uhzr3s2UMFTIGBsaAAaATSgPCczqPPzIxGQgrsf+x0yYSbU1jICXfubsTgn0673412QAuHL72frJ4IVlJaWlQEZ+flAR2Yl6s/+cAlkheCmV4c0Q2AmFDCCaKARCSGah16vBTmSr/HFYx8nqBuegn0I9quTz6MX9SBvsmnd/tKswbgBAhiBDszIADqUUaP5y20tNnBQb3p12QYpLpKjwsKBlM3lV5tEwSmPy//K593yJta2LmEBYUAQEOZia20iv/vzFX8uSHSLTbr1rE7a2MzMxcUvIMDPxcXMzFiu7vGtSWKQ6GbgkNz64G69jI6BnqmVKRDpGejI1N99sFWSE5ak+NS33n2y21xJW8/A0NBAT1vJfPfju1vV+ZASrerCq9+utfoqK6qoKSj7tl79dnWhqgBysuaTaFx77cvjY4unTVl05NGXa2sbJfhQMwanqG73rN03nr979/zG7lnduqKcGFmPW1Qqpr5/0qT++hgpUW5mbLmTlV8IlHmF+FmZScjzAMUkXkPay/MUAAAAAElFTkSuQmCC"},c6de:function(t,e,n){"use strict";var i=n("be39"),r=n.n(i);r.a},c7e9:function(t,e,n){},ca29:function(t,e,n){"use strict";var i=n("7ac9"),r=n.n(i);r.a},d0b2:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("module-checker",{attrs:{requiredModules:t.requiredModules}},[n("promise-wait",{attrs:{promise:t.initialLoadPromise}},[n("v-container",{directives:[{name:"resize",rawName:"v-resize",value:t.onPageReady,expression:"onPageReady"}],staticClass:"squad-page",attrs:{fluid:""}},[n("v-container",{staticClass:"pa-0"},[n("v-layout",{attrs:{"justify-center":""}},[t.editMode?n("v-flex",{attrs:{xs12:""}},[n("squad-list-card-editable",{attrs:{squad:t.tempSquad,squadId:t.id,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,redirectOnCancel:!1,isLoadingInParent:t.isLoadingSquadData},on:{newsquad:function(e){return t.tempSquad=e},newunits:t.onNewUnits,save:function(){t.squad=t.tempSquad,t.editMode=!1},cancel:function(e){t.editMode=!1}}})],1):n("v-flex",{attrs:{xs12:""}},[n("squad-list-card",{key:t.squadCode,attrs:{squad:t.squad,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,isLoadingInParent:t.isLoadingSquadData},scopedSlots:t._u([{key:"card-actions",fn:function(e){var i=e.disabled;return n("v-card-actions",{},[n("v-btn",{attrs:{flat:"",icon:t.minimizeSquadActionButtons,disabled:i},on:{click:function(e){t.editMode=!0}}},[n("v-icon",{attrs:{left:!t.minimizeSquadActionButtons}},[t._v("edit")]),t.minimizeSquadActionButtons?t._e():n("span",[t._v("\n                    Edit\n                  ")])],1),n("v-btn",{attrs:{flat:"",icon:t.minimizeSquadActionButtons,disabled:i},on:{click:function(e){t.activeSquadDialog="share"}}},[n("v-icon",{attrs:{left:!t.minimizeSquadActionButtons}},[t._v("share")]),t.minimizeSquadActionButtons?t._e():n("span",[t._v("\n                    Share\n                  ")])],1),t.squadCode?n("v-btn",{attrs:{flat:"",icon:t.minimizeSquadActionButtons,disabled:i,to:t.getSquadUrl(t.squadCode)}},[n("v-icon",{attrs:{left:!t.minimizeSquadActionButtons}},[t._v("file_copy")]),t.minimizeSquadActionButtons?t._e():n("span",[t._v("\n                    Clone\n                  ")])],1):t._e(),n("v-spacer"),n("v-btn",{attrs:{flat:"",icon:t.minimizeSquadActionButtons,disabled:i},on:{click:function(e){t.activeSquadDialog="delete"}}},[n("v-icon",{attrs:{left:!t.minimizeSquadActionButtons}},[t._v("delete")]),t.minimizeSquadActionButtons?t._e():n("span",[t._v("\n                    Delete\n                  ")])],1)],1)}}],null,!1,962298881)})],1)],1)],1),n("v-flex",{attrs:{xs12:""}},[n("v-divider",{staticClass:"mt-2"})],1),n("v-flex",{attrs:{xs12:""}},[n("v-card",[t.isLoadingSquadData||t.editMode?t._e():n("tab-container",{staticClass:"mt-2 mx-0",attrs:{centeredTabs:!0,growTabs:!0,tabs:t.tabConfig},model:{value:t.currentTabIndex,callback:function(e){t.currentTabIndex=e},expression:"currentTabIndex"}},[n("v-layout",{attrs:{slot:"multidex-links",column:""},slot:"multidex-links"},[n("multidex-links",{attrs:{getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,squad:t.squad}})],1),n("v-layout",{staticClass:"buff-lists",attrs:{slot:"buffs",column:""},slot:"buffs"},[n("squad-buff-expandable-list-view",{attrs:{getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,squad:t.squad,topNavbarHeight:t.topNavbarHeight}})],1),n("v-layout",{attrs:{slot:"spark-statistics"},slot:"spark-statistics"},[n("squad-spark-statistics-area",{attrs:{getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,squad:t.squad,initialSimulatorOptions:t.simulatorOptions},on:{simoptions:function(e){return t.simulatorOptions=e},share:function(e){t.sparkResultToShare=e,t.activeSquadDialog="share"},apply:t.applySparkResult,currentsquadresult:function(e){return t.sparkResultToShare=e}}})],1),n("v-layout",{staticStyle:{"overflow-x":"auto"},attrs:{slot:"arena"},slot:"arena"},[n("squad-arena-suggestion-table",{attrs:{getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,squad:t.squad}})],1)],1)],1)],1),n("v-dialog",{attrs:{value:!t.isLoadingSquadData&&!!t.activeSquadDialog,lazy:""},on:{input:function(e){return t.activeSquadDialog=e?t.activeSquadDialog:""}}},[t.squadCode?["share"===t.activeSquadDialog?n("share-squad-card",{attrs:{squad:t.squad,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,sparkResult:t.sparkResultToShare},on:{back:function(e){t.activeSquadDialog=""}}}):"delete"===t.activeSquadDialog?n("delete-squad-card",{attrs:{squad:t.squad,squadId:+t.id,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill},on:{delete:function(e){return t.$router.push("/tools/squads")},cancel:function(e){t.activeSquadDialog=""}}}):t._e()]:n("v-card",[n("v-card-text",[t._v("\n            No squad selected\n          ")]),n("v-card-actions",{staticStyle:{"justify-content":"flex-end"}},[n("v-btn",{attrs:{flat:""},on:{click:function(e){t.activeSquadDialog=""}}},[t._v("\n              Back\n            ")])],1)],1)],2)],1)],1)],1)},r=[],a=n("a34a"),s=n.n(a),o=n("2f62"),u=n("f022"),l=n("fca9"),c=n("6a92"),d=n("34b9"),f=n("88fe"),p=n("b758"),h=n("4a49"),v=n("bdea"),g=n("1b56"),A=n("a598"),b=n("e5b6"),m=n("be55"),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("buff-expandable-list-view",{attrs:{sources:t.squad.units,getEffectsFromSource:t.getEffectsForSquadUnit,titleTopOffset:t.topNavbarHeight,inputFilterOptions:t.filterOptions,getTextForSource:t.getTextForSourceInSquadUnit,viewMode:t.viewMode},on:{filteroptions:function(e){return t.filterOptions=e},viewmode:function(e){return t.viewMode=e}},scopedSlots:t._u([{key:"buffexpandablelist",fn:function(e){e.sources;var i=e.targetType,r=e.effectType,a=e.inputEffectMappingBySource,s=e.highlightedBuffIds,o=e.listKey;return[n("squad-buff-expandable-list",{key:o,attrs:{squad:t.squad,targetType:i,effectType:r,inputEffectMappingByUnitEntry:a,highlightedProcs:t.squadBuffTypes.PROC===r&&s||[],highlightedPassives:t.squadBuffTypes.PASSIVE===r&&s||[],getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill}})]}}])})},S=[],x=n("abcf"),w=n("bd0f"),k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("buff-expandable-list",{staticClass:"squad-buff-expandable-list",attrs:{sources:t.unitEntries,getEffectsFromSource:t.getEffectsForSquadUnit,highlightedBuffIds:t.highlightedBuffIds,effectType:t.effectType,getTextForSource:t.getTextForSourceInSquadUnit},scopedSlots:t._u([{key:"allentrypreview",fn:function(e){var i=e.entries;return n("div",{staticClass:"expandable-list-entry--columns-preview"},t._l(i,function(e){return n("div",{key:e.source.id+"-"+e.source.position,staticClass:"expandable-list-entry--columns-preview-entry"},[n("v-layout",{attrs:{"align-content-center":"",row:""}},[n("unit-thumbnail",{staticClass:"unit-thumbnail",attrs:{src:t.getImageUrls(e.source.id).ills_battle,rarity:t.getUnit(e.source.id).rarity,imageTitle:t.getUnit(e.source.id).name,displayWidth:t.thumbnailSize,displayHeight:t.thumbnailSize}},[n("template",{slot:"after-image"},[n("text",{attrs:{x:0,y:t.thumbnailSize}},[t._v("\n              "+t._s(isNaN(e.source.bbOrder)?"-":e.source.bbOrder)+"\n            ")])])],2)],1),n("v-flex",{attrs:{"text-xs-center":""}},[n("span",{staticClass:"caption text-no-wrap"},[t._v(t._s(e.source.position))])])],1)}),0)}},{key:"value-header",fn:function(e){var i=e.entry;return n("v-layout",{staticStyle:{"max-width":"500px",width:"100%","min-width":"300px"},attrs:{row:""}},[n("unit-entry",{staticClass:"d-flex py-1",staticStyle:{"align-items":"center",border:"1px solid var(--background-color-alt)"},attrs:{xs12:"",index:t.squad.units.indexOf(i),unit:i,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,isLead:t.squad.units.indexOf(i)===t.squad.lead,isFriend:t.squad.units.indexOf(i)===t.squad.friend}})],1)}}])},[n("span",{attrs:{slot:"noentries"},slot:"noentries"},[t._v("\n    No entries of type ["+t._s(t.effectType)+"] targeting ["+t._s(t.targetType)+"] were found.\n  ")])])},O=[],E=n("8b06"),C=n("ac4c"),q=n("38fd1"),_=n("8398");function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){P(t,e,n[e])})}return t}function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I={mixins:[_["a"]],props:{squad:{type:Object,required:!0},targetType:{type:String,required:!0},effectType:{type:String,required:!0},inputEffectMappingByUnitEntry:{type:WeakMap,default:function(){return new WeakMap}},highlightedProcs:{type:Array,default:function(){return[]}},highlightedPassives:{type:Array,default:function(){return[]}}},components:{UnitThumbnail:C["a"],UnitEntry:E["a"],BuffExpandableList:q["a"]},computed:T({blacklistedKeys:function(){return["passive id","unknown passive id","proc id","unknown proc id","add to bb","add to sbb","add to ubb","trigger on bb","trigger on sbb","trigger on ubb"]}},Object(o["c"])("units",{getImageUrls:"getImageUrls"}),{thumbnailSize:function(){return 48},unitEntries:function(){return this.squad.units},effectMappingByUnitEntry:function(){var t=this,e=new WeakMap;return this.unitEntries.forEach(function(n){var i=t.inputEffectMappingByUnitEntry.get(n);Array.isArray(i)||(i=Object(c["e"])({unitEntry:n,target:t.targetType,effectType:t.effectType,squad:t.squad},t)),e.set(n,i)}),e},highlightedBuffIds:function(){var t=[];return this.effectType===d["H"].PASSIVE?t=this.highlightedPassives:this.effectType===d["H"].PROC&&(t=this.highlightedProcs),t}}),methods:{getEffectsForSquadUnit:function(t){var e=this.effectMappingByUnitEntry.get(t);return Array.isArray(e)?e:[]},getTextForSourceInSquadUnit:function(t,e){var n=d["f"][t];if(!n)if("es"===t)n="Elgif: ".concat(this.getExtraSkill(e.es).name||e.es||t);else if(t.startsWith("sphere:")){var i=t.split(":")[1];n="Sphere: ".concat(this.getItem(i).name||i||t)}return n||t}}},j=I,B=(n("952b"),n("2877")),U=Object(B["a"])(j,k,O,!1,null,null,null),M=U.exports,L={mixins:[_["a"]],props:{squad:{type:Object,required:!0},topNavbarHeight:{type:Number,default:56}},components:{SquadBuffExpandableList:M,BuffExpandableListView:w["a"]},computed:{squadBuffTypes:function(){return d["H"]},possibleTables:function(){return Object.freeze([{name:"Party Passives",targetType:d["L"].PARTY,effectType:d["H"].PASSIVE},{name:"Party Buffs",targetType:d["L"].PARTY,effectType:d["H"].PROC},{name:"For the Enemy",targetType:d["L"].ENEMY,effectType:d["H"].PROC},{name:"Self Passives",targetType:d["L"].SELF,effectType:d["H"].PASSIVE},{name:"Self Buffs",targetType:d["L"].SELF,effectType:d["H"].PROC},{name:"Other Passives",targetType:d["L"].OTHER,effectType:d["H"].PASSIVE},{name:"Other Buffs",targetType:d["L"].OTHER,effectType:d["H"].PROC}])},effectMappingByTable:function(){var t=this,e=new Set,n=new Set,i=new Map,r=this.squad,a=r.units;return this.possibleTables.forEach(function(s){var o=s.targetType,u=s.effectType,l=new WeakMap;a.forEach(function(i){var a=Object(c["e"])({unitEntry:i,target:o,effectType:u,squad:r},t);a.forEach(function(t){u===d["H"].PROC?e.add(Object(x["getEffectId"])(t)):u===d["H"].PASSIVE&&n.add(Object(x["getEffectId"])(t))}),l.set(i,a)}),i.set(t.getTableKey(o,u),l)}),i.set("allProcs",Array.from(e).sort(function(t,e){return+t-+e})),i.set("allPassives",Array.from(n).sort(function(t,e){return+t-+e})),i}},data:function(){return{filterOptions:{procs:[],passives:[]},viewMode:""}},created:function(){this.squad.filterOptions&&(this.filterOptions.procs=Array.isArray(this.squad.filterOptions.procs)?this.squad.filterOptions.procs.slice():[],this.filterOptions.passives=Array.isArray(this.squad.filterOptions.passives)?this.squad.filterOptions.passives.slice():[]),this.squad.viewMode&&(this.viewMode=this.squad.viewMode)},methods:{getTableKey:function(t,e){return"".concat(t,"-").concat(e)},getEffectsForSquadUnit:function(t,e,n){var i=this.effectMappingByTable.get(this.getTableKey(e,n)),r=i.get(t);return Array.isArray(r)?r:[]},getTextForSourceInSquadUnit:function(t,e){var n=d["f"][t];if(!n)if("es"===t)n="Elgif: ".concat(this.getExtraSkill(e.es).name||e.es||t);else if(t.startsWith("sphere:")){var i=t.split(":")[1];n="Sphere: ".concat(this.getItem(i).name||i||t)}return n||t}},watch:{filterOptions:function(t){this.squad.filterOptions=t},viewMode:function(t){this.squad.viewMode=t}}},D=L,N=(n("5a88"),Object(B["a"])(D,y,S,!1,null,null,null)),F=N.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"squad-arena-suggestion-table"},[n("span",{staticStyle:{"text-transform":"capitalize","font-weight":"bold","text-align":"center","grid-column":"span 2"},domProps:{innerHTML:t._s("<u>Applicable Colosseum Classes:</u> "+t.usableColoClasses.join(", "))}}),t._l(t.fullUnits,function(e,i){return[n("div",{key:t.squadKey+"-"+e.position+"-suggestion",staticClass:"suggestion-text"},[i!==t.squad.friend?[n("div",{staticStyle:{"text-transform":"capitalize","font-weight":"bold","text-align":"center"},domProps:{innerHTML:t._s("<u>Suggestion:</u> "+t.suggestionsBySquadEntry.get(e).join(" or "))}}),t._l(t.arenaTextDataBySquadEntry.get(e),function(i,r){return n("div",{key:t.squadKey+"-"+e.position+"-"+r+"-arena-text",domProps:{textContent:t._s(i)}})})]:n("span",[t._v("\n        Friend units are not allowed in Arena\n      ")])],2),n("unit-entry",{key:t.squadKey+"-"+e.position+"-entry",staticClass:"d-flex py-1",staticStyle:{"align-items":"center",border:"1px solid var(--background-color-alt)"},attrs:{index:i,unit:e,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,isLead:i===t.squad.lead,isFriend:i===t.squad.friend}})]})],2)},R=[],z=n("00e0"),H={mixins:[_["a"]],props:{squad:{type:Object,required:!0}},components:{UnitEntry:E["a"]},computed:{fullUnits:function(){var t=this;return d["N"].map(function(e){var n=t.squad.units.find(function(t){return t.position===e});return n||(n=Object(c["d"])({isEmpty:!0,bbOrder:null,position:e})),n})},suggestionsBySquadEntry:function(){var t=this,e=new WeakMap;return this.fullUnits.forEach(function(n){var i=t.getUnit(n.id)||{};e.set(n,t.getSuggestionsForUnit(i))}),e},arenaTextDataBySquadEntry:function(){var t=this,e=new WeakMap;return this.fullUnits.forEach(function(n){var i=t.getUnit(n.id)||{},r=Array.isArray(i.ai)?i.ai:[];r.length>0?e.set(n,r.map(t.generateArenaText)):e.set(n,["No Arena AI data found"])}),e},usableColoClasses:function(){var t=this,e=new Map,n=this.$store.state.settings.activeServer,i=this.fullUnits.filter(function(e,n){return n!==t.squad.friend&&e.id!==d["I"].EMPTY&&e.id!==d["I"].ANY});i.forEach(function(i){var r=t.getUnit(i.id)||{},a=isNaN(r.cost)?[]:Object(z["f"])(+r.cost,"gl"===n);e.set(i,a)});var r=new Set;return i.forEach(function(t){var n=e.get(t),a=i.filter(function(e){return e!==t});n.forEach(function(t){!r.has(t)&&a.every(function(n){return e.get(n).includes(t)})&&r.add(t)})}),Object.freeze(Array.from(r))},squadKey:function(){return Object(c["k"])(this.squad)}},methods:{getSuggestionsForUnit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.freeze(Object(z["e"])(t).map(z["a"]))},generateArenaText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(z["b"])(t)}}},W=H,$=(n("2b3e0"),Object(B["a"])(W,V,R,!1,null,null,null)),Y=$.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spark-statistics-container"},[n("v-expansion-panel",{model:{value:t.currentSection,callback:function(e){t.currentSection=e},expression:"currentSection"}},[n("v-expansion-panel-content",[n("span",{staticClass:"subheading",attrs:{slot:"header"},slot:"header"},[t._v("Current Squad Statistics")]),n("section",[t.resultForCurrentSquad?n("spark-squad-card",{attrs:{squad:t.squad,sparkResult:t.resultForCurrentSquad,getUnit:t.getUnit,simulatorOptions:t.simulatorOptions},on:{share:function(){return t.emitShareEvent(t.resultForCurrentSquad)}}}):n("span",[n("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n            There was a problem generating the spark results for the current squad configuration. ("+t._s(t.errorForCurrentSquad&&t.errorForCurrentSquad.message||t.errorForCurrentSquad||"Unknown error")+")\n          ")])],1)],1)]),n("v-expansion-panel-content",[n("span",{staticClass:"subheading",attrs:{slot:"header"},slot:"header"},[t._v("Spark Simulator Input")]),n("section",[n("spark-squad-card-editable",{attrs:{squad:t.squad,getUnit:t.getUnit},model:{value:t.simulatorOptions,callback:function(e){t.simulatorOptions=e},expression:"simulatorOptions"}})],1),n("section",[n("overall-simulator-options",{attrs:{squad:t.squad},model:{value:t.simulatorOptions,callback:function(e){t.simulatorOptions=e},expression:"simulatorOptions"}})],1),n("section",[n("v-alert",{attrs:{value:!0,icon:0===t.simulatorWarnings.length?"info":"priority_high",color:0===t.simulatorWarnings.length?"info":"warning"}},[t.simulatorWarnings.length>0?[n("span",[t._v("Warnings that may affect the accuracy of results:")]),n("ul",t._l(t.simulatorWarnings,function(e){return n("li",{key:e,domProps:{textContent:t._s(e)}})}),0)]:n("span",[t._v("No squad level warnings found. Make sure to check individual units for warnings.")])],2)],1),n("section",[n("v-btn",{attrs:{block:""},on:{click:t.runSimulator}},[t._v("Run Simulator")])],1)]),n("v-expansion-panel-content",{directives:[{name:"show",rawName:"v-show",value:!t.runningSimulator&&(t.results||t.errorForCalculations),expression:"!runningSimulator && (results || errorForCalculations)"}]},[n("span",{staticClass:"subheading",attrs:{slot:"header"},slot:"header"},[t._v("Simulator Results")]),n("div",[n("section",{staticClass:"mx-2"},[n("v-alert",{attrs:{color:"info",value:!0}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",[t._v("\n                Time Elapsed: "+t._s(t.simulationElapsedText)+"\n              ")]),n("v-flex",[t._v("\n                Total Combinations Tested: "+t._s(t.lastTestedCount)+"\n              ")]),n("v-flex",[t._v("\n                Combinations Tested/Second: "+t._s(t.combosTestedPerSecond)+"\n              ")])],1)],1)],1),Array.isArray(t.results)&&t.results.length>0?n("section",[n("section",{staticClass:"result-navigator"},[n("v-btn",{attrs:{flat:"",icon:t.$vuetify.breakpoint.xsOnly,disabled:t.currentResultIndex<=0},on:{click:function(e){t.currentResultIndex=Math.max(t.currentResultIndex-1,0)}}},[n("v-icon",[t._v("chevron_left")])],1),n("v-select",{staticClass:"mx-2",attrs:{items:t.resultSelectValues,"item-text":"label","item-value":"value"},model:{value:t.currentResultIndex,callback:function(e){t.currentResultIndex=e},expression:"currentResultIndex"}}),n("v-btn",{attrs:{flat:"",icon:t.$vuetify.breakpoint.xsOnly,disabled:t.currentResultIndex+1>=t.results.length},on:{click:function(e){t.currentResultIndex=Math.min(t.currentResultIndex+1,t.results.length-1)}}},[n("v-icon",[t._v("chevron_right")])],1)],1),n("section",[n("spark-squad-card",{key:t.getResultName(t.results[t.currentResultIndex],t.currentResultIndex),attrs:{squad:t.squad,sparkResult:t.results[t.currentResultIndex],getUnit:t.getUnit,simulatorOptions:t.simulatorOptions}},[n("v-card-actions",{attrs:{slot:"card-actions"},slot:"card-actions"},[n("v-btn",{attrs:{outline:""},on:{click:function(){return t.applySparkResult(t.results[t.currentResultIndex])}}},[n("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                Apply\n              ")],1)],1)],1)],1)]):t.errorForCalculations?n("section",[n("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n            There was a problem generating the spark results for the current squad configuration. ("+t._s(t.errorForCalculations.message||t.errorForCalculations)+")\n          ")])],1):n("section",[t._v("\n          No results found for given configuration.\n        ")])])])],1),n("v-dialog",{attrs:{value:t.showProgressDialog,"max-width":"500px",persistent:""}},[n("v-card",[n("v-card-text",[n("v-progress-linear",{attrs:{value:t.progressPercent,indeterminate:0===t.progressPercent,query:""}}),n("div",[t._v(t._s(t.progressLabel))]),n("div",[t._v("Time Elapsed: "+t._s(t.simulationElapsedText))])],1),n("v-card-actions",[n("v-spacer"),t.runningSimulator?n("v-btn",{attrs:{disabled:0===t.progressTotal},on:{click:t.cancelCalculations}},[t._v("\n          Cancel\n        ")]):n("v-btn",{on:{click:function(e){t.showProgressDialog=!1}}},[t._v("\n          Close\n        ")])],1)],1)],1),t._m(0)],1)},J=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"mt-3"},[t._v("\n    Powered by "),n("a",{attrs:{href:"https://joshuacastor.me/project-sparkle/",target:"_blank",rel:"noopener"}},[t._v("Project Sparkle")])])}],G=n("0040"),Q=Object.freeze(Object.keys(G.proc).filter(function(t){return"Attack"===G.proc[t].Type})),X=Object.freeze({1:{"Top Left":15,"Top Right":30,"Middle Left":20,"Middle Right":40,"Bottom Left":18,"Bottom Right":33},2:{"Top Left":13,"Top Right":24,"Middle Left":16,"Middle Right":33,"Bottom Left":15,"Bottom Right":27},3:{"Top Left":10,"Top Right":19,"Middle Left":13,"Middle Right":26,"Bottom Left":12,"Bottom Right":21},4:{"Top Left":7,"Top Right":14,"Middle Left":9,"Middle Right":19,"Bottom Left":8,"Bottom Right":15},5:{"Top Left":4,"Top Right":9,"Middle Left":6,"Middle Right":12,"Bottom Left":5,"Bottom Right":9}}),Z=Object.freeze({850328:19,750167:11,810278:25,810108:32,61007:48,860357:34,850418:30,20887:43,860258:21,850158:23,61087:17,51107:21,40857:15,860518:23,860548:20,51317:105,830048:18,61207:29,850568:29}),tt=2,et=1,nt=2,it=n("801b");function rt(t,e,n,i,r,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(i,r)}function at(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(t){rt(a,i,r,s,o,"next",t)}function o(t){rt(a,i,r,s,o,"throw",t)}s(void 0)})}}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){ot(t,e,n[e])})}return t}function ot(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ut=new l["a"]({prefix:"[SparkSimulator/utils]"});function lt(t){return Object(it["g"])(t,function(t){return Q.includes(t.id)})}function ct(t){var e=lt(t).map(function(t){return t.frames}),n=Object(it["f"])(t).map(function(t){return t.frames}),i=[];[e,n].forEach(function(t){t.forEach(function(t,e){for(var n=0===e?0:1,r=t["frame times"].length;n<r;n++)i.push({time:t["frame times"][n],dmg:t["hit dmg% distribution"][n]})})});var r={"frame times":[],"hit dmg% distribution":[]};return i.sort(function(t,e){return t.time-e.time}).forEach(function(t){var e=t.time,n=t.dmg;r["frame times"].push(e),r["hit dmg% distribution"].push(n)}),r}function dt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return((Object(it["c"])(t)||{}).effects||[]).filter(function(t){return Q.includes(Object(x["getEffectId"])(t).toString())})}function ft(t){var e=t.burst,n=void 0===e?{}:e,i=t.extraAttackEffects,r=void 0===i?[]:i,a=t.delay,s=void 0===a?0:a,o=t.moveTypeId,u=void 0===o?d["A"].Moving:o,l=t.moveSpeed,c=void 0===l?0:l,f=t.teleporterId,p=void 0===f?0:f,h=(n["damage frames"]||[]).filter(function(t){return Q.includes(Object(x["getEffectId"])(t).toString())});if(0===h.length&&0===r.length)return[];var v=dt(n),g=[u===d["A"]["Non-Moving"]?c:0,u===d["A"].Teleporting&&Z[p.toString()]||0,isNaN(s)?0:+s].reduce(function(t,e){return t+e},0),A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t.map(function(t){return{frame:+t+e,target:n?"aoe":"st"}})},b=h.map(function(t,e){var n="aoe"===v[e]["target area"],i=u===d["A"].Teleporting?0:+t["effect delay time(ms)/frame"].split("/")[1],r=(u===d["A"].Teleporting?0:i)+g;return A(t["frame times"],r,n)});if(r.length>0){var m=ct(n),y=r.filter(function(t){return Q.includes(Object(x["getEffectId"])(t).toString())}).map(function(t){var e="aoe"===t["target area"],n=+t["effect delay time(ms)/frame"].split("/")[1],i=(u===d["A"].Teleporting?0:n)+g;return A(m["frame times"],i,e)});b=b.concat(y)}return b}function pt(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.entry,i=void 0===n?Object(c["d"])():n,r=e.synchronousGetters,a=void 0===r?{}:r,s=e.squad,o=void 0===s?Object(c["c"])():s,u=e.originalPosition,l=e.unitConfig,f=void 0===l?mt():l,p=a.unit(i.id),h=["unit.bb","unit.sbb","unit.ubb"],v=Object(c["e"])({unitEntry:st({},i,{bbOrder:f.bbOrder||i.bbOrder,action:f.action}),target:d["L"].ENEMY,effectType:d["H"].PROC,squad:o},{getUnit:a.unit,getItem:a.item,getExtraSkill:a.extraSkill}).filter(function(t){return!h.includes(t.sourcePath)&&(!t.triggeredOn||t.triggeredOn===i.action)});t=isNaN(f.delay)?isNaN(i.delay)?0:+i.delay:+f.delay;var g={id:i.id,position:i.position,bbOrder:f.bbOrder||i.bbOrder,action:f.action||i.action,name:p.name||i.id,extraAttackEffects:v,burst:p[f.action],moveTypeId:p.movement&&p.movement.skill&&+p.movement.skill["move type"]||0,moveSpeed:p.movement&&p.movement.skill&&+p.movement.skill["move speed"]||0,moveSpeedType:p.movement&&p.movement.skill&&+p.movement.skill["move speed type"]||"1",delay:t,teleporterId:i.id,weight:f.weight,originalPosition:u};return g.frames=ft(g),g}function ht(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tt,n={};if(t.id!==d["I"].ANY&&t.id!==d["I"].EMPTY){var i=[(t.bbOrder-1)*e,t.moveTypeId===d["A"].Moving?+X[t.moveSpeedType][t.position]:0].reduce(function(t,e){return t+e},0);t.frames.forEach(function(t){t.forEach(function(t){var e=t.frame,r=t.target,a=+e+i;n[a]||(n[a]={aoe:0,st:0}),n[a][r]+=1})})}return n}function vt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[pt()],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bt(),n=e.enemyCount,i=e.burstCutins,r={},a=new Map;t.forEach(function(t){var e=ht(t,i?et:tt);Object.keys(e).forEach(function(t){r[t]||(r[t]={aoe:0,st:0}),r[t].aoe+=e[t].aoe,r[t].st+=e[t].st}),a.set(t,e)});var s,o=0,u=0,l=t.map(function(t){var e=a.get(t),i=Object.keys(e),s=i.map(function(t){return e[t].aoe*n+e[t].st}).reduce(function(t,e){return t+e},0),l=i.map(function(t){var i=e[t],a=i.aoe,s=i.st,o=r[t].aoe-a,u=r[t].st-s,l=[o>0&&a>0,a>1].some(function(t){return t}),c=[u>0&&s>0,o>0&&s>0,u>0&&a>0,a>0&&s>0,s>1].some(function(t){return t}),d=0;return l&&(d+=a*n),c&&(d+=s,u>0&&a>0&&!l&&(d+=a)),d}).reduce(function(t,e){return t+e},0);return o+=s,u+=l,{id:t.id,name:t.name||t.id,position:t.position,bbOrder:t.bbOrder,action:t.action,actualSparks:l,possibleSparks:s,delay:t.delay,originalPosition:t.originalPosition,weight:t.weight}}),d=l.filter(function(t){return t.weight>0}).reduce(function(t,e){return t+e.weight},0);return s=d<=0?0:l.map(function(t){var e=t.actualSparks/Math.max(1,t.possibleSparks),n=t.weight/d;return e*n}).reduce(function(t,e){return t+e},0),{actualSparks:u,possibleSparks:o,weightedPercentage:s,squad:Object(c["j"])(l,!1)}}function gt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sparkUnitResult,n=void 0===e?{}:e,i=t.unitData,r=void 0===i?{}:i,a=t.burstCutins,s=void 0!==a&&a,o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{delay:t,description:e}};if(n.id===d["I"].EMPTY)return[o(0,"Empty Units have no delay")];var u=r.movement&&r.movement.skill&&+r.movement.skill["move type"]||0,l=r.movement&&r.movement.skill&&+r.movement.skill["move speed"]||0,c=r.movement&&Object(z["m"])(r),f=r.movement&&r.movement.skill&&+r.movement.skill["move speed type"]||"1",p=u===d["A"].Teleporting&&Z[r.id.toString()]||0,h=+X[f][n.position],v=isNaN(n.delay)?0:+n.delay,g=isNaN(n.squadLevelDelay)?0:+n.squadLevelDelay;return[u===d["A"]["Non-Moving"]&&o(l,"innate move speed as a ".concat(c," unit")),u===d["A"].Teleporting&&o(p,"custom offset as a ".concat(c," unit")),u===d["A"].Moving&&o(h,"offset based on position and move speed type as a ".concat(c," unit")),o(s?et:tt,"burst cut-in delay (cut-ins ".concat(s?"on":"off",")")),v>0&&o(v,"custom unit delay"),g>0&&o(g,"custom squad delay")].filter(function(t){return t})}function At(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return isNaN(t)?e:+t}function bt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.unitConfig,n=void 0===e?[]:e,i=t.enemyCount,r=void 0===i?6:i,a=t.burstCutins,s=void 0!==a&&a,o=t.resultThreshold,u=void 0===o?50:o,l=t.workerCount,d=void 0===l?nt:l,f=t.maxResults,p=void 0===f?10:f,h=t.optimize,v=void 0!==h&&h,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(c["c"])(),A=Array.isArray(n)?n.map(function(t,e){return mt(st({},t,{id:g.units[e].id}))}):[];if(Array.isArray(g.units)&&A.length<g.units.length)for(var b=g.units.length,m=A.length;m<b;++m)A.push(mt(g.units[m]));return Object.freeze({unitConfig:A,enemyCount:Math.max(1,At(r,6)),burstCutins:!!s,resultThreshold:Math.max(0,Math.min(100,At(u,50))),workerCount:Math.max(1,Math.min(nt,At(d,nt))),maxResults:Math.max(1,Math.min(100,At(p,10))),optimize:!!v})}function mt(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.action,i=void 0===n?d["J"].ATK:n,r=e.bbOrder,a=void 0===r?1:r,s=e.delay,o=void 0===s?0:s,u=e.weight,l=void 0===u?1:u,c=e.lockPosition,f=void 0!==c&&c,p=e.id;return t=p===d["I"].EMPTY?d["J"].NONE:p!==d["I"].EMPTY&&i===d["J"].NONE?d["J"].ATK:i,Object.freeze({action:t,bbOrder:p!==d["I"].EMPTY?At(a,d["a"]):d["a"],delay:At(o,0),weight:At(l,1),lockPosition:!!f})}function yt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.unit,n=void 0===e?Object(c["d"])():e,i=t.attackEffects,r=void 0===i?[]:i,a=t.unitData,s=void 0===a?{}:a,o=new Set;r.forEach(function(t){var e=Object(x["getEffectId"])(t),n=t["target area"],i=13===+e&&!!t["random attack"];o.add(i?"rt":n)});var u=0===Array.from(o).length?[]:[o.has("rt")&&"Random attacks aren't supported yet",!o.has("aoe")&&"No AOE attacks found"].filter(function(t){return t}),l=s.movement&&s.movement.skill&&+s.movement.skill["move type"]||0;return l!==d["A"].Teleporting||Z.hasOwnProperty((s.id||n.id).toString())||u.push("This teleporting unit is not supported yet"),u}function St(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c["c"])(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bt(),n=[],i=t.units.filter(function(t){return t.id===d["I"].EMPTY}),r=t.units.length-i.length,a=0,s=0,o=new Set;return t.units.forEach(function(i,r){var u=e.unitConfig[r];if(i.id===d["I"].EMPTY){var l=isNaN(u.bbOrder)?t.units.length:+u.bbOrder;s=Math.min(s,l)}else{var c=isNaN(u.bbOrder)?0:+u.bbOrder;a=Math.max(a,c),c>0&&(o.has(c)?n.push("Duplicate BB Order found [".concat(c,"]")):o.add(c))}}),a>r&&n.push("BB Order for non-empty units should not exceed number of non-empty units (".concat(r,")")),s>0&&s<=r&&n.push("BB Order for empty units should not be lower than the number of non-empty units (".concat(r,")")),n}function xt(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c["c"])(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vt(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bt(),a=[],s=[],o=n.lead,u=n.friend;return d["N"].forEach(function(r,l){var d=n.units.findIndex(function(t){return t.position===r}),f=i.squad.findIndex(function(t){return t.originalPosition===r});a.push(Object(c["h"])(st({},n.units[d],{position:i.squad[f].position,bbOrder:i.squad[f].bbOrder,action:i.squad[f].action}))),s.push(i.squad[f]),d===o&&(t=a[l]),d===u&&(e=a[l])}),Object(c["j"])(a,!1),Object(c["j"])(s,!1),t&&(o=a.indexOf(t)),e&&(u=a.indexOf(e)),{squad:Object(c["a"])(st({},n,{lead:o,friend:u,units:a})),sparkResult:st({},i,{squad:s}),options:bt(st({},r,{unitConfig:wt(s)}))}}function wt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt().squad;return t.map(mt)}function kt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return 1===t.length?e.push(t):t.forEach(function(n,i){var r=t.slice(0,i).concat(t.slice(i+1,t.length)),a=kt(r);a.forEach(function(t){e.push([n].concat(t))})}),e}function Ot(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[pt()],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bt(),n=[],i=[];t.forEach(function(t,r){var a=e.unitConfig[r];a.lockPosition?n.push(r):i.push(t.position)});var r=[[]],a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0;return d["N"].map(function(r,a){return n.includes(a)?t[a].position:e[i++]})};return r=i.length>0?kt(i).map(function(t){return a(t)}):[n.map(function(e){return t[e].position})],r}function Et(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[pt()],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bt(),n=t.map(function(t,e){return e+1}),i=t.filter(function(t){return t.id===d["I"].EMPTY}),r=[],a=[];t.forEach(function(t,i){var s=e.unitConfig[i];!isNaN(s.bbOrder)&&n.includes(s.bbOrder)?r.push({unit:t,bbOrder:+s.bbOrder}):s.bbOrder===d["a"]&&a.push(t)});var s=n.filter(function(e){return e>t.length-i.length}).map(function(t,e){return{unit:i[e],bbOrder:t}}),o=r.map(function(t){var e=t.bbOrder;return e}),u=n.filter(function(e){return!o.includes(e)&&e<=t.length-i.length}),l=[[]];return l=u.length>0?kt(u).map(function(t){return t.map(function(t,e){return{unit:a[e],bbOrder:t}}).filter(function(t){return t.unit}).concat(r).concat(s)}):[r.concat(s)],l.map(function(e){return e.sort(function(e,n){return t.indexOf(e.unit)-t.indexOf(n.unit)}).map(function(t){return t.bbOrder})})}function Ct(){return qt.apply(this,arguments)}function qt(){return qt=at(s.a.mark(function t(){var e,n,i,r,a,o,u,l,c,f,p,h,v,g,A,b=arguments;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=b.length>0&&void 0!==b[0]?b[0]:[pt()],n=b.length>1&&void 0!==b[1]?b[1]:bt(),i=b.length>2&&void 0!==b[2]?b[2]:function(){},r=Ot(e,n),a=Et(e,n),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[{bbOrder:0,position:d["N"][0]}];return t.map(function(t,e){var i=n[e],r=t.id===d["I"].EMPTY||t.id===d["I"].ANY?"":"".concat(t.id,"|").concat(t.extraAttackEffects.length,"|").concat(t.action,"|").concat(i.position,"|").concat(i.bbOrder);return r}).filter(function(t){return t}).join("-")},ut.debug({positionPermutations:r,orderPermutations:a}),u=[],l=new Map,c=0,f=!0,p=!1,h=void 0,t.prev=13,v=s.a.mark(function t(){var n;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=A.value,c%5!==0){t.next=4;break}return t.next=4,Promise.resolve(i());case 4:a.forEach(function(t){var i=e.map(function(e,i){return{position:n[i],bbOrder:t[i]}}),r=o(e,i);l.get(r)||(l.set(r,!0),u.push(i))});case 5:case"end":return t.stop()}},t,this)}),g=r[Symbol.iterator]();case 16:if(f=(A=g.next()).done){t.next=21;break}return t.delegateYield(v(),"t0",18);case 18:f=!0,t.next=16;break;case 21:t.next=27;break;case 23:t.prev=23,t.t1=t["catch"](13),p=!0,h=t.t1;case 27:t.prev=27,t.prev=28,f||null==g.return||g.return();case 30:if(t.prev=30,!p){t.next=33;break}throw h;case 33:return t.finish(30);case 34:return t.finish(27);case 35:return t.abrupt("return",u);case 36:case"end":return t.stop()}},t,this,[[13,23,27,35],[28,,30,34]])})),qt.apply(this,arguments)}function _t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(c["d"])();return st({},t,{bbOrder:isNaN(t.bbOrder)?e.bbOrder:t.bbOrder})}var Tt=n("cb86"),Pt=n("3c85"),It=n.n(Pt);function jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ut(t,e,n){return e&&Bt(t.prototype,e),n&&Bt(t,n),t}var Mt=function(){function t(){jt(this,t)}return Ut(t,[{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(e.permutations,e.sparkSquad),i=(void 0===n&&pt(),e.options);void 0===i&&bt();return t._defer("run")}},{key:"cancel",value:function(){return t._defer("cancel")}},{key:"onProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.total,e.completed;return t._defer("onProgress")}}],[{key:"_defer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"name of method to be deferred";return Promise.reject(new Error("Must implement ".concat(t,"() in subclass")))}}]),t}();function Lt(t){return Lt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ft(t,e,n){return e&&Nt(t.prototype,e),n&&Nt(t,n),t}function Vt(t,e){return!e||"object"!==Lt(e)&&"function"!==typeof e?Rt(t):e}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zt(t){return zt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},zt(t)}function Ht(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wt(t,e)}function Wt(t,e){return Wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Wt(t,e)}var $t=new l["a"]({prefix:"[SparkSimWorker/client]"}),Yt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tt["a"];return Dt(this,e),t=Vt(this,zt(e).call(this)),t._worker=n,t._progressListeners=new Set,t._worker.registerCommand("progress",function(e){t.onProgress(e)}),t}return Ht(e,t),Ft(e,[{key:"request",value:function(t,e){return $t.debug("starting request for",{method:t,data:e}),this._worker.request(t,e)}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{permutations:null,sparkSquad:[pt()],options:bt()};return this._worker.request("run",t)}},{key:"cancel",value:function(){return this._worker.request("cancel")}},{key:"onProgress",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{total:0,completed:0};this._progressListeners.forEach(function(e){e(t)})}},{key:"addProgressListener",value:function(t){"function"===typeof t&&this._progressListeners.add(t)}},{key:"removeProgressListener",value:function(t){"function"===typeof t&&this._progressListeners.delete(t)}},{key:"removeAllListeners",value:function(){this._progressListeners.clear()}},{key:"close",value:function(){this._worker.close(),this._worker=null}},{key:"exchangeWorker",get:function(){return this._worker}}]),e}(Mt);function Kt(){var t=new Tt["a"](new It.a);return new Yt(t)}function Jt(t,e,n,i,r,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(i,r)}function Gt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(t){Jt(a,i,r,s,o,"next",t)}function o(t){Jt(a,i,r,s,o,"throw",t)}s(void 0)})}}function Qt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zt(t,e,n){return e&&Xt(t.prototype,e),n&&Xt(t,n),t}var te=new l["a"]({prefix:"[SparkSimulator]"}),ee=function(){function t(){Qt(this,t),this._squad=null;var e=function(){return{}};this._dbGetters={unit:e,item:e,extraSkill:e},this._progressListeners=new Set,this._workers=[],this._progressTotal=0,this._progressPerWorker=[]}return Zt(t,[{key:"calculateSparksForSquad",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c["c"])(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bt(),i=e.units.map(function(i,r){return pt({entry:i,synchronousGetters:t._dbGetters,squad:e,originalPosition:i.position,unitConfig:_t(n.unitConfig[r],i)})});return vt(i,n)}},{key:"calculateOptimalOrdersForSquad",value:function(){var t=Gt(s.a.mark(function t(){var e,n,i,r,a,o,u,l,d,f,p,h,v=this,g=arguments;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=g.length>0&&void 0!==g[0]?g[0]:Object(c["c"])(),n=g.length>1&&void 0!==g[1]?g[1]:bt(),i=e.units.map(function(t,i){return pt({entry:t,synchronousGetters:v._dbGetters,squad:e,originalPosition:t.position,unitConfig:n.unitConfig[i]})}),te.debug("getting permutations for spark squad",i),t.next=6,Ct(i,n,function(){return new Promise(function(t){return setTimeout(function(){return t()})})});case 6:for(r=t.sent,te.debug("permutations",r.length),this._progressTotal=r.length,a=[],o=Math.min(nt,Math.max(1,n.workerCount)),u=Math.max(1,Math.floor(r.length/o)),l=0,d=function(t){var e=Kt();v._workers.push(e),v._progressPerWorker.push(0),e.addProgressListener(function(e){return v.onProgress(e,t)});var s=void 0;s=1===o?r:t+1!==o?r.slice(l,l+u):r.slice(l),te.debug("slice",l,u,s.length),l+=u,a.push(e.run({permutations:s,sparkSquad:i,options:n}))},f=0;f<o;++f)d(f);return t.next=17,Promise.all(a);case 17:return p=t.sent,h={errors:[],results:[],countTested:r.length},p.forEach(function(t,e){h.errors=h.errors.concat(t.errors),h.results=h.results.concat(t.results).sort(function(t,e){return e.weightedPercentage-t.weightedPercentage}).slice(0,n.maxResults),v._workers[e].close()}),this._workers=[],this._progressPerWorker=[],t.abrupt("return",h);case 23:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"onProgress",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.completed,i=void 0===n?0:n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._progressPerWorker[r]=i;var a=this._progressPerWorker.reduce(function(t,e){return t+e},0);this._progressListeners.forEach(function(e){e({total:t._progressTotal,completed:a})})}},{key:"addProgressListener",value:function(t){"function"===typeof t&&this._progressListeners.add(t)}},{key:"removeProgressListener",value:function(t){"function"===typeof t&&this._progressListeners.delete(t)}},{key:"removeAllListeners",value:function(){this._progressListeners.clear()}},{key:"cancelCalculations",value:function(){this._workers.forEach(function(t){t.cancel()})}},{key:"getters",set:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(this._dbGetters).forEach(function(n){"function"===typeof e[n]&&(t._dbGetters[n]=e[n])})}}]),t}(),ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"spark-squad-card"},[n("v-layout",{staticClass:"pa-2",attrs:{row:"","align-center":""}},[n("v-flex",[n("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.sparkPercentage)+" Weighted Hits Sparked\n      ")])]),n("v-flex",{staticStyle:{flex:"none"}},[n("v-btn",{attrs:{icon:"",flat:"",color:t.bbOrderColorToggleIconColor},on:{click:t.toggleBbOrderColor}},[n("v-icon",[t._v("color_lens")])],1)],1)],1),n("v-layout",{staticClass:"px-2",attrs:{row:"",wrap:""}},t._l(t.fullUnits,function(e,i){return n("unit-entry",{key:t.getUnitEntryKey(e,i),staticClass:"d-flex py-1",staticStyle:{"align-items":"center",border:"1px solid var(--background-color-alt)"},attrs:{xs12:"",sm6:"",index:i,unit:e,getUnit:t.getUnit,isLead:t.squad.units.indexOf(e)===t.squad.lead,isFriend:t.squad.units.indexOf(e)===t.squad.friend,sparkResultForUnit:t.sparkResultsByUnit.get(e),relativeWeight:t.relativeWeightByUnit.get(e),warnings:t.warningsByUnit.get(e),burstCutins:t.simulatorOptions.burstCutins}})}),1),n("v-divider",{staticClass:"mt-2"}),t._t("card-actions",[n("v-card-actions",[n("v-btn",{attrs:{flat:""},on:{click:function(e){return t.$emit("share")}}},[n("v-icon",{attrs:{left:""}},[t._v("share")]),t._v("\n        Share\n      ")],1)],1)])],2)},ie=[],re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",t._g(t._b({staticClass:"spark-unit-entry"},"v-flex",t.$attrs,!1),t.$listeners),[t._t("before-content"),n("div",{staticStyle:{display:"flex"}},[n("v-layout",{staticClass:"mx-2",style:"flex-grow: 0!important; min-width: "+t.thumbnailSize+"px; max-width: "+t.thumbnailSize+"px;",attrs:{column:""}},[t.$vuetify.breakpoint.xsOnly?n("v-flex",{attrs:{"text-xs-center":""}},[n("span",{staticClass:"caption text-no-wrap"},[t._v(t._s(t.position))])]):t._e(),n("v-layout",{attrs:{"align-content-center":"",row:""}},[n("unit-thumbnail",{staticClass:"unit-thumbnail",style:"border-color: "+t.orderSettings.border+";",attrs:{src:t.getImageUrls(t.unit.id).ills_battle,rarity:t.rarity,imageTitle:t.name,displayWidth:t.thumbnailSize,displayHeight:t.thumbnailSize}},[n("template",{slot:"after-image"},[n("text",{style:t.bbOrderStyle,attrs:{x:0,y:.75*t.thumbnailSize}},[t._v("\n              "+t._s(isNaN(t.bbOrder)?"-":t.bbOrder)+"\n            ")])])],2)],1),t.orderSettings?n("v-flex",{staticClass:"text-xs-center"},[n("v-chip",{staticClass:"bb-order-chip",style:"\n            background-color: "+t.orderSettings.background+";\n            color: "+t.orderSettings.foreground+";\n            border-color: "+t.orderSettings.border+";\n          ",attrs:{tabindex:"-1",small:""}},[n("b",[t._v(t._s(t.orderSettings.text))])])],1):t._e()],1),n("v-layout",{staticStyle:{"align-self":"flex-start"},attrs:{column:""}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",{staticClass:"d-flex-container align-center font-weight-bold subheading"},[t.rarity<8?n("span",[t._v(t._s(t.rarity))]):t._e(),n("rarity-icon",{class:{"ml-1":8!==t.rarity,"mr-1":!0},attrs:{rarity:t.rarity||0,displaySize:18}}),n("span",[t._v(t._s(t.name))])],1),n("v-spacer"),t.isLead||t.isFriend?n("v-flex",{staticStyle:{"flex-grow":"0"}},[t.isLead?n("leader-icon",{attrs:{displaySize:18}}):t.isFriend?n("friend-icon",{attrs:{displaySize:18}}):t._e()],1):t._e()],1),n("v-layout",{attrs:{column:""}},[n("v-flex",[n("span",{staticClass:"headline",domProps:{textContent:t._s(t.sparkFraction)}}),n("span",{staticClass:"subheading",staticStyle:{"margin-left":"0.5em"},domProps:{textContent:t._s("SPARKS")}})]),n("v-layout",{attrs:{row:""}},[n("v-flex",{staticClass:"body-1"},[t._v("\n            Delay:\n            "),t._l(t.delayDescription,function(e,i){return[n("v-tooltip",{key:e.description,attrs:{bottom:""}},[n("span",{staticStyle:{"text-decoration":"underline dashed"},attrs:{slot:"activator"},domProps:{textContent:t._s(e.delay)},slot:"activator"}),n("span",{domProps:{textContent:t._s(e.description)}})]),i!==t.delayDescription.length-1?n("span",{key:i,staticStyle:{margin:"0 0.5em"},domProps:{textContent:t._s("+")}}):t._e()]}),t._v("\n            ,\n            "),n("v-tooltip",{attrs:{bottom:""}},[n("span",{staticStyle:{"text-decoration":"underline dashed"},attrs:{slot:"activator"},slot:"activator"},[t._v("\n                Weight:\n              ")]),n("span",[t._v("Represents how much this unit contributes to the overall spark percentage of the squad.")])]),t._v("\n            "+t._s(t.sparkResultForUnit.weight)+" ("+t._s(t.relativeWeight)+"%)\n          ")],2),t.warnings.length>0?n("v-flex",{staticStyle:{"flex-grow":"0"}},[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.showWarningDialog,callback:function(e){t.showWarningDialog=e},expression:"showWarningDialog"}},[n("v-btn",{attrs:{slot:"activator",fab:"",small:"",color:"warning"},slot:"activator"},[n("v-icon",[t._v("info")])],1),n("v-card",[n("v-card-text",[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-flex",[n("v-alert",{staticStyle:{"overflow-x":"auto"},attrs:{outline:"",value:!0,type:"warning"}},[n("span",[t._v("This unit has issues that may affect the accuracy of results.")]),n("v-list",t._l(t.warnings,function(e){return n("v-list-tile",{key:e},[n("v-list-tile-content",[n("v-list-tile-title",[t._v("\n                                "+t._s(e)+"\n                              ")])],1)],1)}),1)],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{flat:""},on:{click:function(e){t.showWarningDialog=!1}}},[t._v("\n                    Back\n                  ")])],1)],1)],1)],1):t._e()],1)],1)],1)],1)],2)},ae=[],se=n("c0a4"),oe=n.n(se),ue=n("69c9"),le=n("4c70"),ce=n("954e");function de(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){fe(t,e,n[e])})}return t}function fe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pe=[{stroke:oe.a.red.darken4,fill:oe.a.red.lighten4},{stroke:oe.a.blue.darken4,fill:oe.a.blue.lighten4},{stroke:oe.a.green.darken4,fill:oe.a.green.lighten4},{stroke:oe.a.yellow.darken4,fill:oe.a.yellow.lighten4},{stroke:oe.a.grey.darken4,fill:oe.a.grey.lighten4},{stroke:oe.a.purple.darken4,fill:oe.a.purple.lighten4}],he={mixins:[_["a"]],components:{UnitThumbnail:C["a"],RarityIcon:ue["a"],LeaderIcon:le["a"],FriendIcon:ce["a"]},props:{unit:{type:Object,required:!0},isLead:{type:Boolean,default:!1},isFriend:{type:Boolean,default:!1},sparkResultForUnit:{type:Object,required:!0},warnings:{type:Array,default:function(){return[]}},burstCutins:{type:Boolean,default:!1},relativeWeight:{type:Number,default:0}},computed:de({},Object(o["c"])("units",{getImageUrls:"getImageUrls"}),{thumbnailSize:function(){return 64},iconSize:function(){return 22},unitData:function(){return this.getUnit(this.unit.id)||{}},orderSettings:function(){var t=!isNaN(this.bbOrder);return de({text:t&&this.getOrderText({id:this.unit.id,action:this.action})||"-"},this.getColorSetBasedOnAction(t&&this.action||void 0))},rarity:function(){return this.unitData.rarity||0},name:function(){return this.unitData.name||this.unit.id},sparkFraction:function(){return"".concat(this.sparkResultForUnit.actualSparks," / ").concat(this.sparkResultForUnit.possibleSparks)},delayDescription:function(){return gt({sparkUnitResult:this.sparkResultForUnit,unitData:this.unitData,burstCutins:!!this.burstCutins})},bbOrder:function(){return this.sparkResultForUnit.bbOrder||this.unit.bbOrder},action:function(){return this.sparkResultForUnit.action||this.unit.action},position:function(){return this.sparkResultForUnit.position||this.unit.position},bbOrderStyle:function(){var t;return this.$store.state.showBbOrderColors&&!isNaN(this.bbOrder)&&pe[+this.bbOrder-1]&&(t=de({},pe[+this.bbOrder-1])),t}}),data:function(){return{showWarningDialog:!1}},methods:{getColorSetBasedOnAction:function(t){var e=(t===d["J"].UBB?"red":t===d["J"].SBB&&"amber")||t===d["J"].BB&&"blueGrey"||"grey";return{border:oe.a[e].base,background:oe.a[e].lighten4,foreground:oe.a[e].darken4}},getOrderText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action||this.getUnit(t.id).sbb&&d["J"].SBB||this.getUnit(t.id).bb&&d["J"].BB||d["J"].ATK;return e.toUpperCase()}}},ve=he,ge=(n("7e25"),Object(B["a"])(ve,re,ae,!1,null,null,null)),Ae=ge.exports,be={mixins:[_["a"]],components:{UnitEntry:Ae},props:{squad:{type:Object,required:!0},sparkResult:{type:Object,required:!0},simulatorOptions:{type:Object,required:!0}},computed:{fullUnits:function(){var t=this;return d["N"].map(function(e){var n=t.sparkResult.squad.find(function(t){return t.position===e}),i=t.squad.units.find(function(t){return t.position===n.originalPosition});return i||(i=Object(c["d"])({isEmpty:!0,bbOrder:null,position:e})),i})},sparkResultsByUnit:function(){var t=this,e=new WeakMap;return this.fullUnits.forEach(function(n){e.set(n,t.sparkResult.squad.find(function(t){return t.originalPosition===n.position}))}),e},sparkPercentage:function(){return"".concat((100*this.sparkResult.weightedPercentage).toFixed(2),"%")},warningsByUnit:function(){var t=this,e=new WeakMap;return this.fullUnits.forEach(function(n){var i=["unit.bb","unit.sbb","unit.ubb"],r=t.getUnit(n.id)||{},a=dt(r[n.action]),s=Object(c["e"])({unitEntry:n,target:d["L"].ENEMY,effectType:d["H"].PROC,squad:t.squad},t).filter(function(t){return!i.includes(t.sourcePath)&&(!t.triggeredOn||t.triggeredOn===n.action)});e.set(n,yt({unit:n,attackEffects:a.concat(s),unitData:r}))}),e},totalWeight:function(){return Math.max(1,this.sparkResult.squad.reduce(function(t,e){return t+e.weight},0))},relativeWeightByUnit:function(){var t=new WeakMap,e=this.sparkResultsByUnit,n=this.totalWeight;return this.fullUnits.forEach(function(i){var r=e.get(i),a=r.weight/n*100;t.set(i,+a.toFixed(2))}),t},bbOrderColorToggleIconColor:function(){return this.$store.state.showBbOrderColors?"primary":void 0}},methods:{getUnitEntryKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(JSON.stringify(t),"-").concat(e)},toggleBbOrderColor:function(){this.$store.commit("setShowSparkOrderColors",!this.$store.state.showBbOrderColors)}}},me=be,ye=Object(B["a"])(me,ne,ie,!1,null,null,null),Se=ye.exports,xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"spark-squad-card"},[n("v-layout",{staticClass:"px-2",attrs:{row:"",wrap:""}},t._l(t.fullUnits,function(e,i){return n("unit-entry",{key:t.getUnitEntryKey(e,i),staticClass:"d-flex py-1",staticStyle:{"align-items":"center",border:"1px solid var(--background-color-alt)"},attrs:{xs12:"",sm6:"",index:i,unit:e,getUnit:t.getUnit,isLead:i===t.squad.lead,isFriend:i===t.squad.friend,sparkSimUnitConfig:t.value.unitConfig[i]||{},warnings:t.warningsByUnit.get(e)},on:{input:function(e){return t.updateEntryForUnit(e,i)}}})}),1)],1)},we=[],ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",t._g(t._b({staticClass:"spark-unit-entry--editable"},"v-flex",t.$attrs,!1),t.$listeners),[t._t("before-content"),n("div",{staticStyle:{display:"flex"}},[n("v-layout",{staticClass:"mx-2",style:"flex-grow: 0!important; min-width: "+t.thumbnailSize+"px; max-width: "+t.thumbnailSize+"px;",attrs:{column:""}},[t.$vuetify.breakpoint.xsOnly?n("v-flex",{staticStyle:{"flex-grow":"0"},attrs:{"text-xs-center":""}},[n("span",{staticClass:"caption text-no-wrap"},[t._v(t._s(t.unit.position))])]):t._e(),n("v-layout",{style:t.$vuetify.breakpoint.xsOnly?"flex-grow: 0;":void 0,attrs:{"align-content-end":t.$vuetify.breakpoint.smAndUp}},[n("unit-thumbnail",{staticClass:"unit-thumbnail",style:"border-color: "+t.orderSettings.border+";",attrs:{src:t.getImageUrls(t.unit.id).ills_battle,rarity:t.rarity,imageTitle:t.name,displayWidth:t.thumbnailSize,displayHeight:t.thumbnailSize}},[n("template",{slot:"after-image"},[n("text",{attrs:{x:0,y:.75*t.thumbnailSize}},[t._v("\n              "+t._s(t.bbOrderToShow)+"\n            ")])])],2)],1),t.orderSettings?n("v-flex",{staticClass:"text-xs-center"},[n("v-chip",{staticClass:"bb-order-chip",style:"\n            background-color: "+t.orderSettings.background+";\n            color: "+t.orderSettings.foreground+";\n            border-color: "+t.orderSettings.border+";\n          ",attrs:{tabindex:"-1",small:""}},[n("b",[t._v(t._s(t.orderSettings.text))])])],1):t._e(),t.warnings.length>0?n("v-flex",{staticClass:"text-xs-center",staticStyle:{"flex-grow":"0"},attrs:{"align-content-end":""}},[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.showWarningDialog,callback:function(e){t.showWarningDialog=e},expression:"showWarningDialog"}},[n("v-btn",{attrs:{slot:"activator",fab:"",small:"",color:"warning"},slot:"activator"},[n("v-icon",[t._v("info")])],1),n("v-card",[n("v-card-text",[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-flex",[n("v-alert",{attrs:{outline:"",value:!0,type:"warning"}},[n("span",[t._v("This unit has issues that may affect the accuracy of results.")]),n("v-list",t._l(t.warnings,function(e){return n("v-list-tile",{key:e},[n("v-list-tile-content",[n("v-list-tile-title",[t._v("\n                            "+t._s(e)+"\n                          ")])],1)],1)}),1)],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{flat:""},on:{click:function(e){t.showWarningDialog=!1}}},[t._v("\n                Back\n              ")])],1)],1)],1)],1):t._e()],1),n("v-layout",{staticStyle:{"align-self":"flex-start"},attrs:{column:""}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",{staticClass:"d-flex-container align-center font-weight-bold subheading"},[t.rarity<8?n("span",[t._v(t._s(t.rarity))]):t._e(),n("rarity-icon",{class:{"ml-1":8!==t.rarity,"mr-1":!0},attrs:{rarity:t.rarity||0,displaySize:18}}),n("span",[t._v(t._s(t.nameLabel))])],1),n("v-spacer"),t.isLead||t.isFriend?n("v-flex",{staticStyle:{"flex-grow":"0"}},[t.isLead?n("leader-icon",{attrs:{displaySize:18}}):t.isFriend?n("friend-icon",{attrs:{displaySize:18}}):t._e()],1):t._e()],1),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",md4:""}},[n("v-select",{attrs:{label:"Action",disabled:t.isEmptyUnit,items:t.actionPossibilities,value:t.actionToShow},on:{input:function(e){return t.emitChangedValue({action:e})}}})],1),n("v-flex",{attrs:{xs12:"",md4:""}},[n("v-select",{attrs:{label:"BB Order",value:t.sparkSimUnitConfig.bbOrder||t.unit.bbOrder,items:t.bbOrderPossibilities},on:{input:function(e){return t.emitChangedValue({bbOrder:e})}}})],1),n("v-flex",{attrs:{xs12:"",md4:""}},[n("v-text-field",{attrs:{label:"Delay",disabled:t.isEmptyUnit,type:"number",value:isNaN(t.sparkSimUnitConfig.delay)?0:+t.sparkSimUnitConfig.delay},on:{input:function(e){return t.emitChangedValue({delay:e})}}})],1),n("v-flex",[n("v-text-field",{attrs:{label:"Weight",hint:"Higher weight means unit will be prioritized over units with lesser weight for spark results. Weight of zero and below means ignore that unit completely.","persistent-hint":"",disabled:t.isEmptyUnit||t.isAnyUnit,type:"number",value:isNaN(t.sparkSimUnitConfig.weight)?1:+t.sparkSimUnitConfig.weight},on:{input:function(e){return t.emitChangedValue({weight:e})}}})],1),n("v-flex",{staticStyle:{padding:"0 0.5em"},attrs:{xs12:""}},[n("v-btn",{attrs:{outline:!t.sparkSimUnitConfig.lockPosition,block:""},on:{click:function(e){return t.emitChangedValue({lockPosition:!t.sparkSimUnitConfig.lockPosition})}}},[n("v-icon",{attrs:{left:""}},[t._v(t._s(t.sparkSimUnitConfig.lockPosition?"lock":"lock_open"))]),n("span",{staticStyle:{"text-transform":"capitalize"}},[t._v("Position")])],1)],1)],1)],1)],1)],2)},Oe=[];function Ee(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){Ce(t,e,n[e])})}return t}function Ce(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qe={mixins:[_["a"]],components:{UnitThumbnail:C["a"],RarityIcon:ue["a"],LeaderIcon:le["a"],FriendIcon:ce["a"]},props:{unit:{type:Object,required:!0},isLead:{type:Boolean,default:!1},isFriend:{type:Boolean,default:!1},sparkSimUnitConfig:{type:Object,default:function(){}},warnings:{type:Array,default:function(){return[]}}},computed:Ee({},Object(o["c"])("units",{getImageUrls:"getImageUrls"}),{thumbnailSize:function(){return 64},iconSize:function(){return 22},unitData:function(){return this.getUnit(this.unit.id)||{}},orderSettings:function(){var t=!isNaN(this.unit.bbOrder);return Ee({text:t&&this.actionText||"-"},t&&this.colorSetBasedOnAction||void 0)},rarity:function(){return this.unitData.rarity||0},name:function(){return this.unitData.name||this.unit.id},isEmptyUnit:function(){return this.name===d["I"].EMPTY},isAnyUnit:function(){return this.name===d["I"].ANY},actionPossibilities:function(){var t=this,e=[{text:"BB",value:d["J"].BB},{text:"SBB",value:d["J"].SBB},{text:"UBB",value:d["J"].UBB}].filter(function(e){var n=e.value;return t.unit.id===d["I"].ANY||t.unitData[n]||t.unit.action===n}),n=[this.isEmptyUnit&&{text:"None",value:d["J"].NONE},!this.isEmptyUnit&&{text:"Attack",value:d["J"].ATK}].filter(function(t){return t});return n.concat(e)},bbOrderPossibilities:function(){return[d["a"]].concat(new Array(6).fill(0).map(function(t,e){return e+1}))},moveTypeText:function(){var t=Object.keys(this.unitData).length>0&&Object(z["m"])(this.unitData);return t&&" (".concat(t,")")||""},nameLabel:function(){return"".concat(this.name).concat(this.moveTypeText)},actionToShow:function(){return this.sparkSimUnitConfig.action||this.unit.action},colorSetBasedOnAction:function(){var t=(this.actionToShow===d["J"].UBB?"red":this.actionToShow===d["J"].SBB&&"amber")||this.actionToShow===d["J"].BB&&"blueGrey"||"grey";return{border:oe.a[t].base,background:oe.a[t].lighten4,foreground:oe.a[t].darken4}},actionText:function(){var t=this.actionToShow||this.unitData.sbb&&d["J"].SBB||this.unitData.bb&&d["J"].BB||d["J"].ATK;return t.toUpperCase()},bbOrderToShow:function(){return[!isNaN(this.sparkSimUnitConfig.bbOrder)&&this.sparkSimUnitConfig.bbOrder,this.sparkSimUnitConfig.bbOrder===d["a"]&&"-",!isNaN(this.unit.bbOrder)&&this.unit.bbOrder,"-"].find(function(t){return t})}}),data:function(){return{showWarningDialog:!1}},methods:{emitChangedValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$emit("input",mt(Ee({},this.sparkSimUnitConfig,t)))}}},_e=qe,Te=(n("2393"),Object(B["a"])(_e,ke,Oe,!1,null,null,null)),Pe=Te.exports;function Ie(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){je(t,e,n[e])})}return t}function je(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Be={mixins:[_["a"]],components:{UnitEntry:Pe},props:{squad:{type:Object,required:!0},value:{type:Object,required:!0}},computed:{fullUnits:function(){var t=this;return d["N"].map(function(e){var n=t.squad.units.find(function(t){return t.position===e});return n||(n=Object(c["d"])({isEmpty:!0,bbOrder:null,position:e})),n})},warningsByUnit:function(){var t=this,e=new WeakMap;return this.fullUnits.forEach(function(n,i){var r=t.value.unitConfig[i]||{},a=["unit.bb","unit.sbb","unit.ubb"],s=t.getUnit(n.id)||{},o=dt(s[r.action||n.action]),u=Object(c["e"])({unitEntry:n,target:d["L"].ENEMY,effectType:d["H"].PROC,squad:t.squad},t).filter(function(t){return!a.includes(t.sourcePath)&&(!t.triggeredOn||t.triggeredOn===n.action)});e.set(n,yt({unit:n,attackEffects:o.concat(u),unitData:s}))}),e},hasEmptyUnit:function(){return this.fullUnits.some(function(t){return t.id===d["I"].EMPTY})}},mounted:function(){this.hasEmptyUnit&&this.checkEmptyUnitConfig()},methods:{getUnitEntryKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(JSON.stringify(t),"-").concat(e)},updateEntryForUnit:function(t,e){if(!(t instanceof Event)){var n=this.value.unitConfig.slice();n[e]=t,this.emitChangedValue({unitConfig:n})}},emitChangedValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$emit("input",bt(Ie({},this.value,t),this.squad))},checkEmptyUnitConfig:function(){var t=this;if(Array.isArray(this.value.unitConfig)){var e=!1,n=this.value.unitConfig.map(function(n,i){var r=t.squad.units[i],a=n;return r.id===d["I"].EMPTY&&n.action!==d["J"].NONE&&(e=!0,a=mt(Ie({},n,{action:d["J"].NONE}))),a});e&&this.emitChangedValue({unitConfig:n})}}},watch:{squad:function(){this.hasEmptyUnit&&this.checkEmptyUnitConfig()},hasEmptyUnit:function(t){t&&this.checkEmptyUnitConfig()}}},Ue=Be,Me=Object(B["a"])(Ue,xe,we,!1,null,null,null),Le=Me.exports,De=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{staticClass:"overall-simulator-options",attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm4:"",md2:""}},[n("span",[t._v("Set All Orders:")])]),n("v-flex",{attrs:{xs6:"",sm4:"",md2:""}},[n("v-btn",{staticClass:"mx-2",on:{click:t.setAllOrdersInitial}},[t._v("Initial")])],1),n("v-flex",{attrs:{xs6:"",sm4:"",md2:""}},[n("v-btn",{staticClass:"mx-2",on:{click:t.setAllOrdersAny}},[t._v("Any")])],1),n("v-flex",{attrs:{xs12:"",sm4:"",md2:""}},[n("span",[t._v("Set All Positions:")])]),n("v-flex",{attrs:{xs6:"",sm4:"",md2:""}},[n("v-btn",{staticClass:"mx-2",on:{click:function(){return t.setAllPositions(!0)}}},[t._v("Locked")])],1),n("v-flex",{attrs:{xs6:"",sm4:"",md2:""}},[n("v-btn",{staticClass:"mx-2",on:{click:function(){return t.setAllPositions(!1)}}},[t._v("Unlocked")])],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{label:"Enemy Count",type:"number",hint:"There must be at least 2 enemies to ensure accuracy",value:t.value.enemyCount,"persistent-hint":""},on:{input:function(e){return t.emitChangedValue({enemyCount:e})}}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-switch",{attrs:{label:t.burstCutinToggleLabel,"hide-details":""},model:{value:t.burstCutins,callback:function(e){t.burstCutins=e},expression:"burstCutins"}})],1),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-text-field",{attrs:{label:"Result Threshold",type:"number",value:t.value.resultThreshold,suffix:"%"},on:{input:function(e){return t.emitChangedValue({resultThreshold:e})}}})],1),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-text-field",{attrs:{label:"Max Results",type:"number",value:t.value.maxResults},on:{input:function(e){return t.emitChangedValue({maxResults:e})}}})],1),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-text-field",{attrs:{label:"Worker Count",type:"number",value:t.value.workerCount,hint:t.workerCountFieldLabel,"persistent-hint":""},on:{input:function(e){return t.emitChangedValue({workerCount:e})}}})],1)],1)},Ne=[];function Fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){Ve(t,e,n[e])})}return t}function Ve(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Re={props:{value:{type:Object,required:!0},squad:{type:Object,required:!0}},computed:{burstCutinToggleLabel:function(){return"Burst Cutins are ".concat(this.value.burstCutins?"on":"off")},workerCountFieldLabel:function(){return"Max: ".concat(nt)},MAX_WORKERS:function(){return nt}},data:function(){return{burstCutins:!1}},methods:{emitChangedValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$emit("input",bt(Fe({},this.value,t),this.squad))},setAllOrdersInitial:function(){var t=this,e=this.value.unitConfig.map(function(e,n){var i=t.squad.units[n];return mt(Fe({},e,{bbOrder:i.bbOrder}))});this.emitChangedValue({unitConfig:e})},setAllOrdersAny:function(){var t=this.value.unitConfig.map(function(t){return mt(Fe({},t,{bbOrder:d["a"]}))});this.emitChangedValue({unitConfig:t})},setAllPositions:function(t){var e=this.value.unitConfig.map(function(e){return mt(Fe({},e,{lockPosition:!!t}))});this.emitChangedValue({unitConfig:e})}},watch:{value:{immediate:!0,handler:function(t){t&&(this.burstCutins=!!t.burstCutins)}},burstCutins:function(t){this.emitChangedValue({burstCutins:t})}}},ze=Re,He=(n("e4c8"),Object(B["a"])(ze,De,Ne,!1,null,null,null)),We=He.exports;function $e(t,e,n,i,r,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(i,r)}function Ye(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(t){$e(a,i,r,s,o,"next",t)}function o(t){$e(a,i,r,s,o,"throw",t)}s(void 0)})}}var Ke=new l["a"]({prefix:"[SparkStatisticsArea]"}),Je={mixins:[_["a"]],props:{squad:{type:Object,required:!0},initialSimulatorOptions:{type:Object,default:function(){}}},components:{SparkSquadCard:Se,SparkSquadCardEditable:Le,OverallSimulatorOptions:We},computed:{resultSelectValues:function(){var t=this;return Object.freeze(this.results.map(function(e,n){return{label:t.getResultName(e,n),value:n}}))},simulatorWarnings:function(){return St(this.squad,this.simulatorOptions)},progressLabel:function(){return"".concat(this.progressPercent.toFixed(2),"% (").concat(this.progressActual,"/").concat(this.progressTotal,")")},progressPercent:function(){return this.progressActual/Math.max(1,this.progressTotal)*100},combosTestedPerSecond:function(){return(this.lastTestedCount/Math.max(this.simulationEndTime-this.simulationStartTime,1)*1e3).toFixed(2)}},data:function(){return{sparkSimulator:new ee,results:null,currentSection:0,runningSimulator:!1,resultForCurrentSquad:null,simulatorOptions:null,currentResultIndex:0,showProgressDialog:!1,progressTotal:0,progressActual:0,progressAnimationFrame:null,progressObject:{total:0,completed:0,countTested:0},errors:[],simulationStartTime:Date.now(),simulationEndTime:Date.now(),simulationElapsedText:"",lastTestedCount:0,errorForCurrentSquad:null,errorForCalculations:null}},created:function(){this.simulatorOptions=bt(this.initialSimulatorOptions,this.squad)},mounted:function(){this.sparkSimulator.getters={unit:this.getUnit,item:this.getItem,extraSkill:this.getExtraSkill},this.calculateResultForCurrentSquad()},methods:{cancelCalculations:function(){this.sparkSimulator.cancelCalculations()},runSimulator:function(){var t=Ye(s.a.mark(function t(){var e,n=this;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.progressObject={total:0,completed:0},this.setProgress(),this.results=null,this.runningSimulator=!0,this.showProgressDialog=!0,this.errorForCalculations=null,this.currentResultIndex=0,this.progressAnimationFrame&&(cancelAnimationFrame(this.progressAnimationFrame),this.progressAnimationFrame=null),this.sparkSimulator.addProgressListener(function(t){n.progressObject=t,n.throttledSetProgress()}),this.simulationStartTime=Date.now(),this.throttledSetProgress(),t.next=13,this.$nextTick();case 13:return t.prev=13,t.next=16,this.sparkSimulator.calculateOptimalOrdersForSquad(this.squad,this.simulatorOptions);case 16:e=t.sent,this.errors=e.errors,this.results=e.results,t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](13),Ke.error("error calculating spark results",{err:t.t0,squad:this.squad,simulatorOptions:this.simulatorOptions}),this.errorForCalculations=t.t0;case 25:return this.progressAnimationFrame&&(cancelAnimationFrame(this.progressAnimationFrame),this.progressAnimationFrame=null),this.setProgress(),this.runningSimulator=!1,this.showProgressDialog=!1,this.progressObject={total:0,completed:0},this.simulationEndTime=Date.now(),this.sparkSimulator.removeAllListeners(),t.next=34,this.$nextTick();case 34:this.currentSection=2;case 35:case"end":return t.stop()}},t,this,[[13,21]])}));return function(){return t.apply(this,arguments)}}(),calculateResultForCurrentSquad:function(){this.errorForCurrentSquad=null;try{this.resultForCurrentSquad=Object.freeze(this.sparkSimulator.calculateSparksForSquad(this.squad,bt(this.squad.simulatorOptions,this.squad)))}catch(t){Ke.error("error calculating results for current squad",{err:t}),this.errorForCurrentSquad=t,this.resultForCurrentSquad=null}},emitShareEvent:function(t){this.$emit("share",t)},emitSimulatorOptions:function(){this.$emit("simoptions",this.simulatorOptions)},getResultName:function(t,e){return"Result ".concat(e+1," (").concat((100*t.weightedPercentage).toFixed(2),"%)")},applySparkResult:function(t){var e=xt(this.squad,t,this.simulatorOptions);this.$emit("apply",e),this.results=null,this.simulatorOptions=e.options,this.currentSection=0},setProgress:function(){this.progressActual=this.progressObject&&this.progressObject.completed||0,this.progressTotal=this.progressObject&&this.progressObject.total||0,this.lastTestedCount=this.progressObject&&this.progressObject.completed||0,this.simulationElapsedText=this.getTimeElapsedText()},throttledSetProgress:function(){var t=this;if(!this.progressAnimationFrame){var e=function(e){return e!==t.progressObject},n=function n(){var i=t.progressObject;t.progressAnimationFrame=requestAnimationFrame(function(){t.simulationElapsedText=t.getTimeElapsedText(),e(i)&&t.setProgress(),t.runningSimulator&&requestAnimationFrame(n)})};n()}},getTimeElapsedText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=t-this.simulationStartTime,n=1/6e4,i=.001,r=Math.floor(e*n),a=Math.floor((e-r/n)*i);return"".concat(r.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))}},watch:{simulatorOptions:function(){this.emitSimulatorOptions()},squad:function(){this.calculateResultForCurrentSquad()},resultForCurrentSquad:function(t){this.$emit("currentsquadresult",t)}}},Ge=Je,Qe=(n("d9ad"),Object(B["a"])(Ge,K,J,!1,null,null,null)),Xe=Qe.exports,Ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"squad-multidex-links"},[n("dl",[t._l(t.fullUnits,function(e){return[n("dt",{key:t.unitKeyBySquadEntry.get(e)+"-title",staticClass:"title mt-3 mb-2",domProps:{textContent:t._s(t.titleBySquadEntry.get(e))}}),n("dd",{key:t.unitKeyBySquadEntry.get(e)+"-links"},[n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.linksBySquadEntry.get(e),function(e,i){return n("v-flex",{key:i,staticClass:"pa-2",attrs:{xs12:"",sm6:""}},[n(t.getComponentNameFromEntry(e),{tag:"component",attrs:{entry:t.getDataForEntry(e),to:t.generateMultidexPathToEntry(e),sp:e.sp}},[t._v("\n              "+t._s(e)+"\n            ")])],1)}),1)],1)]})],2)])},tn=[],en=n("de7e"),nn=n("0a43"),rn=n("3e0d"),an={mixins:[_["a"]],props:{squad:{type:Object,required:!0}},components:{UnitEntryCard:en["a"],ExtraSkillEntryCard:nn["a"],ItemEntryCard:rn["a"]},computed:{fullUnits:function(){var t=this;return d["N"].map(function(e){var n=t.squad.units.find(function(t){return t.position===e});return n||(n=Object(c["d"])({isEmpty:!0,bbOrder:null,position:e})),n})},linksBySquadEntry:function(){var t=new WeakMap;return this.fullUnits.forEach(function(e){t.set(e,Object(c["g"])(e))}),t},unitKeyBySquadEntry:function(){var t=new WeakMap;return this.fullUnits.forEach(function(e,n){t.set(e,"".concat(JSON.stringify(e),"-").concat(n))}),t},titleBySquadEntry:function(){var t=this,e=new WeakMap;return this.fullUnits.forEach(function(n){var i=t.getUnit(n.id)||{},r="".concat(i.name||i.id||n.id," (").concat(n.position,")");e.set(n,r)}),e},multidexPathGetters:function(){var t=this.$store.getters;return d["C"].reduce(function(e,n){var i=n.name;return e[i]=t["".concat(i,"/getMultidexPathTo")],e},{})}},methods:{generateMultidexPathToEntry:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.moduleName,i=e.id,r=e.sp,a=this.multidexPathGetters[n]||function(e){return"/multidex/".concat(n,"/?server=").concat(t.$store.state.settings.activeServer,"&viewId=").concat(e)},s=a(i);return r&&r.length>0?"".concat(s,"&enhancements=").concat(r):s},getComponentNameFromEntry:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.moduleName,n="router-link";return"units"===e?n="unit-entry-card":"extraSkills"===e?n="extra-skill-entry-card":"items"===e&&(n="item-entry-card"),n},getDataForEntry:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.moduleName,n=t.id,i={id:n};return"units"===e?i=this.getUnit(n)||i:"extraSkills"===e?i=this.getExtraSkill(n)||i:"items"===e&&(i=this.getItem(n)||i),i}}},sn=an,on=Object(B["a"])(sn,Ze,tn,!1,null,null,null),un=on.exports;function ln(t,e,n,i,r,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(i,r)}function cn(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(t){ln(a,i,r,s,o,"next",t)}function o(t){ln(a,i,r,s,o,"throw",t)}s(void 0)})}}function dn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){fn(t,e,n[e])})}return t}function fn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pn=new l["a"]({prefix:"[Squad]"}),hn={props:{id:{type:String,required:!0}},components:{ModuleChecker:f["a"],SquadListCard:v["a"],ShareSquadCard:g["a"],DeleteSquadCard:A["a"],TabContainer:b["a"],SquadListCardEditable:m["a"],LoadingIndicator:p["a"],SquadBuffExpandableListView:F,SquadArenaSuggestionTable:Y,SquadSparkStatisticsArea:Xe,PromiseWait:h["a"],MultidexLinks:un},computed:dn({},Object(o["e"])("settings",["activeServer"]),{targetTypes:function(){return d["L"]},squadBuffTypes:function(){return d["H"]},requiredModules:function(){return u["b"]},tabConfig:function(){return["Multidex Links","Buffs","Spark Statistics","Arena"].map(function(t){return{name:t,slot:t.toLowerCase().replace(/ /g,"-")}})},squadCode:function(){return this.squad?Object(c["k"])(this.squad):""},minimizeSquadActionButtons:function(){return this.$vuetify.breakpoint.xsOnly}}),data:function(){return{squad:null,squadUnits:{},squadItems:{},squadExtraSkills:{},isLoadingSquadData:!1,activeSquadDialog:"",editMode:!1,currentTabIndex:0,tempSquad:{},topNavbarHeight:56,sparkResultToShare:null,simulatorOptions:{},initialLoadPromise:Promise.resolve(),disableActiveClassTimeout:null}},mounted:function(){var t=this;this.isLoadingSquadData=!0,this.initialLoadPromise=this.$store.dispatch("squads/getSquadById",this.id).then(function(e){if(!e||!e.squad)throw new Error("Specified squad doesn't exist.");t.squad=Object(c["a"])(e.squad)})},methods:dn({},Object(o["b"])("units",{getUnits:"getByIds"}),Object(o["b"])("items",{getItems:"getByIds"}),Object(o["b"])("extraSkills",{getExtraSkills:"getByIds"}),{getUnit:function(t){return this.squadUnits[t]||{}},getItem:function(t){return this.squadItems[t]||{}},getExtraSkill:function(t){return this.squadExtraSkills[t]||{}},updatePageDbForSquad:function(){var t=cn(s.a.mark(function t(e){var n,i,r,a=this;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=15;break}return n=Object(c["f"])(e),i=function(t){return"".concat(t[0].toLowerCase()).concat(t.slice(1))},r=this.activeServer,t.prev=4,t.next=7,["Units","Items","ExtraSkills"].reduce(function(t,e){var o=[],u=a["squad".concat(e)],l=n[i(e)],c={},d=Object.keys(u).map(function(t){return+t}).concat(l);return d.forEach(function(t){!isNaN(t)&&l.includes(t)&&(u[t]?c[t]=u[t]:o.push(t))}),t.then(cn(s.a.mark(function t(){var n;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(o.length>0)){t.next=8;break}return a.isLoadingSquadData||(a.isLoadingSquadData=!0),t.next=4,a["get".concat(e)]({ids:o,server:r,extractedFields:[]});case 4:n=t.sent,a["squad".concat(e)]=Object.freeze(dn({},c,n)),t.next=9;break;case 8:a["squad".concat(e)]=Object.freeze(c);case 9:case"end":return t.stop()}},t,this)})))},Promise.resolve());case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](4),pn.error(t.t0);case 12:return t.prev=12,this.isLoadingSquadData=!1,t.finish(12);case 15:case"end":return t.stop()}},t,this,[[4,9,12,15]])}));return function(e){return t.apply(this,arguments)}}(),setDocumentTitle:function(){var t="BF-MT - Squad";this.squad&&this.squad.name?document.title=[t,this.squad.name].join(" - "):document.title=t},getSquadUrl:function(t){return this.$router.resolve({path:"/tools/squads/add",query:{import:"string"!==typeof t?Object(c["k"])(t):t}}).route.fullPath},onNewUnits:function(t){this.tempSquad=dn({},this.tempSquad,{units:t})},onPageReady:function(){this.updateTopNavbarHeight(),this.$store.state.disableHtmlOverflow&&this.$store.commit("setHtmlOverflowDisableState",!1)},updateTopNavbarHeight:function(){var t=document.querySelector("nav.v-toolbar");this.topNavbarHeight=t&&t.offsetHeight||56},applySparkResult:function(){var t=cn(s.a.mark(function t(){var e,n,i,r,a=arguments;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},n=e.squad,i=e.sparkResult,r=e.options,n.simulatorOptions=r||this.simulatorOptions,t.next=4,this.$store.dispatch("squads/storeSquad",{server:this.$store.state.settings.activeServer,squad:n,id:this.id});case 4:this.sparkResultToShare=i,this.squad=n;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),checkWindowActiveClass:function(){var t=this;if(!this.disableActiveClassTimeout){var e=function e(){var n=t.$el.querySelector(".v-window__container--is-active");n?(n.classList.remove("v-window__container--is-active"),t.disableActiveClassTimeout=setTimeout(e,1e3)):t.disableActiveClassTimeout=null};this.disableActiveClassTimeout=setTimeout(e,1e3)}}}),watch:{squad:function(){var t=cn(s.a.mark(function t(e){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.setDocumentTitle(),t.next=3,this.updatePageDbForSquad(e);case 3:this.onPageReady();case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),editMode:function(){var t=cn(s.a.mark(function t(e){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e?(this.tempSquad=Object(c["a"])(this.squad),this.tempSquad.simulatorOptions=this.simulatorOptions):this.tempSquad={};case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),tempSquad:function(){var t=cn(s.a.mark(function t(e){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e||!Array.isArray(e.units)){t.next=5;break}return t.next=3,this.updatePageDbForSquad(e);case 3:t.next=7;break;case 5:return t.next=7,this.updatePageDbForSquad(this.squad);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),currentTabIndex:function(){this.checkWindowActiveClass()}}},vn=hn,gn=Object(B["a"])(vn,i,r,!1,null,null,null);e["default"]=gn.exports},d41e:function(t,e,n){"use strict";var i=n("654e"),r=n.n(i);r.a},d939:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("module-checker",{attrs:{requiredModules:t.requiredModules,ensureDbSync:!0,useUpdateDialog:!1}},[n("v-container",{attrs:{fluid:""}},[t.hasSelection?n("v-layout",[n("loading-indicator",{attrs:{loadingMessage:"Processing selection..."}})],1):[n("v-layout",{attrs:{row:"","align-center":""}},[n("v-flex",[n("v-text-field",{attrs:{label:"Search","persistent-hint":"",hint:t.searchHint},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendQuery(e)}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1),n("v-flex",{staticStyle:{"flex-grow":"0"}},[n("v-btn",{staticClass:"mr-0",attrs:{icon:"",flat:"",outline:t.hasDirtyQuery},on:{click:t.sendQuery}},[n("v-icon",[t._v("search")])],1)],1)],1),n("v-layout",{staticStyle:{"min-height":"0","max-height":"55vh",flex:"1"}},[n("div",{staticClass:"py-2 px-1",staticStyle:{overflow:"auto",flex:"1"}},[t._t("entries",[n("v-layout",{attrs:{row:"",wrap:""}},[t._v("\n                  "+t._s(t.entriesToShow)+"\n              ")])],{entries:t.entriesToShow})],2)]),t.numPages>1?n("v-layout",{attrs:{row:"","justify-center":"","align-center":""}},[n("v-pagination",{attrs:{"total-visible":t.$vuetify.breakpoint.mdAndUp?20:void 0,length:t.numPages},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1):t._e()],t.showCancelButton?[n("v-layout",{directives:[{name:"show",rawName:"v-show",value:!t.hasSelection,expression:"!hasSelection"}],staticStyle:{"justify-content":"flex-end"},attrs:{row:""}},[n("v-flex",{staticStyle:{flex:"none"}},[n("v-btn",{attrs:{flat:""},on:{click:function(e){return t.$emit("cancel")}}},[t._v("Cancel")])],1)],1)]:t._e()],2)],1)],1)},r=[],a=n("b758"),s=n("88fe"),o={props:{allEntryIds:{type:Array,default:function(){return[]}},value:{type:String,default:""},entriesPerPage:{type:Number,default:24},hasSelection:{type:Boolean,default:!1},requiredModules:{type:Array,default:function(){return[]}},showCancelButton:{type:Boolean,default:!0}},components:{LoadingIndicator:a["a"],ModuleChecker:s["a"]},computed:{numPages:function(){return Math.ceil(this.allEntryIds.length/this.entriesPerPage)},entriesToShow:function(){var t=Math.max((this.currentPage-1)*this.entriesPerPage,0);return this.allEntryIds.slice(t,t+this.entriesPerPage)},hasDirtyQuery:function(){return this.query!==this.value},searchHint:function(){return["".concat(this.allEntryIds.length," results"),this.hasDirtyQuery&&"*"].filter(function(t){return t}).join("")}},data:function(){return{currentPage:1,query:""}},methods:{sendQuery:function(){this.$emit("input",this.query)}},watch:{value:{immediate:!0,handler:function(t){this.query=t||""}}}},u=o,l=n("2877"),c=Object(l["a"])(u,i,r,!1,null,null,null);e["a"]=c.exports},d9ad:function(t,e,n){"use strict";var i=n("e36c"),r=n.n(i);r.a},e36c:function(t,e,n){},e4c8:function(t,e,n){"use strict";var i=n("be6b"),r=n.n(i);r.a},e7ab:function(t,e,n){},f2fe:function(t,e,n){},f8bc:function(t,e,n){"use strict";var i=n("bbc5"),r=n.n(i);r.a},fa37:function(t,e,n){"use strict";var i=n("8d77"),r=n.n(i);r.a}}]);
//# sourceMappingURL=squads.87f5138d.js.map