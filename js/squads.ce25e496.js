(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["squads"],{"021b":function(t,e,n){"use strict";var r=n("3505"),i=n.n(r);i.a},"083f":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-selector",{attrs:{showCancelButton:t.showCancelButton,value:t.nameFilter,hasSelection:t.hasSelection,requiredModules:t.requiredModules,allEntryIds:t.allIds},on:{input:function(e){return t.nameFilter=(e||"").toLowerCase()},cancel:function(e){return t.$emit("cancel")}},scopedSlots:t._u([{key:"entries",fn:function(e){var r=e.entries;return n("v-layout",{attrs:{row:"",wrap:""}},t._l(r,(function(e){return n("v-flex",{key:e,attrs:{xs12:"",sm6:"",md4:"",xl3:""}},[n("entry-card",{staticClass:"ma-2",staticStyle:{background:"var(--background-color)",cursor:"pointer",height:"auto"},attrs:{entry:t.pageDb[e]},nativeOn:{click:function(n){return t.sendEntry(e)}}})],1)})),1)}}])})},i=[],a=n("d939"),s=n("3e0d"),o={props:{showCancelButton:{type:Boolean,default:!0}},components:{BaseSelector:a["a"],EntryCard:s["a"]},computed:{requiredModules:function(){return["items"]},pageDb:function(){return this.$store.state.items.pageDb},allIds:function(){var t=this;return Object.keys(this.pageDb).filter((function(e){var n="sphere"===t.pageDb[e].type,r=!t.nameFilter||t.hasName(t.pageDb[e].name,t.nameFilter);return n&&r}))}},data:function(){return{nameFilter:"",hasSelection:!1}},methods:{hasName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.toLowerCase().includes(e)},sendEntry:function(t){this.hasSelection=!0,this.$emit("input",{id:t})}}},u=o,l=n("2877"),c=Object(l["a"])(u,r,i,!1,null,null,null);e["a"]=c.exports},"08a6":function(t,e,n){},"09c5":function(t,e,n){},"0a43":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-entry-card",{staticStyle:{height:"100%"},attrs:{to:t.to}},[n("v-container",{staticClass:"pa-3",attrs:{fluid:""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs9:""}},[n("div",{staticClass:"d-flex-container items-center"},[n("h1",{staticClass:"subheading d-inline-block",staticStyle:{"word-break":"break-word"}},[n("b",{domProps:{textContent:t._s(t.entry.name||"No Name")}})])])]),n("v-flex",{staticClass:"test-xs-right",attrs:{xs3:""}},[n("div",{staticClass:"d-flex-container items-center content-flex-end"},[t.rarity<8?n("span",[t._v(t._s(t.rarity))]):t._e(),n("rarity-icon",{class:{"ml-1":8!==t.rarity},attrs:{rarity:t.rarity,displaySize:18}})],1)])],1),n("v-layout",{attrs:{row:""}},[n("v-flex",{staticStyle:{"word-break":"break-word"}},[t.entry.desc&&"None"!==t.entry.desc&&"0"!==t.entry.desc?n("span",[t._v(t._s(t.entry.desc))]):n("span",[t._v("No description.")])])],1),t.showAssociatedUnits&&t.entry.associated_units?n("v-layout",{staticClass:"d-align-items-center",attrs:{row:"",wrap:""}},[n("v-flex",{staticClass:"text-xs-center",attrs:{xs5:"",sm4:""}},[t._v("\n        Associated Units:\n      ")]),n("v-flex",{staticClass:"text-xs-left",attrs:{xs7:""}},t._l(t.entry.associated_units,(function(e,r){return n("unit-thumbnail",{key:r,attrs:{src:t.getImageUrls(e).ills_thum,rarity:t.getUnit(e).rarity,imageTitle:t.getUnit(e).name,displayWidth:t.thumbnailSize,displayHeight:t.thumbnailSize}})})),1)],1):t._e()],1)],1)},i=[],a=n("2f62"),s=n("50a6"),o=n("69c9"),u=n("ac4c");function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={mixins:[s["a"]],props:{showAssociatedUnits:{type:Boolean,default:!0}},components:{RarityIcon:o["a"],UnitThumbnail:u["a"]},computed:c({},Object(a["e"])("units",["pageDb"]),{},Object(a["c"])("units",["getImageUrls"]),{rarity:function(){return+this.entry.rarity},thumbnailSize:function(){var t=this.$vuetify.breakpoint;return t.xlOnly?64:t.mdAndUp?56:48}}),methods:{getUnit:function(t){return this.pageDb[t]||{}}}},p=f,h=n("2877"),v=Object(h["a"])(p,r,i,!1,null,null,null);e["a"]=v.exports},"0e03":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-selector",{attrs:{showCancelButton:t.showCancelButton,value:t.nameFilter,hasSelection:t.hasSelection,requiredModules:t.requiredModules,allEntryIds:t.allIds},on:{input:function(e){return t.nameFilter=(e||"").toLowerCase()},cancel:function(e){return t.$emit("cancel")}},scopedSlots:t._u([{key:"entries",fn:function(e){var r=e.entries;return n("v-layout",{attrs:{row:"",wrap:""}},t._l(r,(function(e){return n("v-flex",{key:e,attrs:{xs12:"",sm6:"",md4:"",xl3:""}},[n("entry-card",{staticClass:"ma-2",staticStyle:{background:"var(--background-color)",cursor:"pointer",height:"auto"},attrs:{entry:t.pageDb[e]},nativeOn:{click:function(n){return t.sendEntry(e)}}})],1)})),1)}}])})},i=[],a=n("d939"),s=n("0a43"),o={props:{showCancelButton:{type:Boolean,default:!0}},components:{BaseSelector:a["a"],EntryCard:s["a"]},computed:{requiredModules:function(){return["extraSkills","units"]},pageDb:function(){return this.$store.state.extraSkills.pageDb},allIds:function(){var t=this;return Object.keys(this.pageDb).filter((function(e){var n=!t.nameFilter||t.hasName(t.pageDb[e].name,t.nameFilter);return n}))}},data:function(){return{nameFilter:"",hasSelection:!1}},methods:{hasName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.toLowerCase().includes(e)},sendEntry:function(t){this.hasSelection=!0,this.$emit("input",{id:t})}}},u=o,l=n("2877"),c=Object(l["a"])(u,r,i,!1,null,null,null);e["a"]=c.exports},"0f27":function(t,e,n){"use strict";var r=n("6cb7"),i=n.n(r);i.a},"15bb":function(t,e,n){},"164a":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("module-checker",{attrs:{requiredModules:t.requiredModules,isExternallyLoading:t.isVisuallyLoading,externalLoadingMessage:"Fetching squad information..."},on:{initfinished:t.getDbData}},[n("v-container",[n("v-toolbar",{attrs:{app:"",fixed:"",extended:"","scroll-off-screen":"","extension-height":"72px"}},[n("v-container",{directives:[{name:"show",rawName:"v-show",value:!t.showCopyModal,expression:"!showCopyModal"}],class:{"pt-0 pb-0 mb-2 px-1":!0,focused:t.searchIsFocused},attrs:{slot:"extension",fluid:"",id:"squad-list--search-extension"},slot:"extension"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.onFilterUpdate(e)}}},[n("v-layout",{attrs:{row:"","align-center":""}},[n("v-flex",[n("v-text-field",{attrs:{clearable:"",color:t.lightMode?"black":"white",label:"Search","prepend-inner-icon":"search",hint:t.sortedSquads.length+" "+(1===t.sortedSquads.length?"squad":"squads"),"persistent-hint":""},on:{focusin:function(e){t.searchIsFocused=!0},focusout:function(e){t.searchIsFocused=!1}},model:{value:t.nameFilter,callback:function(e){t.nameFilter=e},expression:"nameFilter"}})],1),n("v-layout",{staticStyle:{"flex-grow":"0"},attrs:{row:""}},[n("v-flex",{staticStyle:{"flex-grow":"0"}},[n("v-btn",{attrs:{icon:"",flat:""},on:{click:function(e){t.sortOrderAscending=!t.sortOrderAscending}}},[n("v-icon",[t._v(t._s("fa-sort-alpha-"+(t.sortOrderAscending?"down":"up")))])],1)],1),n("v-flex",{staticStyle:{"flex-grow":"0"}},[n("v-btn",{staticStyle:{"min-width":"64px"},attrs:{type:"submit",outline:!t.filterChanged,color:t.filterChanged?"primary":"",round:""},on:{click:t.onFilterUpdate}},[n("v-icon",[t._v("search")])],1)],1)],1)],1)],1)])],1),n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.squadsToShow,(function(e,r){return n("v-flex",{key:e.id,attrs:{xs12:""}},[n("squad-list-card",{staticClass:"ma-2",attrs:{id:"squad-result-"+(r+1),squad:e,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,to:"/tools/squads/"+e.id},on:{share:function(){t.activeSquadIndex=r,t.activeSquadDialog="share"},delete:function(){t.activeSquadIndex=r,t.activeSquadDialog="delete"}}},[t.isCopyMode?[n("v-card-actions",{attrs:{slot:"card-actions"},slot:"card-actions"},[n("v-spacer"),n("v-btn",{attrs:{flat:"",to:t.getSquadUrl(e)}},[n("v-icon",{attrs:{left:""}},[t._v("file_copy")]),t._v("\n                Copy\n              ")],1)],1)]:t._e()],2)],1)})),1),n("v-bottom-nav",{attrs:{fixed:"",value:t.sortedSquads.length>t.squadsPerPage,app:""}},[n("v-pagination",{staticStyle:{"justify-content":"center"},attrs:{length:t.numPages,"total-visible":t.$vuetify.breakpoint.mdAndUp?20:void 0},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t.isCopyMode?t._e():[n("v-dialog",{attrs:{value:!!t.activeSquadDialog,lazy:""},on:{input:function(e){return t.activeSquadDialog=e?t.activeSquadDialog:""}}},[t.squadsToShow[t.activeSquadIndex]?["share"===t.activeSquadDialog?n("share-squad-card",{attrs:{squad:t.squadsToShow[t.activeSquadIndex],getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill},on:{back:function(e){t.activeSquadDialog=""}}}):"delete"===t.activeSquadDialog?n("delete-squad-card",{attrs:{squad:t.squadsToShow[t.activeSquadIndex],squadId:t.squadsToShow[t.activeSquadIndex].id,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill},on:{delete:function(){t.activeSquadDialog="",t.getDbData()},cancel:function(e){t.activeSquadDialog=""}}}):t._e()]:n("v-card",[n("v-card-text",[t._v("\n            No squad selected\n          ")]),n("v-card-actions",{staticStyle:{"justify-content":"flex-end"}},[n("v-btn",{attrs:{flat:""},on:{click:function(e){t.activeSquadDialog=""}}},[t._v("\n              Back\n            ")])],1)],1)],2),t.isCopyMode?t._e():n("v-speed-dial",{attrs:{transition:"slide-y-reverse-transition",direction:"top",right:"",bottom:"",fixed:""},model:{value:t.fabModel,callback:function(e){t.fabModel=e},expression:"fabModel"}},[n("v-btn",{attrs:{slot:"activator",color:"primary",fab:""},on:{transitionend:function(){return t.repositionTooltip()}},slot:"activator",model:{value:t.fabModel,callback:function(e){t.fabModel=e},expression:"fabModel"}},[n("v-icon",[t._v("add")]),n("v-icon",[t._v("close")])],1),n("v-tooltip",{attrs:{left:""},model:{value:t.showTooltip,callback:function(e){t.showTooltip=e},expression:"showTooltip"}},[n("v-btn",{attrs:{slot:"activator",to:"/tools/squads/add",fab:"",small:"",outline:""},slot:"activator"},[n("v-icon",[t._v("add")])],1),n("span",[t._v("New Squad")])],1),n("v-tooltip",{attrs:{left:""},model:{value:t.showTooltip,callback:function(e){t.showTooltip=e},expression:"showTooltip"}},[n("v-btn",{attrs:{slot:"activator",fab:"",small:"",outline:""},on:{click:function(e){t.showImportFromCodeModal=!0}},slot:"activator"},[n("v-icon",[t._v("input")])],1),n("span",[t._v("Import From Code")])],1),n("v-tooltip",{attrs:{left:""},model:{value:t.showTooltip,callback:function(e){t.showTooltip=e},expression:"showTooltip"}},[n("v-btn",{attrs:{slot:"activator",fab:"",small:"",outline:""},on:{click:function(e){t.showCopyModal=!0}},slot:"activator"},[n("v-icon",[t._v("file_copy")])],1),n("span",[t._v("Copy Existing Squad")])],1)],1),n("v-dialog",{attrs:{lazy:"",fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.showCopyModal,callback:function(e){t.showCopyModal=e},expression:"showCopyModal"}},[n("v-card",{staticStyle:{"background-color":"var(--background-color)"}},[n("v-toolbar",{staticStyle:{"z-index":"5"},attrs:{fixed:""}},[n("v-btn",{attrs:{icon:""},on:{click:function(e){t.showCopyModal=!1}}},[n("v-icon",[t._v("close")])],1),n("v-toolbar-title",[t._v("Copy Existing Squad")])],1),t.showCopyModal?n("squad-list",{staticStyle:{"padding-top":"128px","padding-bottom":"64px"},attrs:{isCopyMode:!0,squadDb:{units:t.units,items:t.items,extraSkills:t.extraSkills}}}):t._e()],1)],1),n("v-dialog",{attrs:{lazy:"","max-width":"500px"},model:{value:t.showImportFromCodeModal,callback:function(e){t.showImportFromCodeModal=e},expression:"showImportFromCodeModal"}},[n("v-card",[n("v-card-text",[n("v-textarea",{attrs:{rows:10,label:"Import Code"},model:{value:t.importCode,callback:function(e){t.importCode=e},expression:"importCode"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{disabled:!t.importCode,flat:"",to:t.getSquadUrl(t.importCode)}},[t._v("\n              Import\n            ")])],1)],1)],1)]],2)],1)},i=[],a=n("a34a"),s=n.n(a),o=n("2f62"),u=n("34b9"),l=n("080f"),c=n("f022"),d=n("fca9"),f=n("6a92"),p=n("b047"),h=n.n(p),v=n("d239"),g=n("bdea"),b=n("1b56"),m=n("a598"),y=n("88fe");function A(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(r,i)}function S(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){A(a,r,i,s,o,"next",t)}function o(t){A(a,r,i,s,o,"throw",t)}s(void 0)}))}}function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}new d["a"]({prefix:"[SquadList]"});var k,E={name:"squad-list",props:{isCopyMode:{type:Boolean,default:!1},squadDb:{required:!1}},components:{SquadListCard:g["a"],ShareSquadCard:b["a"],DeleteSquadCard:m["a"],ModuleChecker:y["a"]},computed:w({},Object(o["e"])("settings",["activeServer","lightMode"]),{requiredModules:function(){return c["b"]},squads:function(){return this.$store.state.squads.squads},sortedSquads:function(){var t=this;return Object.freeze(this.filteredSquads.slice().sort((function(e,n){var r=e.name<n.name?-1:1;return t.sortOrderAscending?r:-r})))},squadsPerPage:function(){return 10},squadsToShow:function(){var t=this.currentPage-1,e=t*this.squadsPerPage;return Object.freeze(this.sortedSquads.slice(e,e+this.squadsPerPage))},numPages:function(){return Math.ceil(this.sortedSquads.length/this.squadsPerPage)}}),data:function(){return{units:{},items:{},extraSkills:{},isInternallyLoading:!1,isVisuallyLoading:!1,activeCallToken:"0",nameFilter:"",searchIsFocused:!1,filterChanged:!1,sortOrderAscending:!0,filteredSquads:[],currentPage:1,activeSquadIndex:-1,activeSquadDialog:"",fabModel:!1,showTooltip:!0,showCopyModal:!1,showImportFromCodeModal:!1,importCode:""}},beforeCreate:function(){var t=this;k&&k.dispose(),k=new v["a"]((function(e){t.isVisuallyLoading=e}))},methods:w({},Object(o["b"])("units",{getUnits:"getByIds"}),{},Object(o["b"])("items",{getItems:"getByIds"}),{},Object(o["b"])("extraSkills",{getExtraSkills:"getByIds"}),{getDbData:function(){var t=S(s.a.mark((function t(){var e,n,r,i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.isInternallyLoading=!0,e=[(new Date).valueOf().toString(),Math.random().toString()].join("-"),this.activeCallToken=e,!this.squadDb){t.next=9;break}this.units=this.squadDb.units,this.items=this.squadDb.items,this.extraSkills=this.squadDb.extraSkills,t.next=16;break;case 9:return t.next=11,this.$store.dispatch("squads/getSquads",this.$store.state.settings.activeServer).then((function(t){var e=t.map((function(t){return w({id:t.id},t.squad)}));return a.$store.commit("squads/setSquadList",e),e}));case 11:return n=t.sent,r=Object(f["g"])(n),i=this.activeServer,t.next=16,[S(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.getUnits({ids:r.units,server:i,extractedFields:["id","rarity","feskills","name","sbb","cost"]});case 2:return t.abrupt("return",a.units=t.sent);case 3:case"end":return t.stop()}}),t)}))),S(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.getItems({ids:r.items,server:i,extractedFields:["name","sphere type"]});case 2:return t.abrupt("return",a.items=t.sent);case 3:case"end":return t.stop()}}),t)}))),S(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.getExtraSkills({ids:r.extraSkills,server:i,extractedFields:["name"]});case 2:return t.abrupt("return",a.extraSkills=t.sent);case 3:case"end":return t.stop()}}),t)})))].reduce((function(t,n){return t.then((function(){if(e===a.activeCallToken)return n()}))}),Promise.resolve());case 16:e===this.activeCallToken&&(this.isInternallyLoading=!1);case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getUnit:function(t){return this.units[t]||{}},getItem:function(t){return this.items[t]||{}},getExtraSkill:function(t){return this.extraSkills[t]||{}},filterSquads:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,r=void 0===n?"":n,i=r&&r.toLowerCase(),a=function(t){return(t||"").toLowerCase().includes(i)};return this.squads.filter((function(e){return[function(){return!i},function(){return a(e.id.toString())},function(){return e.name&&a(e.name)},function(){return e.units.some((function(e){return[function(){return a(t.getUnit(e.id).name)},function(){return e.es&&a(t.getExtraSkill(e.es).name)},function(){return Array.isArray(e.spheres)&&e.spheres.some((function(e){return a(t.getItem(e).name)}))}].some((function(t){return t()}))}))}].some((function(t){return t()}))}))},onFilterUpdate:h()((function(){this.filteredSquads=this.filterSquads({name:this.nameFilter}),this.filterChanged=!1}),300),repositionTooltip:h()(function(){var t=S(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.fabModel&&!e){t.next=4;break}return t.next=3,this.$nextTick();case 3:this.showTooltip=!1;case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),200),getModuleName:function(t){var e=u["F"].find((function(e){return e.name===t}));return e?e.fullName:t},getSquadUrl:function(t){return this.$router.resolve({path:"/tools/squads/add",query:{import:"string"!==typeof t?Object(f["l"])(t):t}}).route.fullPath}}),watch:{isInternallyLoading:function(){var t=this;k.setValue((function(){return t.isInternallyLoading}))},squads:{immediate:!0,handler:function(){this.onFilterUpdate()}},nameFilter:function(){this.filterChanged=!0},currentPage:function(){window.scrollTo(0,0)},activeSquadDialog:function(t){t||(this.activeSquadIndex=-1)},sortedSquads:function(){this.currentPage=1},showTooltip:function(){var t=S(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=4;break}return t.next=3,this.$nextTick();case 3:this.showTooltip=!0;case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),showCopyModal:function(){var t=S(s.a.mark((function t(e){var n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$store.commit("setHtmlOverflowDisableState",!!e),e){t.next=6;break}return t.next=4,Object(l["b"])(1e3);case 4:n=document.querySelector("nav.v-toolbar").offsetHeight,Object(l["c"])(n,56);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},C=E,q=(n("7587"),n("2877")),P=Object(q["a"])(C,r,i,!1,null,null,null);e["default"]=P.exports},1700:function(t,e,n){},1791:function(t,e,n){"use strict";var r=n("1700"),i=n.n(r);i.a},"1b56":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"squad-card--share"},[n("card-tabs-container",{attrs:{tabs:t.tabConfig},model:{value:t.activeTabIndex,callback:function(e){t.activeTabIndex=e},expression:"activeTabIndex"}},[n("v-layout",{attrs:{slot:"markdown",column:t.$vuetify.breakpoint.smAndDown,row:t.$vuetify.breakpoint.mdAndUp},slot:"markdown"},[n("v-layout",{style:{"max-width":t.$vuetify.breakpoint.mdAndUp?"50%":"100%"},attrs:{column:"",wrap:""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("h2",{staticClass:"title"},[t._v("\n              Formatting\n            ")])]),n("v-flex",[n("v-select",{attrs:{items:t.possibleTargets,label:"Platform"},model:{value:t.target,callback:function(e){t.target=e},expression:"target"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"Use Bulleted List"},model:{value:t.useBullets,callback:function(e){t.useBullets=e},expression:"useBullets"}})],1)],1),n("v-divider",{staticClass:"mb-3"}),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("h2",{staticClass:"title"},[t._v("\n              Information\n            ")])]),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"List View"},model:{value:t.showByList,callback:function(e){t.showByList=e},expression:"showByList"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"Table View"},model:{value:t.showByTable,callback:function(e){t.showByTable=e},expression:"showByTable"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"Squad Name"},model:{value:t.showName,callback:function(e){t.showName=e},expression:"showName"}})],1),t.sparkResult?n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{disabled:!t.showName&&!t.showByTable,label:"Total Spark Percentage"},model:{value:t.showTotalSparkability,callback:function(e){t.showTotalSparkability=e},expression:"showTotalSparkability"}})],1):t._e(),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{disabled:!t.showByList,label:"Position"},model:{value:t.showPosition,callback:function(e){t.showPosition=e},expression:"showPosition"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"BB Order"},model:{value:t.showOrder,callback:function(e){t.showOrder=e},expression:"showOrder"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"Action"},model:{value:t.showAction,callback:function(e){t.showAction=e},expression:"showAction"}})],1),t.sparkResult?n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"Show Sparks per Unit"},model:{value:t.showSparkStatisticsByUnit,callback:function(e){t.showSparkStatisticsByUnit=e},expression:"showSparkStatisticsByUnit"}})],1):t._e(),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{disabled:!t.showByList,label:"Extra Skill"},model:{value:t.showExtraSkill,callback:function(e){t.showExtraSkill=e},expression:"showExtraSkill"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{disabled:!t.showByList,label:"Spheres"},model:{value:t.showSpheres,callback:function(e){t.showSpheres=e},expression:"showSpheres"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{disabled:!t.showByList,label:"SP Enhancements"},model:{value:t.showEnhancements,callback:function(e){t.showEnhancements=e},expression:"showEnhancements"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{disabled:!t.showByList,label:"Abbreviate Results"},model:{value:t.abbreviate,callback:function(e){t.abbreviate=e},expression:"abbreviate"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{disabled:!t.showByList||t.abbreviate||!t.showEnhancements,label:"SP Costs"},model:{value:t.showSpCost,callback:function(e){t.showSpCost=e},expression:"showSpCost"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-checkbox",{attrs:{label:"Share Link"},model:{value:t.showShareLink,callback:function(e){t.showShareLink=e},expression:"showShareLink"}})],1)],1)],1),n("v-flex",[n("text-viewer",{staticStyle:{height:"100%"},attrs:{inputText:t.markdownText,value:t.markdownText}})],1)],1),n("v-layout",{attrs:{slot:"code",row:""},slot:"code"},[n("one-line-text-viewer",{staticStyle:{flex:"0 1 100%"},attrs:{inputText:t.squadShorthand,label:"Code",value:t.squadShorthand}})],1),n("v-layout",{attrs:{slot:"link",row:""},slot:"link"},[n("one-line-text-viewer",{staticStyle:{flex:"0 1 100%"},attrs:{inputText:t.shareLink,label:"Link",value:t.shareLink}})],1)],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{flat:""},on:{click:function(e){return t.$emit("back")}}},[t._v("Back")])],1)],1)},i=[],a=n("00e0"),s=n("6a92"),o=n("34b9"),u=n("e5b6"),l=n("5517"),c=n("874d"),d=n("8398");function f(t,e){if(null==t)return{};var n,r,i=p(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function p(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var h={mixins:[d["a"]],props:{squad:{type:Object,required:!0},sparkResult:{required:!1}},components:{CardTabsContainer:u["a"],TextViewer:l["a"],OneLineTextViewer:c["a"]},computed:{tabConfig:function(){return["markdown","code","link"].map((function(t){return{name:t,slot:t}}))},copyableJson:function(){var t=this.squad,e=(t.id,f(t,["id"]));return e},markdownText:function(){return this.squadToMarkdown(this.squad,this)},squadShorthand:function(){return Object(s["l"])(this.squad)},shareLink:function(){var t=this.$router.resolve({path:"/tools/squads/add",query:{import:this.squadShorthand}}).href;return"".concat(location.protocol,"//").concat(location.host).concat(location.pathname).concat(t)},possibleTargets:function(){return["Discord","Reddit"]},sparkTextByUnit:function(){var t=this,e=new Map;return this.sparkResult&&this.squad.units.forEach((function(n){var r=t.sparkResult.squad.find((function(t){return n.position===t.position}));r&&e.set(n,"(".concat(r.actualSparks,"/").concat(r.possibleSparks,")"))})),e}},data:function(){return{activeTabIndex:0,updateTime:new Date,showPosition:!1,showAction:!1,showOrder:!1,showName:!1,useBullets:!1,abbreviate:!1,showSpCost:!1,showShareLink:!1,showExtraSkill:!1,showSpheres:!1,showEnhancements:!1,showSparkStatisticsByUnit:!0,showTotalSparkability:!0,showByList:!0,showByTable:!0,target:"Discord"}},mounted:function(){this.setWithPreset()},methods:{getDisplayNameForSquadUnit:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.getUnit(t.id);if(t.id===o["L"].EMPTY)e="**__".concat(r.name||t.id,"__**");else{var i,a=r.rarity&&8===r.rarity||t.id===o["L"].ANY?"OE+".concat(t.omniBoost||0," "):"".concat(r.rarity,"\\* "),s=r.name||t.id;i=n?t.type||o["i"].Lord:o["i"][t.type]||o["i"].L,e="**__".concat(a||"").concat(s," (").concat(i,")__**")}return e},squadToMarkdown:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.showPosition,i=void 0===r||r,a=n.showAction,s=void 0===a||a,o=n.showOrder,u=void 0===o||o,l=n.showName,c=void 0!==l&&l,d=n.useBullets,f=void 0===d||d,p=n.abbreviate,h=void 0!==p&&p,v=n.showSpCost,g=void 0===v||v,b=n.showShareLink,m=void 0!==b&&b,y=n.showExtraSkill,A=void 0!==y&&y,S=n.showSpheres,x=void 0!==S&&S,w=n.showEnhancements,O=void 0===w||w,k=n.showSparkStatisticsByUnit,E=void 0===k||k,C=n.showTotalSparkability,q=void 0===C||C,P=n.showByList,T=void 0===P||P,_=n.showByTable,j=void 0===_||_,I=[];if(c){var B=["".concat(e.name),q&&this.sparkResult&&"(".concat((100*this.sparkResult.weightedPercentage).toFixed(2),"%)")].filter((function(t){return t})).join(" ");I.push("# ".concat(B,"\n"))}if(T&&e.units.forEach((function(n,r){var a=[],o=f?"*":"",l=t.getDisplayNameForSquadUnit(n,t.abbreviate);a.push([o,l,r===e.lead&&"**[".concat(h?"L":"Leader","]**"),r===e.friend&&"**[".concat(h?"F":"Friend","]**"),(i||u||s)&&"-",[i&&n.position,[u&&n.bbOrder,s&&t.getActionText(n)].filter((function(t){return t})).join("-")].filter((function(t){return t})).join("; "),E&&t.sparkTextByUnit.get(n)].filter((function(t){return t})).join(" ")),f&&(o="\t*"),A&&n.es&&a.push([o,"**".concat(h?"ES":"Extra Skill",":**"),t.getExtraSkill(n.es).name||n.es].filter((function(t){return t})).join(" ")),x&&Array.isArray(n.spheres)&&n.spheres.length>0&&a.push([o,"**Spheres:**",n.spheres.map((function(e){return t.getItem(e).name||e})).join(", ")].filter((function(t){return t})).join(" ")),O&&n.sp&&t.getSpCost(n)>0&&a.push([o,"**SP Enhancements (".concat(t.getSpCost(n)," SP):**"),h&&n.sp,!h&&["\n",t.getSpText(n).map((function(t){return["\t".concat(f?"".concat(o," "):""),g&&"[".concat(t.cost," SP] - "),"**".concat(t.code,":** ").concat(t.text)].filter((function(t){return t})).join("")})).join("\n")].join("")].filter((function(t){return t})).join(" ")),I.push("".concat(a.join("\n"),"\n"))})),j&&I.push("".concat(this.getTableView(n),"\n")),m){var U="Reddit"===this.target?"[Save Squad](".concat(this.shareLink,")"):"Save Squad: ".concat(this.shareLink);I.push(U)}return I.join("\n")},getActionText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action||this.getUnit(t.id).sbb&&o["M"].SBB||this.getUnit(t.id).bb&&o["M"].BB||o["M"].ATK;return e.toUpperCase()},getSpCost:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getUnit(t.id).feskills,n=t.sp;return Object(a["o"])(e,n)},getSpText:function(t){var e=this.getUnit(t.id).feskills,n=t.sp;return e&&n?n.split("").map((function(t){return{code:t,skill:e[Object(a["w"])(t)]}})).filter((function(t){return t.skill})).map((function(t){return{code:t.code,text:Object(a["q"])(t.skill),cost:t.skill.skill.bp}})):[]},setWithPreset:function(){this.showOrder=!0,this.abbreviate=!1,this.showSpCost=!0,this.showShareLink=!0,this.showExtraSkill=!0,this.showSpheres=!0,this.showEnhancements=!0,this.showPosition=!0,this.showAction=!0,this.showName="Discord"===this.target,this.useBullets="Reddit"===this.target},getTableView:function(t){var e,n=this,r=t.showAction,i=void 0===r||r,a=t.showOrder,s=void 0===a||a,u=t.showName,l=void 0!==u&&u,c=t.showSparkStatisticsByUnit,d=void 0===c||c,f=t.showTotalSparkability,p=void 0===f||f,h=this.squad,v=this.sparkTextByUnit,g=this.getActionText,b="Discord"===this.target,m=o["Q"].map((function(t){var e=h.units.findIndex((function(e){return e.position===t})),r=h.units[e],a=n.getDisplayNameForSquadUnit(r,n.abbreviate),o=[a,e===h.lead&&"**[L]**",e===h.friend&&"**[F]**","-",[s&&r.bbOrder,i&&g(r)].filter((function(t){return t})).join("-"),d&&v.get(r)].filter((function(t){return t})).join(" ");return b?o.replace(/\*\*/g,"").replace(/__/g,""):o})),y=this.sparkResult&&"".concat((100*this.sparkResult.weightedPercentage).toFixed(2),"%")||"",A=p&&!l;if(b){var S=m.reduce((function(t,e,n){return Math.max(t,n%2===0?e.length:0)}),0),x=m.map((function(t,e){return"".concat(t.padEnd(S," ")).concat(e%2===0?" | ":"\n")})).join("").trim(),w="```";e=[w,A&&y,x,w].filter((function(t){return t})).join("\n")}else{var O=m.map((function(t,e){return"".concat(e%2===0?"| ":"").concat(t).concat(e%2===0?" | ":" |\n")}));e=["|".concat(A?" ".concat(y):""," | |"),"| --- | --- |",O.join("").trim()].join("\n")}return e}},watch:{target:function(){this.setWithPreset()}}},v=h,g=(n("97a2"),n("2877")),b=Object(g["a"])(v,r,i,!1,null,null,null);e["a"]=b.exports},2393:function(t,e,n){"use strict";var r=n("e7ab"),i=n.n(r);i.a},"2b3e0":function(t,e,n){"use strict";var r=n("c7e9"),i=n.n(r);i.a},"2c86":function(t,e,n){},3505:function(t,e,n){},"38fd1":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"buff-expandable-list"},[t.isVisuallyLoadingList?n("loading-indicator",{attrs:{progress:t.loadProgress,loadingMessage:"Loading list..."}}):t._e(),t.isVisuallyLoadingList||0!==t.sortedEffectIds.length?t._e():n("div",{staticClass:"my-2"},[t._t("noentries",[n("span",[t._v("No entries of type ["+t._s(t.effectType)+"] were found.")])])],2),n("delayed-v-for-expansion-panel",{directives:[{name:"show",rawName:"v-show",value:!t.isVisuallyLoadingList,expression:"!isVisuallyLoadingList"}],attrs:{entries:t.sortedEffectIds,expand:"",focusable:""},on:{start:t.handleLoadStart,end:t.handleLoadEnd,progress:function(e){return t.loadProgress=e}},scopedSlots:t._u([{key:"header",fn:function(e){var r=e.arrayEntry;return[n("div",{class:t.getEntryHeaderClasses(r)},[n("span",{staticClass:"expandable-list-entry--title subheading",domProps:{textContent:t._s(r+": "+t.effectNameById[r])}}),t._t("allentrypreview",t._l(t.getSourcesForEffectId(r),(function(e,r){return n("div",{key:r},[t._v("\n            "+t._s(e)+"\n          ")])})),{entries:t.getSourcesForEffectId(r),effectId:r})],2)]}},{key:"default",fn:function(e){var r=e.arrayEntry,i=e.index;return[t.viewedTables[i]?[n("value-subgrid",{directives:[{name:"show",rawName:"v-show",value:t.expandedTables[i],expression:"expandedTables[index]"}],attrs:{properties:t.propsById[r],values:t.getSourcesForEffectId(r).map((function(e){return t.getValueSubgridEntry(e.source,r)})),allowOverflow:!0,minValueColumnWidth:"300px",getTextForSource:t.getTextForSource},scopedSlots:t._u([{key:"value-header",fn:function(e){var r=e.entry;return[t._t("value-header",[n("span",[t._v(t._s(r.identifier))])],{entry:r.identifier})]}}],null,!0)})]:t._e()]}}],null,!0),model:{value:t.expandedTables,callback:function(e){t.expandedTables=e},expression:"expandedTables"}})],1)},i=[],a=n("d239"),s=n("abcf"),o=n("c7df"),u=n("080f"),l=n("fca9"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"generic-value-subgrid",style:t.mainValueGridStyle},[t.showHeaders?[n("span",{staticClass:"property-cell header-cell"},[n("v-btn",{attrs:{flat:""},on:{click:function(e){t.lockPropertyColumn=!t.lockPropertyColumn}}},[n("span",{staticStyle:{"text-transform":"capitalize"}},[t._v("Buff Property")]),n("v-icon",[t._v(t._s(t.lockPropertyColumn?"lock":"lock_open"))])],1)],1),t._l(t.values,(function(e,r){return n("span",{key:r,staticClass:"value-cell header-cell",style:t.convertNumberToColumnSpanStyle(t.columnCountMappingByValueEntry.get(e))},[t._t("value-header",[t._v("\n        "+t._s(e.identifier)+"\n      ")],{entry:e})],2)}))]:t._e(),t._l(t.properties,(function(e,r){return[n("span",{key:e+"-"+r+"-property",class:t.getClassForProperty(e,r),domProps:{textContent:t._s(e)}}),t._l(t.values,(function(i,a){return[t._l(i.values,(function(s,o){return["sourcePath"===e?n("source-path-cell",{key:e+"-"+r+"-"+a+"-"+o+"-custom-value",class:t.getClassForValue(o,i.values,r,e),attrs:{value:t.getPropertyValue(e,s),source:i.identifier,getTextForSource:t.getTextForSource}}):"triggeredOn"===e?n("triggered-on-cell",{key:e+"-"+r+"-"+a+"-"+o+"-custom-value",class:t.getClassForValue(o,i.values,r,e),attrs:{value:t.getPropertyValue(e,s)}}):n("span",{key:e+"-"+r+"-"+a+"-"+o+"-value",class:t.getClassForValue(o,i.values,r,e),domProps:{textContent:t._s(t.getPropertyValue(e,s))}})]}))]}))]}))],2)},d=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"generic-source-path-cell"},[n("span",{style:t.cellStyle,domProps:{textContent:t._s(t.displayValue)}})])},p=[],h=n("c0a4"),v=n.n(h);function g(t,e){return S(t)||A(t,e)||m(t,e)||b()}function b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t,e){if(t){if("string"===typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){i=!0,a=u}finally{try{r||null==o["return"]||o["return"]()}finally{if(i)throw a}}return n}}function S(t){if(Array.isArray(t))return t}var x=Object.freeze({"unit.ls":"green darken-3","unit.es":"orange darken-4","unit.bb":"blue-grey","unit.sbb":"yellow darken-3","unit.ubb":"red darken-3","unit.sp":"light-green darken-3",es:"purple lighten-1",sphere:"grey"}),w=Object.freeze({"unit.ls":"Leader Skill","unit.es":"Extra Skill","unit.bb":"Brave Burst","unit.sbb":"Super Brave Burst","unit.ubb":"Ultimate Brave Burst","unit.sp":"SP Enhancement"}),O={props:{value:{type:String,default:""},source:{type:Object,default:function(){}},getTextForSource:{type:Function,required:!0}},computed:{materialColor:function(){return x[this.value]||"grey"},hexColor:function(){var t=this.materialColor.split(" "),e=g(t,2),n=e[0],r=e[1];if(n.includes("-")){var i=function(t){return[t[0].toUpperCase(),t.slice(1)].join("")},a=n.split("-");n=[a[0],a.slice(1).map(i)].join("")}return r&&(r=r.replace(/-/g,"")),Object(u["j"])(v.a,[n,r||"base"])},cellStyle:function(){return{"border-color":this.hexColor}},displayValue:function(){var t=w[this.value];return t=this.getTextForSource(this.value,this.source,t)||t,t||this.value}}},k=O,E=(n("4c7d"),n("2877")),C=Object(E["a"])(k,f,p,!1,null,null,null),q=C.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"generic-triggered-on-cell"},[n("span",{style:t.cellStyle,domProps:{textContent:t._s(t.displayValue)}})])},T=[];function _(t,e){return M(t)||U(t,e)||I(t,e)||j()}function j(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(t,e){if(t){if("string"===typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(t,e):void 0}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function U(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){i=!0,a=u}finally{try{r||null==o["return"]||o["return"]()}finally{if(i)throw a}}return n}}function M(t){if(Array.isArray(t))return t}var L=Object.freeze({bb:"blue-grey",sbb:"yellow darken-3",ubb:"red darken-3"}),D=Object.freeze({bb:"Brave Burst",sbb:"Super Brave Burst",ubb:"Ultimate Brave Burst"}),F={props:{value:{type:String,default:""}},computed:{materialColor:function(){return L[this.value]},hexColor:function(){if(!this.materialColor)return"transparent";var t=this.materialColor.split(" "),e=_(t,2),n=e[0],r=e[1];if(n.includes("-")){var i=function(t){return[t[0].toUpperCase(),t.slice(1)].join("")},a=n.split("-");n=[a[0],a.slice(1).map(i)].join("")}return r&&(r=r.replace(/-/g,"")),Object(u["j"])(v.a,[n,r||"base"])},cellStyle:function(){return{"border-color":this.hexColor}},displayValue:function(){return D[this.value]||this.value}}},N=F,R=(n("b404"),Object(E["a"])(N,P,T,!1,null,null,null)),V=R.exports;function z(t){return z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var W={props:{properties:{type:Array,default:function(){return[]}},values:{type:Array,default:function(){return[{identifier:{},values:[]}]}},showHeaders:{type:Boolean,default:!0},allowOverflow:{type:Boolean,default:!1},minValueColumnWidth:{type:String,default:"5em"},freezePropertyColumn:{type:Boolean,default:!1},getTextForSource:{type:Function,default:function(t,e,n){return n||t}}},components:{SourcePathCell:q,TriggeredOnCell:V},computed:{numValueColumns:function(){var t=this.columnCountMappingByValueEntry;return this.values.reduce((function(e,n){return e+t.get(n)}),0)},columnCountMappingByValueEntry:function(){var t=new WeakMap,e=this.properties;return this.values.forEach((function(n){var r=n.values.filter((function(t){return e.some((function(e){return t.hasOwnProperty(e)}))})),i=Math.max(1,r.length);t.set(n,i)})),t},mainValueGridStyle:function(){var t=this,e=this.$vuetify.breakpoint.smAndDown?"10em":"17.5em",n="minmax(".concat(this.minValueColumnWidth,", 1fr)"),r=[e];return this.values.forEach((function(e){var i=t.columnCountMappingByValueEntry.get(e);i>1?r.push("repeat(".concat(i,", minmax(calc(").concat(t.minValueColumnWidth," / ").concat(i,"), 1fr))")):r.push(n)})),{"grid-template-columns":r.join(" "),overflow:this.allowOverflow?"auto":void 0}},customCellsByPropertyName:function(){return["sourcePath","triggeredOn"]}},data:function(){return{lockPropertyColumn:!1}},mounted:function(){this.lockPropertyColumn=this.freezePropertyColumn},methods:{getClassForProperty:function(t,e){var n;return n={"property-cell":!0},$(n,e%2===0?"even-row":"odd-row",!0),$(n,"only-row",0===this.properties.length),$(n,"sticky-property-cell",this.lockPropertyColumn),n},getClassForValue:function(t,e,n,r){var i;return i={"value-cell":!0},$(i,n%2===0?"even-row":"odd-row",!0),$(i,"is-last-value-cell",t===e.length-1),$(i,"is-custom-cell",this.isCustomCell(r)),i},convertNumberToColumnSpanStyle:function(t){return{"grid-column-start":"span ".concat(t)}},isProcBuffList:function(t){return"triggered effect"===t},isCustomCell:function(t){return this.customCellsByPropertyName.includes(t)},getPropertyValue:function(t,e){var n=void 0!==e[t]?e[t]:"-",r="object"===z(n)?JSON.stringify(n):n;return Array.isArray(n)&&0===n.length?"".concat(r," (None)"):r}}},K=W,H=(n("1791"),Object(E["a"])(K,c,d,!1,null,null,null)),Y=H.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-expansion-panel",t._b({attrs:{value:t.value},on:{input:function(e){return t.$emit("input",e)}}},"v-expansion-panel",t.$attrs,!1),t._l(t.internalEntries,(function(e,r){return n("v-expansion-panel-content",{key:t.getKeyFunction(e,r)},[n("template",{slot:"header"},[t._t("header",[t._v("\n        Header\n      ")],{arrayEntry:e,index:r})],2),t._t("default",[n("div",[t._v(t._s(e))])],{arrayEntry:e,index:r})],2)})),1)},G=[],J=n("7f0c"),X={mixins:[J["a"]],props:{value:{required:!1}}},Z=X,tt=Object(E["a"])(Z,Q,G,!1,null,null,null),et=tt.exports,nt=n("b758");function rt(t,e){return ut(t)||ot(t,e)||at(t,e)||it()}function it(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function at(t,e){if(t){if("string"===typeof t)return st(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?st(t,e):void 0}}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ot(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){i=!0,a=u}finally{try{r||null==o["return"]||o["return"]()}finally{if(i)throw a}}return n}}function ut(t){if(Array.isArray(t))return t}function lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ct=new l["a"]({prefix:"[BuffExpandableList]"}),dt={props:{sources:{type:Array,required:!0},getEffectsFromSource:{type:Function,default:function(){return[]}},inputEffectMappingBySource:{type:WeakMap,default:function(){return new WeakMap}},highlightedBuffIds:{type:Array,default:function(){return[]}},effectType:{type:String,required:!0},getTextForSource:{type:Function,default:function(t,e){return t}}},components:{ValueSubgrid:Y,DelayedVForExpansionPanel:et,LoadingIndicator:nt["a"]},computed:{blacklistedKeys:function(){return Object.freeze(["passive id","unknown passive id","proc id","unknown proc id","add to bb","add to sbb","add to ubb","trigger on bb","trigger on sbb","trigger on ubb"])},weightedCompareOptions:function(){return Object.freeze({beginning:["conditions","esConditions","effect delay time(ms)/frame"],end:["passive target","target area","target type","buff turns","sp_type","sourceSpCode","triggeredOn","sourcePath"]})},effectsById:function(){var t=this.getEffectsFromSource,e=this.getEffectDetails,n=this.inputEffectMappingBySource,r=this.sources.reduce((function(r,i){var a=n.get(i)||t(i);return a.forEach((function(t){var n=e(t);n.source=i,r[n.id]||(r[n.id]=[]),r[n.id].push(Object.freeze(n))})),r}),{});return Object.freeze(r)},propsById:function(){var t=this.effectsById,e=this.weightedCompareOptions,n=Object.keys(t).reduce((function(n,r){var i=new Set,a=t[r];return a.forEach((function(t){Object.keys(t.effect).forEach((function(t){i.add(t)}))})),n[r]=Object.freeze(Array.from(i).sort((function(t,n){return Object(u["l"])(t,n,e)}))),n}),{});return Object.freeze(n)},sortedEffectIds:function(){return Object.freeze(Object.keys(this.effectsById).sort((function(t,e){return+t-+e})))},effectNameById:function(){var t="".concat(this.effectType," id"),e=this.sortedEffectIds.reduce((function(e,n){return e[n]=Object(o["a"])(lt({},t,n)),e}),{});return Object.freeze(e)}},data:function(){return{expandedTables:[],viewedTables:{},valueSubgridEntryByEntryByEffectId:{},loadStartToken:0,loadingList:!0,isVisuallyLoadingList:!0,loadingDebouncer:null,highlightCheckerTimeout:null,loadProgress:-1}},beforeDestroy:function(){this.loadingDebouncer&&this.loadingDebouncer.dispose()},methods:{getEffectDetails:function(t){var e=this,n=Object(s["getEffectId"])(t),r={},i=Object(o["c"])(t);return Object.keys(i).filter((function(t){return!e.blacklistedKeys.includes(t)})).forEach((function(t){r[t]=i[t]})),{id:n,effect:r}},handleLoadStart:function(t){this.loadStartToken=t,this.loadingList=!0,this.loadProgress=-1},handleLoadEnd:function(t){this.loadStartToken===t&&(this.loadingList=!1)},getValueSubgridEntry:function(t,e){this.valueSubgridEntryByEntryByEffectId[e]||(this.valueSubgridEntryByEntryByEffectId[e]=new WeakMap);var n=this.valueSubgridEntryByEntryByEffectId[e];if(!n.has(t)){var r={identifier:t,values:this.effectsById[e].filter((function(e){return e.source===t})).map((function(t){return t.effect}))};n.set(t,r)}return n.get(t)},toggleEffectView:function(t){this.expandedTables[t]=!this.expandedTables[t]},toggleAllEffectViews:function(){this.expandedTables.length===this.sortedEffectIds.length?this.expandedTables=[]:this.expandedTables=this.sortedEffectIds.map((function(t,e){return e}))},isEmptyArray:function(t){return Array.isArray(t)&&0===t.length},getSourcesForEffectId:function(t){var e=this.effectsById[t],n=new Map;return e||ct.warn("Missing effect id array [".concat(t,"]"),this.effectsById),(e||[]).forEach((function(t){var e=n.get(t.source)||new Set;e.add(t.effect.sourcePath),n.set(t.source,e)})),Array.from(n.entries()).map((function(t){var e=rt(t,2),n=e[0],r=e[1];return{source:n,sourcePaths:Array.from(r)}}))},isHighlightedHeader:function(t){return this.highlightedBuffIds.includes(t)},highlightHeaders:function(){var t=Array.from(this.$el.querySelectorAll(".highlighted-header")),e=!!this.$store.state.settings.lightMode,n=["blue",e?"lighten-4":"darken-4"];t.forEach((function(t){var e,r=t.parentNode;(e=r.classList).add.apply(e,n),t.classList.add("is-highlighted")}))},ensureHeadersAreHighlighted:function(){var t=this;if(!this.highlightCheckerTimeout){var e=0,n=function n(){var r=!!t.$el.querySelector(".highlighted-header:not(.is-highlighted)");r&&!t.isVisuallyLoadingList?(e=0,t.highlightHeaders(),t.highlightCheckerTimeout=setTimeout(n,1e3)):e<3?(e++,t.highlightCheckerTimeout=setTimeout(n,1e3)):t.highlightCheckerTimeout=null};n()}},getEntryHeaderClasses:function(t){return{"expandable-list-entry--header":!0,"highlighted-header":this.isHighlightedHeader(t)}}},watch:{expandedTables:function(t){var e=this;t.forEach((function(t,n){t&&!0!==e.viewedTables[n]&&(e.viewedTables[n]=!0)}))},loadingList:function(t){var e=this;this.loadingDebouncer||(this.loadingDebouncer=new a["a"]((function(t){e.isVisuallyLoadingList=t}))),this.loadingDebouncer.setValue((function(){return e.loadingList})),this.$emit("loadstatechange",t)},isVisuallyLoadingList:function(t){t||this.ensureHeadersAreHighlighted()}}},ft=dt,pt=(n("ad30"),Object(E["a"])(ft,r,i,!1,null,null,null));e["a"]=pt.exports},3971:function(t,e,n){},"3c85":function(t,e,n){t.exports=function(){return new Worker(n.p+"1a0318159d80430ee486.worker.js")}},"3e0d":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-entry-card",{staticStyle:{height:"100%"},attrs:{to:t.to}},[n("v-container",{staticClass:"pa-3",attrs:{fluid:""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",[n("div",{staticClass:"d-flex-container items-center"},[t.hasSphereType?n("sphere-type-icon",{staticClass:"mr-1",attrs:{category:t.entry["sphere type"],displaySize:24}}):t._e(),n("h1",{staticClass:"subheading d-inline-block",staticStyle:{"word-break":"break-word"}},[n("b",{domProps:{textContent:t._s(t.entry.name)}})])],1)])],1),n("v-layout",{staticClass:"d-align-items-center",attrs:{row:""}},[n("v-flex",{staticClass:"text-xs-center pb-0",attrs:{xs3:""}},[n("item-thumbnail",{attrs:{src:t.getImageUrl(t.entry.id,t.entry),rarity:t.rarity,type:t.entry.type,isRaidItem:!!t.entry.raid,imageTitle:t.entry.name,displayWidth:t.thumbnailSize,displayHeight:t.thumbnailSize}})],1),n("v-flex",{staticClass:"pb-0",staticStyle:{"word-break":"break-word"},attrs:{xs9:""}},[t._v("\n        "+t._s(t.entry.desc)+"\n      ")])],1),n("v-layout",{staticClass:"d-align-items-center",attrs:{row:""}},[n("v-flex",{attrs:{xs6:""}},[n("h2",{staticClass:"subheading"},[t._v(t._s(t.itemType))])]),n("v-flex",{attrs:{xs3:""}},[t._v("\n        x"+t._s(t.entry.max_stack)+"\n      ")]),n("v-flex",{attrs:{xs3:""}},[n("div",{staticClass:"d-flex-container items-center content-flex-end"},[t.rarity<8?n("span",[t._v(t._s(t.rarity))]):t._e(),n("rarity-icon",{class:{"ml-1":8!==t.rarity},attrs:{rarity:t.rarity,displaySize:18}})],1)])],1)],1)],1)},i=[],a=n("2f62"),s=n("50a6"),o=n("aeb4"),u=n("69c9"),l=n("e4b9"),c=n("5ab2");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h={mixins:[s["a"]],components:{SphereTypeIcon:o["a"],RarityIcon:u["a"],ItemThumbnail:l["a"]},computed:f({},Object(a["c"])("items",["getImageUrl"]),{rarity:function(){return this.entry.rarity},hasSphereType:function(){return Object(c["i"])(this.entry)},itemType:function(){return Object(c["g"])(this.entry)},thumbnailSize:function(){var t=this.$vuetify.breakpoint;return t.xlOnly?64:t.mdAndUp?56:48}})},v=h,g=n("2877"),b=Object(g["a"])(v,r,i,!1,null,null,null);e["a"]=b.exports},"3f51":function(t,e,n){},4764:function(t,e,n){"use strict";n.d(e,"d",(function(){return y})),n.d(e,"e",(function(){return w})),n.d(e,"c",(function(){return O})),n.d(e,"b",(function(){return k})),n.d(e,"a",(function(){return C}));var r=n("00e0"),i=n("5ab2"),a=n("34b9"),s=n("c7df");function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function d(t,e){if(null==t)return{};var n,r,i=f(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function f(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function p(t,e){return m(t)||b(t,e)||v(t,e)||h()}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(t,e){if(t){if("string"===typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){i=!0,a=u}finally{try{r||null==o["return"]||o["return"]()}finally{if(i)throw a}}return n}}function m(t){if(Array.isArray(t))return t}function y(t){var e={unit:[],item:[],sphereType:[]};return t.conditions&&0!==t.conditions.length?(t.conditions.forEach((function(t){void 0!==t["sphere category required"]?e.sphereType.push(t["sphere category required (raw)"]):void 0!==t["item required"]?Array.isArray(t["item required"])&&t["item required"].length>0?t["item required"].forEach((function(t){e.item.includes(t)||e.item.push(t)})):e.item.push(t["item required"]):void 0!==t["unit required"]?Array.isArray(t["unit required"])&&t["unit required"].length>0?t["unit required"].forEach((function(t){e.unit.includes(t)||e.unit.push(t)})):e.unit.push(t["unit required"]):void 0!==t.unknown&&e.item.push("unknown sphere type ".concat(t["unknown"]))})),e):e}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return{name:t,id:t}};return t.map((function(t){var n=[];if(t.name)n.push(t.name);else{var i=t.id?t.id.toString():t.toString();if(+i%10===0){var a=Object(r["l"])(+i,e)||{};n.push("any evolution of ".concat(a.name||i))}else{var s=e(i)||{};n.push(s.name||i)}}return n})).reduce((function(t,e){return t.concat(e)}),[])}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return{name:t,id:t}};return t.map((function(t){var n=e(t.toString())||{};return n.name||t}))}function x(t,e){var n=t.unit,r=void 0===n?[]:n,a=t.item,s=void 0===a?[]:a,o=t.sphereType,u=void 0===o?[]:o,l=e.unitById,c=e.itemById,d=[];if(r.length>0){var f=A(r,l);1===r.length&&1===f.length?d.push("".concat(f[0]," is in squad")):d.push("".concat(f.join(" or ")," are in squad"))}if(s.length>0){var p=S(s,c);1===s.length?d.push("".concat(p[0]," is equipped")):d.push("".concat(p.join(" or ")," are equipped"))}if(u.length>0){var h=u.map((function(t){return Object(i["h"])(+t)}));1===u.length?d.push("".concat(h[0]," sphere is equipped")):d.push("".concat(h.join(" or ")," spheres are equipped"))}return d.join(" or ")}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=e.unitById,r=e.itemById,i={};return i["No Condition"]=t.filter((function(t){return 0===t.conditions.length})),t.filter((function(t){return t.conditions.length>0})).forEach((function(t){var e=x(y(t),{unitById:n,itemById:r});i[e]||(i[e]=[]),i[e].push(t)})),Object.entries(i).map((function(t){var e=p(t,2),n=e[0],r=e[1];return{condition:n,effects:r.map((function(t){t.conditions;var e=d(t,["conditions"]);return e}))}})).filter((function(t){var e=t.effects;return e.length>0}))}function O(t){var e=["rarity","name","id","desc"];return"object"===c(t)&&e.every((function(e){return void 0!==t[e]}))}function k(){return{id:0,name:"None",desc:"No Extra Skill selected",rarity:0}}function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t&&Array.isArray(t.effects)?Array.from(t.effects):[]}function C(t){var e=t.skill,n=void 0===e?{}:e,r=t.target,i=void 0===r?a["O"].PARTY:r,o=t.effectType,l=void 0===o?a["K"].PROC:o,c=E(n).map((function(t){return u({},t,{sourcePath:"es"})}));return Object(s["b"])({elgifEffects:c,target:i,effectType:l})}},"4c70":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("generic-sprite-icon",{attrs:{iconTitle:t.label,iconWidth:t.sheetSize[0],iconHeight:t.sheetSize[1],sheetWidth:t.sheetSize[0],sheetHeight:t.sheetSize[1],displayWidth:t.displaySize,displayHeight:t.displaySize,src:t.iconSrc,iconX:0,iconY:0}})},i=[],a=n("ef0e"),s={props:{displaySize:{type:Number,default:52}},components:{GenericSpriteIcon:a["a"]},computed:{label:function(){return"Leader Unit"},iconSrc:function(){return n("c31a")},sheetSize:function(){return[17,22]}}},o=s,u=n("2877"),l=Object(u["a"])(o,r,i,!1,null,null,null);e["a"]=l.exports},"4c7d":function(t,e,n){"use strict";var r=n("a004"),i=n.n(r);i.a},"4db1":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-selector",{attrs:{showCancelButton:t.showCancelButton,value:t.nameFilter,hasSelection:t.hasSelection,requiredModules:t.requiredModules,allEntryIds:t.allIds},on:{input:function(e){return t.nameFilter=(e||"").toLowerCase()},cancel:function(e){return t.$emit("cancel")}},scopedSlots:t._u([{key:"entries",fn:function(e){var r=e.entries;return n("v-layout",{attrs:{row:"",wrap:""}},t._l(r,(function(e){return n("v-flex",{key:e,attrs:{xs12:"",sm6:"",md4:"",xl3:""}},[n("entry-card",{staticClass:"ma-2",staticStyle:{background:"var(--background-color)",cursor:"pointer"},attrs:{entry:t.pageDb[e]},nativeOn:{click:function(n){return t.sendEntry(e)}}})],1)})),1)}}])})},i=[],a=n("d939"),s=n("de7e"),o=n("de82"),u=Object(o["b"])("units"),l={props:{showCancelButton:{type:Boolean,default:!0}},components:{BaseSelector:a["a"],EntryCard:s["a"]},computed:{requiredModules:function(){return["units"]},pageDb:function(){return this.$store.state.units.pageDb},allIds:function(){var t=this,e=Object.keys(this.pageDb);return this.nameFilter?e.filter((function(e){return t.hasName(t.pageDb[e].name,t.nameFilter)})):e}},data:function(){return{nameFilter:"",hasSelection:!1}},methods:{hasName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.toLowerCase().includes(e)},sendEntry:function(t){this.hasSelection=!0,this.$emit("input",{id:t,data:u.getById({server:this.$store.state.settings.activeServer,id:t}).catch((function(){return{}}))})}}},c=l,d=n("2877"),f=Object(d["a"])(c,r,i,!1,null,null,null);e["a"]=f.exports},5044:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"sp-table"},[n("thead",[n("th",{staticClass:"sp-column"},[n("v-checkbox",{staticClass:"mt-0",attrs:{label:t.activeSkillSum+" SP","input-value":"all"===t.overallState,indeterminate:"some"===t.overallState,"hide-details":""},nativeOn:{click:function(e){return t.toggleOverallState(e)}}})],1),n("th",{staticClass:"type-column"},[n("v-subheader",{staticClass:"flex-container align-center justify-center px-0"},[t._v("Type")])],1),n("th",{staticClass:"description-column"},[n("v-subheader",{staticClass:"flex-container align-center px-0"},[t._v("Description")])],1)]),n("tbody",[t._l(t.feSkills,(function(e,r){return[n("tr",{key:r+"-content",class:"content-row content-row--"+(r%2===0?"even":"odd")},[n("td",{staticClass:"sp-column"},[n("v-checkbox",{attrs:{label:e.skill.bp+" SP","input-value":t.selectedSpEntries.includes(t.spIndexToCode(r))},nativeOn:{click:function(n){return t.toggleSpEntry(r,e)}}})],1),n("td",{staticClass:"type-column text-xs-center"},[n("sp-icon",{attrs:{category:+e.category,displaySize:24}})],1),n("td",{staticClass:"description-column py-2"},[n("v-layout",{attrs:{row:"",wrap:"","align-center":"","justify-space-between":""}},[n("v-flex",{attrs:{xs12:"",sm8:""}},[n("span",{staticClass:"d-block",domProps:{innerHTML:t._s(t.getSpDescription(r))}}),e.dependency?n("i",[t._v("\n                "+t._s(t.getSpDependencyText(e))+"\n              ")]):t._e()]),n("v-flex",{attrs:{xs12:"",sm4:""}},[t.showTables.includes(r)?n("v-btn",{attrs:{block:"",flat:""},on:{click:function(e){t.showTables=t.showTables.filter((function(t){return t!==r}))}}},[t._v("\n                Hide Data\n              ")]):n("v-btn",{attrs:{block:"",flat:""},on:{click:function(e){return t.showTables.push(r)}}},[t._v("\n                Show Data\n              ")])],1)],1)],1)]),n("v-slide-y-transition",{key:r+"-table"},[n("tr",{directives:[{name:"show",rawName:"v-show",value:t.showTables.includes(r),expression:"showTables.includes(index)"}],class:"buff-row buff-row--"+(r%2===0?"even":"odd")},[n("td",{staticStyle:{"overflow-x":"auto"},attrs:{colspan:"3"}},[n("buff-table",{staticClass:"mb-2",attrs:{effects:t.getSpEffects(e,!0),showHeaders:!0}})],1)])])]}))],2)])},i=[],a=n("00e0"),s=n("b047"),o=n.n(s),u=n("4427"),l=n("be8b"),c={props:{feSkills:{type:Array,required:!0},value:{type:String,default:""}},components:{SpIcon:u["a"],BuffTable:l["a"]},computed:{allEnhancementsCode:function(){return this.feSkills.map((function(t,e){return Object(a["x"])(e)})).join("")},allEnhancementsSum:function(){return Object(a["o"])(this.feSkills,this.allEnhancementsCode)},overallState:function(){return this.activeSkillSum===this.allEnhancementsSum?"all":0===this.activeSkillSum?"none":"some"},allEffects:function(){var t=this;return this.feSkills?this.feSkills.map((function(e){return t.getSpEffects(e,!1)})).reduce((function(t,e){return t.concat(e)}),[]):[]}},data:function(){return{selectedSpEntries:[],activeSkillSum:0,showTables:[],effectCache:new WeakMap,cacheChangeToken:Date.now()}},mounted:function(){this.computeActiveSum()},methods:{getSpEffects:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?(this.effectCache.has(t)||(this.effectCache.set(t,Object(a["r"])(t)),this.cacheExchangeToken=Date.now()),this.effectCache.get(t)):Object(a["r"])(t)},getSpDescription:function(t){return"<b>".concat(Object(a["x"])(t),"</b>: ").concat(Object(a["q"])(this.feSkills[t]))},getSpDependencyText:function(t){return Object(a["p"])(t,this.feSkills)},spIndexToCode:a["x"],toggleOverallState:function(){"all"===this.overallState?this.selectedSpEntries=[]:this.selectedSpEntries=this.allEnhancementsCode.split("")},computeActiveSum:o()((function(){this.activeSkillSum=Object(a["o"])(this.feSkills,this.selectedSpEntries.join(""))}),50),toggleSpEntry:function(t,e){var n=Object(a["x"])(t),r=this.selectedSpEntries.includes(n),i=this.selectedSpEntries.slice();if(r){var s=Object(a["d"])(e,this.feSkills);i=i.filter((function(t){return t!==n&&!s.includes(t)}))}else{i.push(n);var o=Object(a["c"])(e,this.feSkills);o.forEach((function(t){i.includes(t)||i.push(t)}))}this.selectedSpEntries=i}},watch:{value:{immediate:!0,handler:function(t){this.selectedSpEntries=t.split("")}},selectedSpEntries:function(t){this.computeActiveSum();var e=t.slice().sort().join("");e!==this.value&&this.$emit("input",e)}}},d=c,f=(n("d41e"),n("2877")),p=Object(f["a"])(d,r,i,!1,null,null,null);e["a"]=p.exports},"51a2":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("module-checker",{attrs:{requiredModules:t.requiredModules,ensureDbSync:!0}},[n("v-container",[n("v-layout",{attrs:{column:""}},[n("v-flex",[n("v-card",[n("card-tabs-container",{attrs:{tabs:t.tabConfig},model:{value:t.activeTabIndex,callback:function(e){t.activeTabIndex=e},expression:"activeTabIndex"}},[n("v-layout",{attrs:{slot:"squad",column:""},slot:"squad"},[n("v-flex",[n("squad-list-card-editable",{attrs:{flat:"",squad:t.squad,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,isLoadingInParent:t.isLoadingSquadData},on:{selectedindex:function(e){return t.selectedIndex=e},newsquad:function(e){return t.squad=e},newunits:function(e){return t.squad.units=e},save:t.onSuccessfulSave}})],1)],1),n("v-layout",{attrs:{slot:"import-code",column:""},slot:"import-code"},[n("v-flex",[n("v-text-field",{model:{value:t.inputCode,callback:function(e){t.inputCode=e},expression:"inputCode"}})],1),t.parsingCode?n("v-flex",[n("loading-indicator",{attrs:{loadingMessage:"Parsing input code"}})],1):t.parseState.type?n("v-flex",[n("v-alert",{staticClass:"squad-message-alert",attrs:{outline:"",value:!0,type:t.parseState.type}},[n("div",[n("div",{staticClass:"d-flex-container items-center"},[n("span",{staticStyle:{flex:"auto"}},[t._v(t._s(t.parseState.message))]),t.warningMessages.length>0?n("v-btn",{staticStyle:{flex:"none"},attrs:{flat:"",icon:""},on:{click:function(e){t.showWarnings=!t.showWarnings}}},[n("v-icon",[t._v(t._s(t.showWarnings?"keyboard_arrow_up":"keyboard_arrow_down"))])],1):t._e()],1),t.warningMessages.length>0?n("div",[n("v-expansion-panel",{attrs:{value:t.showWarnings?0:-1},on:{input:function(e){return t.showWarnings=0===e}}},[n("v-expansion-panel-content",{key:0},[n("v-list",t._l(t.warningMessages,(function(e){return n("v-list-tile",{key:e},[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"pl-2"},[t._v("\n                                  "+t._s(e)+"\n                                ")])],1)],1)})),1)],1)],1)],1):t._e()])])],1):t._e(),n("v-layout",{attrs:{"justify-end":""}},[n("v-flex",{staticStyle:{"flex-grow":"0"}},[n("v-btn",{attrs:{disabled:!t.inputCode||t.parsingCode,flat:""},on:{click:t.attemptSquadImport}},[t._v("\n                    Import\n                  ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},i=[],a=n("a34a"),s=n.n(a),o=n("f022"),u=n("6a92"),l=n("fca9"),c=n("2f62"),d=n("88fe"),f=n("e5b6"),p=n("be55"),h=n("b758");function v(t,e){if(null==t)return{};var n,r,i=g(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function g(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function b(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(r,i)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){b(a,r,i,s,o,"next",t)}function o(t){b(a,r,i,s,o,"throw",t)}s(void 0)}))}}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){S(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x=new l["a"]({prefix:"[SquaddAdd]"}),w={props:{importSquad:{type:String,default:""}},components:{ModuleChecker:d["a"],CardTabsContainer:f["a"],SquadListCardEditable:p["a"],LoadingIndicator:h["a"]},computed:A({},Object(c["e"])("settings",["activeServer"]),{},Object(c["e"])("units",{allUnits:"pageDb"}),{},Object(c["e"])("items",{allItems:"pageDb"}),{},Object(c["e"])("extraSkills",{allExtraSkills:"pageDb"}),{requiredModules:function(){return o["b"]},tabConfig:function(){return["squad","import code"].map((function(t){return{name:t,slot:t.replace(/ /g,"-")}}))},parseState:function(){var t=(this.parseErrorMessage?"error":this.parsedSuccessfully&&0===this.warningMessages.length&&"success")||this.parsedSuccessfully&&this.warningMessages.length>0&&"warning",e=this.parseErrorMessage||this.warningMessages.length>0&&"Parsed input code with ".concat(this.warningMessages.length," warnings.")||"Successfully parsed input code";return{type:t,message:e}},currentSquadCode:function(){try{return Object(u["l"])(this.squad)}catch(t){return""}}}),data:function(){return{squad:Object(u["c"])(),inputCode:"",parseErrorMessage:"",warningMessages:[],parsedSuccessfully:!1,parsingCode:!1,activeTabIndex:0,squadUnits:{},squadItems:{},squadExtraSkills:{},isLoadingSquadData:!1,selectedIndex:-1,showWarnings:!1,lastImportedSquadCode:""}},mounted:function(){this.$store.commit("setHtmlOverflowDisableState",!1),this.inputCode?(this.activeTabIndex=1,this.attemptSquadImport()):this.setSquad(this.squad)},methods:A({},Object(c["b"])("units",{getUnits:"getByIds"}),{},Object(c["b"])("items",{getItems:"getByIds"}),{},Object(c["b"])("extraSkills",{getExtraSkills:"getByIds"}),{attemptSquadImport:function(){var t=m(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.parseErrorMessage="",this.parsedSuccessfully=!1,this.warningMessages=[],this.inputCode){t.next=7;break}this.parseErrorMessage="No input specified",t.next=22;break;case 7:return this.parsingCode=!0,t.next=10,this.$nextTick();case 10:return t.prev=10,e=Object(u["j"])(this.inputCode),t.next=14,this.setSquad(e);case 14:this.parsedSuccessfully=!0,t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](10),x.error("error parsing squad",t.t0),this.parseErrorMessage="Import code is invalid and cannot be parsed.";case 21:this.parsingCode=!1;case 22:case"end":return t.stop()}}),t,this,[[10,17]])})));function e(){return t.apply(this,arguments)}return e}(),setSquad:function(){var t=m(s.a.mark((function t(e){var n,r,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.updateSquadPageDbForSquad(e);case 2:n=Object(u["b"])(e,{getUnit:this.getUnit,getExtraSkill:this.getExtraSkill,getItem:this.getItem}),r=n.warnings,i=v(n,["warnings"]),this.warningMessages=r,this.squad=i,this.lastImportedSquadCode=Object(u["l"])(i);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),updateSquadPageDbForSquad:function(){var t=m(s.a.mark((function t(e){var n,r,i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=7;break}return n=Object(u["g"])(e),r=function(t){return"".concat(t[0].toLowerCase()).concat(t.slice(1))},i=this.activeServer,t.next=6,["Units","Items","ExtraSkills"].reduce((function(t,e){var o=[],u=a["squad".concat(e)],l=n[r(e)],c={},d=Object.keys(u).map((function(t){return+t})).concat(l);return d.forEach((function(t){!isNaN(t)&&l.includes(t)&&(u[t]?c[t]=u[t]:o.push(t))})),t.then(m(s.a.mark((function t(){var n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(o.length>0)){t.next=8;break}return a.isLoadingSquadData||(a.isLoadingSquadData=!0),t.next=4,a["get".concat(e)]({ids:o,server:i,extractedFields:[]});case 4:n=t.sent,a["squad".concat(e)]=A({},c,{},n),t.next=9;break;case 8:a["squad".concat(e)]=c;case 9:case"end":return t.stop()}}),t)}))))}),Promise.resolve());case 6:this.isLoadingSquadData=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getUnit:function(t){return this.squadUnits[t]||{}},getItem:function(t){return this.squadItems[t]||{}},getExtraSkill:function(t){return this.squadExtraSkills[t]||{}},onSuccessfulSave:function(t){this.$router.push({path:"/tools/squads/".concat(t)})}}),watch:{importSquad:{immediate:!0,handler:function(t){t&&(this.inputCode=t)}},inputCode:function(t){t||(this.parseErrorMessage=""),this.parsedSuccessfully=!1},parseErrorMessage:function(t){t&&0===this.warningMessages.length&&(this.activeTabIndex=1)},"squad.units":{deep:!0,handler:function(){this.updateSquadPageDbForSquad(this.squad)}},warningMessages:function(t){this.showWarnings=t.length>0}}},O=w,k=(n("f8bc"),n("2877")),E=Object(k["a"])(O,r,i,!1,null,null,null);e["default"]=E.exports},5517:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{class:{"text-viewer pa-0":!0,"limit-height":t.limitHeight},attrs:{fluid:""}},[n("copy-button",{staticClass:"mb-0",attrs:{block:"",textToCopy:t.inputText,value:t.value}}),n("pre",[n("code",[t._v(t._s(t.inputText))])])],1)},i=[],a=n("6c03"),s={props:{inputText:{type:String,default:""},value:{default:void 0},limitHeight:{type:Boolean,default:!0}},components:{CopyButton:a["a"]}},o=s,u=(n("fa37"),n("2877")),l=Object(u["a"])(o,r,i,!1,null,null,null);e["a"]=l.exports},"5a88":function(t,e,n){"use strict";var r=n("3971"),i=n.n(r);i.a},"63a1":function(t,e,n){},6495:function(t,e,n){},"654e":function(t,e,n){},"6a92":function(t,e,n){"use strict";n.d(e,"l",(function(){return y})),n.d(e,"i",(function(){return A})),n.d(e,"d",(function(){return S})),n.d(e,"c",(function(){return w})),n.d(e,"a",(function(){return O})),n.d(e,"j",(function(){return k})),n.d(e,"b",(function(){return E})),n.d(e,"g",(function(){return C})),n.d(e,"k",(function(){return q})),n.d(e,"f",(function(){return P})),n.d(e,"e",(function(){return T})),n.d(e,"h",(function(){return _}));var r=n("34b9"),i=n("00e0"),a=n("4764"),s=n("5ab2"),o=n("801b"),u=n("c7df");function l(t){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){return v(t)||h(t,e)||f(t,e)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t,e){if(t){if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){i=!0,a=u}finally{try{r||null==o["return"]||o["return"]()}finally{if(i)throw a}}return n}}function v(t){if(Array.isArray(t))return t}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{units:[]};return t.units.map((function(e,n){return[(e.id===r["L"].EMPTY?"E":e.id===r["L"].ANY&&"X")||e.id,r["Q"].indexOf(e.position),e.es||"-",e.spheres.join("+")||"-",(n===t.lead?"L":n===t.friend&&"F")||"-",e.bbOrder,e.action,e.sp||"-",e.type||(e.id===r["L"].EMPTY?"-":r["i"].Lord),e.omniBoost||0].join("~")})).join(",")}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=void 0===e?"":e,i=t.position,a=void 0===i?r["Q"][0]:i,s=t.es,o=void 0===s?"":s,u=t.spheres,l=void 0===u?[]:u,c=t.bbOrder,d=void 0===c?0:c,f=t.action,p=void 0===f?"":f,h=t.sp,v=void 0===h?"":h,g=t.type,b=void 0===g?"":g,m=t.omniBoost,y=void 0===m?0:m,A=function(t){return(t||"").toString()};return{id:"E"===n&&r["L"].EMPTY||"X"===n&&r["L"].ANY||A(n),position:a,es:A(o),spheres:l.map(A),bbOrder:d,action:p,sp:v,type:b||(n===r["L"].EMPTY?"-":r["i"].Lord),omniBoost:+y}}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.isEmpty,n=void 0!==e&&e,i=t.position,a=void 0===i?r["Q"][0]:i,s=t.bbOrder,o=void 0===s?0:s;return A({id:n?r["L"].EMPTY:r["L"].ANY,position:a,bbOrder:o,action:n?r["M"].NONE:r["M"].ATK})}function x(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.getUnit,u=void 0===a?function(){}:a,l=n.getItem,c=void 0===l?function(){}:l,d=n.getExtraSkill,f=void 0===d?function(){}:d,p=(t={ls:[],es:[]},m(t,r["M"].BB,[]),m(t,r["M"].SBB,[]),m(t,r["M"].UBB,[]),m(t,"sp",[]),t);if(e.id&&e.id!==r["L"].EMPTY&&e.id!==r["L"].ANY){var h=u(e.id)||{};h["leader skill"]&&Array.isArray(h["leader skill"].effects)&&(p.ls=Array.from(h["leader skill"].effects).map((function(t){return b({},t,{sourcePath:"unit.ls"})}))),h["extra skill"]&&Array.isArray(h["extra skill"].effects)&&(p.es=Array.from(h["extra skill"].effects).map((function(t){return b({},t,{sourcePath:"unit.es"})}))),r["q"].forEach((function(t){var e=h[t]&&Array.isArray(h[t].levels)?Object(o["c"])(h[t]):{};Array.isArray(e.effects)&&(p[t]=Array.from(e.effects).map((function(e){return b({},e,{sourcePath:"unit.".concat(t)})})))})),e.sp&&Array.isArray(h.feskills)&&(p.sp=Array.from(new Set(Object(i["v"])(e.sp,h.feskills))).reduce((function(t,e){return t.concat(Object(i["r"])(e).map((function(t){return b({},t,{sourcePath:"unit.sp",sourceSpCode:Object(i["x"])(h.feskills.indexOf(e))})})))}),[]))}var v=[];if(e.es){var g=f(e.es)||{};Array.isArray(g.effects)&&(v=Array.from(g.effects).map((function(t){return b({},t,{sourcePath:"es"})})))}var y={};Array.isArray(e.spheres)&&e.spheres.forEach((function(t){var e=c(t)||{},n=Object(s["e"])(e);n.length>0&&(y[t]=n.map((function(e){return b({},e,{sourcePath:"sphere:".concat(t)})})))}));var A="".concat(r["i"][e.type]).concat(e.omniBoost);if(A in r["h"]){var x=f(r["h"][A])||{};if(Array.isArray(x.effects)){var w=r["i"][e.type].toLowerCase();v=Array.from(x.effects).filter((function(t){return t["passive target"]!==r["O"].PARTY})).map((function(t){return b({},t,{sourcePath:"unit.type.".concat(w)})}))}}return{unit:p,es:v,spheres:y}}function w(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return{lead:0,friend:3,name:"Squad ".concat((new Date).toLocaleString()),units:Array.isArray(e)?e:new Array(6).fill(0).map((function(e,n){return S({isEmpty:t,position:r["Q"][n],bbOrder:n+1})}))}}function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.lead,n=t.friend,r=t.name,i=t.simulatorOptions,a=t.filterOptions,s=t.viewMode;return{lead:e,friend:n,name:r,units:q(t.units.map(A),!1),simulatorOptions:i,filterOptions:a,viewMode:s}}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Squad ".concat((new Date).toLocaleString()),n=0,i=0,a=t.split(",").map((function(t,e){var a=t.split("~"),s=c(a,10),o=s[0],u=s[1],l=s[2],d=s[3],f=s[4],p=s[5],h=s[6],v=s[7],g=s[8],b=s[9];return"L"===f?n=e:"F"===f&&(i=e),A({id:o,position:r["Q"][u],es:"-"!==l?l:"",spheres:"-"!==d?d.split("+"):[],bbOrder:+p,action:h,sp:"-"!==v?v:"",type:g,omniBoost:b})}));return{name:e,lead:n,friend:i,units:a}}function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getUnit,o=void 0===n?function(){}:n,u=e.getItem,c=void 0===u?function(){}:u,d=e.getExtraSkill,f=void 0===d?function(){}:d,p=[],h=[],v=t.lead,g=t.friend,b=new Set,m=new Set;if(Array.isArray(t.units)){var y=t.units.filter((function(t){return"object"===l(t)})).slice(0,6),x=[r["M"].SBB,r["M"].BB],w=function(t){return t>=1&&t<=6};y.forEach((function(t,e){if("object"===l(t)){var n=o(t.id)||{},u=t.id===r["L"].ANY||t.id===r["L"].EMPTY||Object(i["u"])(n)?t.id:r["L"].ANY,d=n.name?"Unit [".concat(n.name,"] at index ").concat(e):"Unit [".concat(t.id||u,"] at index ").concat(e);u!==t.id&&h.push("".concat(d," has an invalid ID [").concat(t.id,"]. Used default filler unit entry [").concat(r["L"].ANY,"].")),v===e&&u===r["L"].EMPTY?(h.push("There is an empty unit at index ".concat(v," and cannot be leader. Removed leader indicator.")),v=-1):g===e&&u===r["L"].EMPTY&&(h.push("There is an empty unit at index ".concat(g," cannot be friend leader. Removed friend leader indicator.")),g=-1);var y=r["Q"].includes(t.position)&&!b.has(t.position)&&t.position;y?b.add(y):h.push("".concat(d," has invalid position [").concat(t.position,"]. Used default position value instead."));var S=u!==r["L"].EMPTY&&w(t.bbOrder)&&!m.has(t.bbOrder)&&t.bbOrder;S?m.add(S):h.push("".concat(d," has invalid BB Order [").concat(t.bbOrder,"]. Used default BB Order value instead."));var O=u===r["L"].EMPTY?r["M"].NONE:u===r["L"].ANY&&t.action||n[t.action]&&t.action||x.find((function(t){return!!n[t]}));O!==t.action&&h.push("".concat(d," has invalid action [").concat(t.action,"]. Used default action [").concat(O,"]."));var k=u!==r["L"].EMPTY&&t.es&&Object(a["c"])(f(t.es))?t.es:void 0;k!==t.es&&t.es&&h.push("".concat(d," has invalid Extra Skill [").concat(t.es,"]. Removed Extra Skill."));var E=(u!==r["L"].EMPTY&&Array.isArray(t.spheres)?t.spheres:[]).filter((function(t){return Object(s["j"])(c(t))}));Array.isArray(t.spheres)?E.length!==t.spheres.length&&h.push("".concat(d," has invalid spheres [").concat(t.spheres.filter((function(t){return!E.includes(t)})).join(", "),"]. Removed them from the entry.")):h.push("".concat(d," has invalid sphere entry. Used default of no spheres."));var C=u!==r["L"].EMPTY&&n.feskills&&"string"===typeof t.sp?t.sp.split("").filter((function(t){return n.feskills[Object(i["w"])(t)]})).join(""):void 0;if(C!==t.sp&&t.sp){var q=["".concat(d," has invalid SP code [").concat(t.sp,"]."),C?"Set SP code to [".concat(C,"]."):"Removed SP code."].join(" ");h.push(q)}var P=t.type||"";u===r["L"].EMPTY&&P?(h.push("".concat(d," is empty and therefore cannot have a type. Removing type designation.")),P=""):u===r["L"].EMPTY||P||(h.push("".concat(d," has no type. Defaulting to ").concat(r["i"].L)),P=r["i"].Lord);var T=+t.omniBoost||0;u===r["L"].EMPTY&&0!==T?(h.push("".concat(d," is empty and therefore cannot have an OE+ levels. Using 0 for level.")),T=0):u!==r["L"].EMPTY&&(isNaN(t.omniBoost)?(h.push("".concat(d," has a non-number value for OE+ level. Using 0 for level.")),T=0):(T<0||T>3)&&(h.push("".concat(d," has a value outside of the valid range for OE+ levels [").concat(T,", expected 0-3]. Using 0 for level.")),T=0)),p.push(A({id:u,position:y,bbOrder:S,action:O,es:k,spheres:E,sp:C,type:P,omniBoost:T}))}else h.push("Unit at input index ".concat(e," is invalid and has been removed from squad."))}))}var O=new Array(6).fill(0).map((function(t,e){return e+1}));p.forEach((function(t){t.position||(t.position=r["Q"].find((function(t){return!b.has(t)})),b.add(t.position)),t.bbOrder||(t.bbOrder=O.find((function(t){return!m.has(t)})),m.add(t.bbOrder))})),p.length<6&&h.push("".concat(p.length," valid units found. Added ").concat(6-p.length," filler units."));for(var k=p.length;k<6;++k){var E=r["Q"].find((function(t){return!b.has(t)}));b.add(E);var C=O.find((function(t){return!m.has(t)}));m.add(C),p.push(S({position:E,bbOrder:C}))}return p[v]&&p[v].id!==r["L"].EMPTY||(h.push("Unit at index ".concat(v," cannot be leader because it is invalid or empty. Removed leader indicator.")),v=-1),p[g]&&p[g].id!==r["L"].EMPTY||(h.push("Unit at index ".concat(v," cannot be friend leader because it is invalid or empty. Removed friend leader indicator.")),g=-1),-1!==v&&-1!==g&&v===g&&(h.push("Unit at index ".concat(v," cannot be lead and friend lead. Removed friend leader indicator.")),g=-1),{lead:v,friend:g,name:t.name||"Default Squad Name",units:q(p),warnings:h,simulatorOptions:t.simulatorOptions}}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[w()],e=new Set,n=new Set,i=new Set,a=Array.isArray(t)?t:[t];return a.forEach((function(t){t.units.forEach((function(t){e.add(t.id),t.es&&n.add(t.es),t.spheres.length>0&&t.spheres.forEach((function(t){i.add(t)}))}))})),Object.values(r["h"]).forEach((function(t){n.add(t)})),{units:Array.from(e),extraSkills:Array.from(n),items:Array.from(i),leaderSkills:Object.values(r["f"])}}function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e?t.slice():t;return n.sort((function(t,e){var n=[r["Q"].indexOf(t.position),r["Q"].indexOf(e.position)],i=n[0],a=n[1];return i-a}))}function P(t){var e=t.unitEntry,n=void 0===e?S():e,i=t.target,a=void 0===i?r["O"].PARTY:i,s=t.effectType,o=void 0===s?r["K"].PROC:s,l=t.squad,c=void 0===l?w():l,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getUnit:function(){},getItem:function(){},getExtraSkill:function(){},getLeaderSkill:function(){}},f=x(n,d),p=c.units.indexOf(n)===c.lead||c.units.indexOf(n)===c.friend;return Object(u["b"])({leaderSkillEffects:p?f.unit.ls:[],extraSkillEffects:f.unit.es,nonUbbBurstEffects:f.unit.bb.concat(f.unit.sbb),ubbBurstEffects:f.unit.ubb,elgifEffects:f.es,sphereEffects:Object.values(f.spheres).reduce((function(t,e){return t.concat(e)}),[]),spEnhancementEffects:f.unit.sp,target:a,effectType:o})}function T(t){var e=t.target,n=void 0===e?r["O"].PARTY:e,i=t.effectType,a=void 0===i?r["K"].PROC:i,s=t.squad,o=void 0===s?w():s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getUnit:function(){},getItem:function(){},getExtraSkill:function(){},getLeaderSkill:function(){}},d=new Set,f=[],p={fire:[],water:[],earth:[],thunder:[],light:[],dark:[]},h=!0;if(o.units.forEach((function(t,e){var n="".concat(r["i"][t.type]).concat(t.omniBoost);if(3===t.omniBoost&&n in r["h"]){var i=r["h"][n],a=r["i"][t.type].toLowerCase();d.add("".concat(i,"-").concat(a))}var s=l.getUnit(t.id)||{};o.friend!==e&&(t.omniBoost>0||8===+s.rarity)&&s.element in p&&p[s.element].push(t.omniBoost),o.friend!==e&&8!==+s.rarity&&(h=!1)})),h){var v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;return t.reduce((function(t,n){return t+(n>=e?1:0)}),0)};Object.entries(p).forEach((function(t){var e,n=c(t,2),i=n[0],a=n[1],s=a.length;if(s>=5&&v(a,3)>=3?e=r["f"][3]:s>=4&&v(a,2)>=3?e=r["f"][2]:s>=3&&v(a,1)>=3&&(e=r["f"][1]),e){var o=l.getLeaderSkill(e)||{};if(Array.isArray(o.effects)){var u=r["w"].indexOf(i)+1,d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.replace("X",u)},p=Array.from(o.effects).map((function(t){var e=b({},t,{sourcePath:"squad.omniBoost"});return"passive param"in e&&(e["passive param"]=d(e["passive param"])),"unknown passive params"in e&&(e["unknown passive params"]=d(e["unknown passive params"])),e}));f=f.concat(p)}}}))}var g=Array.from(d).reduce((function(t,e){var n=e.split("-"),i=c(n,2),a=i[0],s=i[1],o=l.getExtraSkill(a),u=[];return Array.isArray(o.effects)&&(u=Array.from(o.effects).filter((function(t){return t["passive target"]===r["O"].PARTY})).map((function(t){return b({},t,{sourcePath:"unit.type.".concat(s)})}))),t.concat(u)}),[]);return Object(u["b"])({leaderSkillEffects:f,extraSkillEffects:g,target:n,effectType:a})}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S(),e=[];t.id!==r["L"].ANY&&t.id!==r["L"].EMPTY&&e.push({moduleName:"units",id:t.id,sp:t.sp}),t.es&&e.push({moduleName:"extraSkills",id:t.es});var n="".concat(r["i"][t.type]).concat(t.omniBoost);return n in r["h"]&&e.push({moduleName:"extraSkills",id:r["h"][n]}),Array.from(new Set(t.spheres)).forEach((function(t){e.push({moduleName:"items",id:t})})),e}},"6cb7":function(t,e,n){},"6cf1":function(t,e,n){"use strict";var r=n("3f51"),i=n.n(r);i.a},"6e7f":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAWCAMAAAARtodwAAAAA3NCSVQICAjb4U/gAAADAFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApUwkpVAkpVwkoXAkoXgknZQonZwombgkmcQoldAokfQwjhgsiiwsgmwwgngxDhisfoQseogwfowwfpAwfpQwfpgwepwweqA0eqQweqg0eqw0erA0erQ0drg0erg0dsA0dsQ0itBMntRdPnTwrtxwstx4vuCA8tCw4uyk5vCxepExepUxIwDtbtk1buE1awE5dyFFhyVdlylpqzWBwzmabsYybso130G130W540W6auo560nGD1Xq20a3E3r7D6L7N7sni6d7j6N/i697q+Onr+Onw9u/t+ez////////SciOpAAAA/3RSTlMA/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3N8PqRcAAAAkElEQVQY04WQsQ7CMAxEz03Sgih0QoxFfAH//0NsDEWINE5sppIEVao3P9ln31n8l10jWva0PgM8DgQAMZ4XMnlKLBqPP/JqP4GjNu9bvqWXq5C6fJ36vq3/Mc6wgVjoQlTCs5Mw7LOOTCwqp7wV/cysTgtfMo61crMztQs/gwAqSBJK9cydqavJsJkhbeX8BTdVMwA/hLFSAAAAAElFTkSuQmCC"},7587:function(t,e,n){"use strict";var r=n("f2fe"),i=n.n(r);i.a},"7ac9":function(t,e,n){},"7e25":function(t,e,n){"use strict";var r=n("63a1"),i=n.n(r);i.a},8398:function(t,e,n){"use strict";e["a"]={props:{getUnit:{type:Function,default:function(){return{}}},getItem:{type:Function,default:function(){return{}}},getExtraSkill:{type:Function,default:function(){return{}}},getLeaderSkill:{type:Function,default:function(){return{}}}}}},"874d":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-text-field",{attrs:{value:t.inputText,label:t.label,readonly:""}}),n("copy-button",{staticClass:"mb-0",attrs:{block:"",textToCopy:t.inputText,value:t.value}})],1)},i=[],a=n("6c03"),s={props:{inputText:{type:String,default:""},label:{type:String,default:""},value:{default:void 0}},components:{CopyButton:a["a"]}},o=s,u=n("2877"),l=Object(u["a"])(o,r,i,!1,null,null,null);e["a"]=l.exports},"8b06":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",t._g(t._b({staticClass:"squad-unit-entry"},"v-flex",t.$attrs,!1),t.$listeners),[t._t("before-content"),n("div",{staticStyle:{display:"flex"}},[n("v-layout",{staticClass:"mx-2",style:"flex-grow: 0!important; min-width: "+t.thumbnailSize+"px; max-width: "+t.thumbnailSize+"px;",attrs:{column:""}},[t.$vuetify.breakpoint.xsOnly?n("v-flex",{attrs:{"text-xs-center":""}},[n("span",{staticClass:"caption text-no-wrap"},[t._v(t._s(t.unit.position))])]):t._e(),n("v-layout",{staticStyle:{"flex-grow":"0"},attrs:{"align-content-center":"",row:""}},[n("unit-thumbnail",{staticClass:"unit-thumbnail",style:"border-color: "+t.orderSettings.border+";",attrs:{isVisible:t.isVisible,src:t.getImageUrls(t.unit.id).ills_battle,rarity:t.rarity,imageTitle:t.name,displayWidth:t.thumbnailSize,displayHeight:t.thumbnailSize}},[n("template",{slot:"after-image"},[n("text",{attrs:{x:0,y:.75*t.thumbnailSize}},[t._v("\n              "+t._s(isNaN(t.unit.bbOrder)?"-":t.unit.bbOrder)+"\n            ")])])],2)],1),t.orderSettings?n("v-flex",{staticClass:"text-xs-center"},[t.isVisible?n("v-chip",{staticClass:"bb-order-chip",style:"\n            background-color: "+t.orderSettings.background+";\n            color: "+t.orderSettings.foreground+";\n            border-color: "+t.orderSettings.border+";\n          ",attrs:{tabindex:"-1",small:""}},[n("b",[t._v(t._s(t.orderSettings.text))])]):n("span",{staticClass:"body-1",domProps:{textContent:t._s(t.orderSettings.text)}})],1):t._e()],1),n("v-layout",{staticStyle:{"align-self":"flex-start"},attrs:{column:""}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",{staticClass:"d-flex-container align-center font-weight-bold subheading"},[t.rarity<8?n("span",[t._v(t._s(t.rarity))]):t._e(),t.isVisible?n("rarity-icon",{class:{"ml-1":8!==t.rarity,"mr-1":!0},attrs:{rarity:t.rarity||0,displaySize:18}}):t._e(),n("span",[t._v(t._s(t.name))])],1),n("v-spacer"),t.isLead||t.isFriend?n("v-flex",{staticStyle:{"flex-grow":"0"}},[t.isLead?n("leader-icon",{attrs:{displaySize:18}}):t.isFriend?n("friend-icon",{attrs:{displaySize:18}}):t._e()],1):t._e()],1),n("v-layout",{attrs:{"align-center":""}},[n("v-layout",{staticStyle:{"flex-grow":"0"},attrs:{"align-center":"","justify-center":""}},[t.isVisible?n("extra-skill-icon",{staticClass:"mr-1",attrs:{inactive:!t.unit.es,displaySize:22}}):t._e()],1),n("v-flex",{staticStyle:{"word-break":"break-all","text-align":"left"}},[t._v("\n          "+t._s(t.getExtraSkill(t.unit.es).name||"No Extra Skill")+"\n        ")])],1),n("v-layout",{attrs:{row:"",wrap:"","align-center":""}},t._l(t.unit.spheres.length>0?t.unit.spheres:["No Sphere"],(function(e,r){return n("v-layout",{key:e+"-"+r,attrs:{"align-center":""}},[n("v-layout",{staticStyle:{"flex-grow":"0"},attrs:{"align-center":"","justify-center":""}},[t.isVisible?n("sphere-type-icon",{staticClass:"mr-1",attrs:{category:t.getItem(e)["sphere type"],displaySize:22}}):t._e()],1),n("v-flex",{staticStyle:{"text-align":"left"}},[t._v("\n            "+t._s(t.getItem(e).name||e)+"\n          ")])],1)})),1),t.unit.sp&&t.isVisible&&t.getSpCost(t.unit)>0?n("v-layout",[n("v-flex",{staticClass:"mr-1",staticStyle:{"flex-grow":"0"}},[t._v("\n          "+t._s(t.getSpCost(t.unit))+" SP:\n        ")]),t._l(t.getSpCategories(t.unit),(function(e){return n("v-flex",{key:e+"-"+t.unit.id+"-"+t.index,staticStyle:{"flex-grow":"0"}},[n("sp-icon",{attrs:{category:e,displaySize:22}})],1)}))],2):t._e()],1)],1)],2)},i=[],a=n("34b9"),s=n("00e0"),o=n("2f62"),u=n("c0a4"),l=n.n(u),c=n("ac4c"),d=n("69c9"),f=n("aeb4"),p=n("4c70"),h=n("954e"),v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("generic-sprite-icon",{style:t.inactive?t.inactiveStyle:t.$attrs.style,attrs:{iconTitle:"Extra Skill Icon",iconWidth:t.iconSize,iconHeight:t.iconSize,sheetWidth:t.sheetSize[0],sheetHeight:t.sheetSize[1],displayWidth:t.displaySize,displayHeight:t.displaySize,src:n("c567"),iconX:0,iconY:0}})},g=[],b=n("ef0e"),m={props:{inactive:{type:Boolean,default:!1},displaySize:{type:Number,default:32}},components:{GenericSpriteIcon:b["a"]},computed:{iconSize:function(){return 32},sheetSize:function(){return[32,32]},inactiveStyle:function(){return"filter: brightness(75%) grayscale(100%)"}}},y=m,A=n("2877"),S=Object(A["a"])(y,v,g,!1,null,null,null),x=S.exports,w=n("4427"),O=n("8398");function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){C(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var q={mixins:[O["a"]],components:{UnitThumbnail:c["a"],RarityIcon:d["a"],SphereTypeIcon:f["a"],LeaderIcon:p["a"],FriendIcon:h["a"],ExtraSkillIcon:x,SpIcon:w["a"]},props:{unit:{type:Object,required:!0},isLead:{type:Boolean,default:!1},isFriend:{type:Boolean,default:!1},isVisible:{type:Boolean,default:!0},index:{type:Number,default:-1}},computed:E({},Object(o["c"])("units",{getImageUrls:"getImageUrls"}),{thumbnailSize:function(){return 64},iconSize:function(){return 22},orderSettings:function(){var t=!isNaN(this.unit.bbOrder);return E({text:t&&this.getOrderText(this.unit)||"-"},this.getColorSetBasedOnAction(t&&this.unit||void 0))},rarity:function(){return this.getUnit(this.unit.id).rarity},name:function(){var t=this.getUnit(this.unit.id).name||this.unit.id,e="";if(t!==a["L"].EMPTY&&t!==a["L"].SQUAD){var n=a["i"][this.unit.type]||a["i"].L;e=8===+this.rarity||t===a["L"].ANY?"".concat(n," +").concat(this.unit.omniBoost||0):n}return e?"".concat(t," (").concat(e,")"):t}}),methods:{getColorSetBasedOnAction:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.action===a["M"].UBB?"red":t.action===a["M"].SBB&&"amber")||t.action===a["M"].BB&&"blueGrey"||"grey";return{border:l.a[e].base,background:l.a[e].lighten4,foreground:l.a[e].darken4}},getOrderText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action||this.getUnit(t.id).sbb&&a["M"].SBB||this.getUnit(t.id).bb&&a["M"].BB||a["M"].ATK;return e.toUpperCase()},getSpCategories:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getUnit(t.id).feskills,n=t.sp;if(!e||!n)return[];var r=Object(s["v"])(n,e).map((function(t){return+t.category}));return Array.from(new Set(r))},getSpCost:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getUnit(t.id).feskills,n=t.sp;return e&&n?n.split("").map((function(t){return e[Object(s["w"])(t)]})).filter((function(t){return t})).reduce((function(t,e){return t+ +e.skill.bp}),0):0}}},P=q,T=(n("b13f"),Object(A["a"])(P,r,i,!1,null,null,null));e["a"]=T.exports},"8d77":function(t,e,n){},"952b":function(t,e,n){"use strict";var r=n("15bb"),i=n.n(r);i.a},"954e":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("generic-sprite-icon",{attrs:{iconTitle:t.label,iconWidth:t.sheetSize[0],iconHeight:t.sheetSize[1],sheetWidth:t.sheetSize[0],sheetHeight:t.sheetSize[1],displayWidth:t.displaySize,displayHeight:t.displaySize,src:t.iconSrc,iconX:0,iconY:0}})},i=[],a=n("ef0e"),s={props:{displaySize:{type:Number,default:52}},components:{GenericSpriteIcon:a["a"]},computed:{label:function(){return"Friend Unit"},iconSrc:function(){return n("6e7f")},sheetSize:function(){return[17,22]}}},o=s,u=n("2877"),l=Object(u["a"])(o,r,i,!1,null,null,null);e["a"]=l.exports},"97a2":function(t,e,n){"use strict";var r=n("6495"),i=n.n(r);i.a},a004:function(t,e,n){},a598:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",[n("h1",{staticClass:"title"},[t._v("Delete Confirmation")])]),n("v-container",{attrs:{fluid:""}},[n("v-flex",[t._v("Are you sure you want to delete the following squad?")]),n("squad-list-card",{attrs:{squad:t.squad,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill}},[n("div",{attrs:{slot:"card-actions"},slot:"card-actions"})])],1),n("v-card-actions",{staticStyle:{"justify-content":"space-between"}},[n("v-btn",{attrs:{disabled:t.isDeleting,flat:"",color:"error"},on:{click:t.deleteSquad}},[n("v-icon",{attrs:{left:""}},[t._v("delete")]),t._v("\n      Delete\n    ")],1),n("v-btn",{attrs:{flat:""},on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n      Cancel\n    ")])],1)],1)},i=[],a=n("a34a"),s=n.n(a),o=n("bdea"),u=n("8398");function l(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(r,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){l(a,r,i,s,o,"next",t)}function o(t){l(a,r,i,s,o,"throw",t)}s(void 0)}))}}var d={mixins:[u["a"]],props:{squad:{type:Object,required:!0},squadId:{type:Number,required:!0}},components:{SquadListCard:o["a"]},data:function(){return{isDeleting:!1}},methods:{deleteSquad:function(){var t=c(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isDeleting=!0,t.prev=1,t.next=4,this.$store.dispatch("squads/deleteSquad",{id:this.squadId});case 4:e=t.sent,this.$emit("delete",e);case 6:return t.prev=6,this.isDeleting,t.finish(6);case 9:case"end":return t.stop()}}),t,this,[[1,,6,9]])})));function e(){return t.apply(this,arguments)}return e}()}},f=d,p=n("2877"),h=Object(p["a"])(f,r,i,!1,null,null,null);e["a"]=h.exports},ad30:function(t,e,n){"use strict";var r=n("09c5"),i=n.n(r);i.a},b13f:function(t,e,n){"use strict";var r=n("08a6"),i=n.n(r);i.a},b404:function(t,e,n){"use strict";var r=n("2c86"),i=n.n(r);i.a},bbc5:function(t,e,n){},bd0f:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"buff-expandable-list-view"},[n("v-expansion-panel",{staticClass:"order-configuration-panel"},[n("v-expansion-panel-content",[n("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n        Configure Buff List View\n      ")]),n("section",[n("v-layout",{staticClass:"pl-2",attrs:{row:"","justify-center":"","align-center":""}},[n("v-flex",{attrs:{xs2:""}},[t._v("\n            View Mode\n          ")]),n("v-flex",{staticClass:"text-xs-center",attrs:{xs5:""}},[n("v-btn",{attrs:{flat:"",outline:t.viewMode===t.TARGET_VIEW_TYPE},on:{click:function(e){return t.emitNewViewMode(t.TARGET_VIEW_TYPE)}}},[t._v("\n              Target\n            ")])],1),n("v-flex",{staticClass:"text-xs-center",attrs:{xs5:""}},[n("v-btn",{attrs:{flat:"",outline:t.viewMode===t.OVERVIEW_VIEW_TYPE},on:{click:function(e){return t.emitNewViewMode(t.OVERVIEW_VIEW_TYPE)}}},[t._v("\n              Overview\n            ")])],1)],1),n("order-configurator",{directives:[{name:"show",rawName:"v-show",value:"target"===t.viewMode,expression:"viewMode === 'target'"}],attrs:{getEntryName:function(e){return t.possibleTables[e].name},fullValueSet:t.defaultBuffTables},model:{value:t.buffTables,callback:function(e){t.buffTables=e},expression:"buffTables"}}),n("section",{directives:[{name:"show",rawName:"v-show",value:"target"===t.viewMode,expression:"viewMode === 'target'"}]},[n("v-btn",{attrs:{flat:""},on:{click:function(e){t.buffTables=t.buffTables.concat(t.defaultBuffTables.filter((function(e,n){return!t.buffTables.includes(n)})))}}},[t._v("Show All")]),n("v-btn",{attrs:{flat:""},on:{click:function(e){t.buffTables=[]}}},[t._v("Hide All")]),n("v-btn",{attrs:{flat:""},on:{click:function(e){t.buffTables=t.defaultBuffTables.slice()}}},[t._v("Reset to Default")])],1)],1),t._t("view-config-extra")],2)],1),n("section",{staticClass:"buff-configuration-area my-2"},[n("proc-selector",{attrs:{showSelector:"procs"===t.activeSelector,filterHelper:t.filterHelper},on:{toggleview:function(e){return t.activeSelector=e?"procs":""}},model:{value:t.filterOptions,callback:function(e){t.filterOptions=e},expression:"filterOptions"}}),n("passive-selector",{attrs:{showSelector:"passives"===t.activeSelector,filterHelper:t.filterHelper},on:{toggleview:function(e){return t.activeSelector=e?"passives":""}},model:{value:t.filterOptions,callback:function(e){t.filterOptions=e},expression:"filterOptions"}}),n("div",{staticClass:"px-2",staticStyle:{"font-weight":"bold"}},[t._v("Buff Highlighting")]),t.hasPassives||t.hasProcs?[n("v-layout",{attrs:{row:"",wrap:""}},[t.hasProcs?n("v-flex",{staticStyle:{cursor:"pointer"},attrs:{xs12:"",md6:t.hasPassives},on:{click:function(e){t.activeSelector="procs"}}},[n("v-combobox",{staticClass:"mx-2",attrs:{value:t.filterOptions.procs,disabled:"",label:"Highlight Active Buffs",hint:"Empty selection is equivalent to showing all.",multiple:"","persistent-hint":""}})],1):t._e(),t.hasPassives?n("v-flex",{staticStyle:{cursor:"pointer"},attrs:{xs12:"",md6:t.hasProcs},on:{click:function(e){t.activeSelector="passives"}}},[n("v-combobox",{staticClass:"mx-2",attrs:{value:t.filterOptions.passives,disabled:"",label:"Highlight Passive Buffs",hint:"Empty selection is equivalent to showing all.",multiple:"","persistent-hint":""}})],1):t._e()],1),n("v-layout",{attrs:{row:"",wrap:""}},[t.hasProcs?n("v-flex",{attrs:{xs12:"",md6:t.hasPassives}},[n("v-alert",{staticClass:"mx-2",attrs:{value:!0,type:t.missingProcs.length>0?"warning":"info"}},[t.missingProcs.length>0?[n("p",[t._v("The following active buffs are missing from the current squad.")]),n("ul",t._l(t.missingProcs,(function(e){return n("li",{key:e,domProps:{textContent:t._s(t.getEffectNameForIdAndType(e,"proc"))}})})),0)]:t.filterOptions.procs.length>0?n("span",[t._v("All specified active buffs are present.")]):n("span",[t._v("No filters for active buffs specified.")])],2)],1):t._e(),t.hasPassives?n("v-flex",{attrs:{xs12:"",md6:t.hasProcs}},[n("v-alert",{staticClass:"mx-2",attrs:{value:!0,type:t.missingPassives.length>0?"warning":"info"}},[t.missingPassives.length>0?[n("p",[t._v("The following passive buffs are missing from the current squad.")]),n("ul",t._l(t.missingPassives,(function(e){return n("li",{key:e,domProps:{textContent:t._s(t.getEffectNameForIdAndType(e,"passive"))}})})),0)]:t.filterOptions.passives.length>0?n("span",[t._v("All specified passive buffs are present.")]):n("span",[t._v("No filters for passive buffs specified.")])],2)],1):t._e()],1)]:t._e()],2),n("dl",[t.viewMode===t.TARGET_VIEW_TYPE?[t._l(t.buffTables,(function(e){return[n("dt",{key:t.possibleTables[e].targetType+"-"+t.possibleTables[e].effectType+"-title",class:t.buffListTitleClass,style:t.buffListTitleStyle,domProps:{textContent:t._s(t.possibleTables[e].name)}}),n("dd",{key:t.possibleTables[e].targetType+"-"+t.possibleTables[e].effectType+"-table"},[t._t("buffexpandablelist",[n("buff-expandable-list",{key:t.getEffectTypeKey(t.possibleTables[e].effectType),attrs:{sources:t.sources,effectType:t.possibleTables[e].effectType,inputEffectMappingBySource:t.effectMappingByTable.get(t.getTableKey(t.possibleTables[e].targetType,t.possibleTables[e].effectType)),highlightedBuffIds:t.getHighlightedBuffListForTable(t.possibleTables[e].effectType),getTextForSource:t.getTextForSource},scopedSlots:t._u([{key:"allentrypreview",fn:function(r){var i=r.entries,a=r.effectId;return[t._t("allentrypreview",t._l(i,(function(e,r){return n("div",{key:r},[t._v("\n                    "+t._s(e)+"\n                  ")])})),{entries:i,effectId:a,effectType:t.possibleTables[e].effectType,targetType:t.possibleTables[e].targetType})]}},{key:"value-header",fn:function(e){var r=e.entry;return[t._t("value-header",[n("span",[t._v(t._s(r))])],{entry:r})]}}],null,!0)},[n("template",{slot:"noentries"},[t._t("noentries",[n("span",[t._v("No entries of type ["+t._s(t.possibleTables[e].effectType)+"] were found.")])],{effectType:t.possibleTables[e].effectType,targetType:t.possibleTables[e].targetType})],2)],2)],{sources:t.sources,targetType:t.possibleTables[e].targetType,effectType:t.possibleTables[e].effectType,inputEffectMappingBySource:t.effectMappingByTable.get(t.getTableKey(t.possibleTables[e].targetType,t.possibleTables[e].effectType)),highlightedBuffIds:t.getHighlightedBuffListForTable(t.possibleTables[e].effectType),getTextForSource:t.getTextForSource,listKey:t.getEffectTypeKey(t.possibleTables[e].effectType)})],2)]}))]:t.viewMode===t.OVERVIEW_VIEW_TYPE?[t._l(t.overviewTables,(function(e){return[n("dt",{key:e.mappingKey+"-"+e.effectType+"-title",class:t.buffListTitleClass,style:t.buffListTitleStyle,domProps:{textContent:t._s(e.name)}}),n("dd",{key:e.mappingKey+"-"+e.effectType+"-table"},[t._t("buffexpandablelist",[n("buff-expandable-list",{key:t.getEffectTypeKey(e.effectType),attrs:{sources:t.sources,effectType:e.effectType,inputEffectMappingBySource:t.effectMappingByTable.get(e.mappingKey),highlightedBuffIds:t.getHighlightedBuffListForTable(e.effectType),getTextForSource:t.getTextForSource},scopedSlots:t._u([{key:"allentrypreview",fn:function(r){var i=r.entries,a=r.effectId;return[t._t("allentrypreview",t._l(i,(function(e,r){return n("div",{key:r},[t._v("\n                    "+t._s(e)+"\n                  ")])})),{entries:i,effectId:a,effectType:e.effectType,targetType:e.mappingKey})]}},{key:"value-header",fn:function(e){var r=e.entry;return[t._t("value-header",[n("span",[t._v(t._s(r))])],{entry:r})]}}],null,!0)},[n("template",{slot:"noentries"},[t._t("noentries",[n("span",[t._v("No entries of type ["+t._s(e.effectType)+"] were found.")])],{effectType:e.effectType,targetType:e.mappingKey})],2)],2)],{sources:t.sources,targetType:e.mappingKey,effectType:e.effectType,inputEffectMappingBySource:t.effectMappingByTable.get(e.mappingKey),highlightedBuffIds:t.getHighlightedBuffListForTable(e.effectType),getTextForSource:t.getTextForSource,listKey:t.getEffectTypeKey(e.effectType)})],2)]}))]:[t._v("\n      Unknown view mode ["+t._s(t.viewMode)+"]\n    ")]],2)],1)},i=[],a=n("34b9"),s=n("abcf"),o=n("c7df"),u=n("100d"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"order-configurator"},[t._l(t.value,(function(e,r){return n("li",{key:t.getValueOfEntry(e,r)},[n("v-btn",{attrs:{icon:"",flat:"",disabled:0===r},on:{click:function(e){return t.moveEntryUp(r)}}},[n("v-icon",[t._v("keyboard_arrow_up")])],1),n("v-btn",{attrs:{icon:"",flat:"",disabled:r===t.value.length-1},on:{click:function(e){return t.moveEntryDown(r)}}},[n("v-icon",[t._v("keyboard_arrow_down")])],1),n("span",{domProps:{textContent:t._s(t.getEntryName(e))}}),n("v-btn",{attrs:{icon:"",flat:""},on:{click:function(e){return t.hideEntry(r)}}},[n("v-icon",[t._v("fa fa-eye")])],1)],1)})),t._l(t.remainingValues,(function(e,r){return n("li",{key:t.getValueOfEntry(e,r+t.value.length)},[n("v-btn",{attrs:{icon:"",flat:"",disabled:""}},[n("v-icon",[t._v("keyboard_arrow_up")])],1),n("v-btn",{attrs:{icon:"",flat:"",disabled:""}},[n("v-icon",[t._v("keyboard_arrow_down")])],1),n("span",{staticClass:"grey--text",domProps:{textContent:t._s(t.getEntryName(e))}}),n("v-btn",{attrs:{icon:"",flat:""},on:{click:function(e){return t.showEntry(r)}}},[n("v-icon",[t._v("fa fa-eye-slash")])],1)],1)}))],2)},c=[],d={props:{value:{type:Array,default:function(){return[]}},getEntryName:{type:Function,default:function(t){return t&&t.name||t}},getEntryValue:{required:!1},fullValueSet:{required:!1}},computed:{remainingValues:function(){var t,e=this,n=Array.isArray(this.fullValueSet)?this.fullValueSet:this.value;return t=n!==this.value?this.fullValueSet.filter((function(t){return!e.value.includes(t)})):[],t}},methods:{getValueOfEntry:function(t,e){return"function"!==typeof this.getEntryValue?"".concat(this.getEntryName(t),"-").concat(e):this.getEntryValue(t,e)},emitValue:function(t){this.$emit("input",t)},moveEntryUp:function(t){var e=this.value.slice();if(t>0&&t<e.length){var n=e[t-1],r=e[t];e[t-1]=r,e[t]=n}this.emitValue(e)},moveEntryDown:function(t){var e=this.value.slice();if(t>-1&&t<e.length-1){var n=e[t+1],r=e[t];e[t+1]=r,e[t]=n}this.emitValue(e)},hideEntry:function(t){this.emitValue(this.value.filter((function(e,n){return n!==t})))},showEntry:function(t){var e=this.value.slice();t>-1&&t<this.remainingValues.length&&e.push(this.remainingValues[t]),this.emitValue(e)}}},f=d,p=(n("ca29"),n("2877")),h=Object(p["a"])(f,l,c,!1,null,null,null),v=h.exports,g=n("8857"),b=n("4303"),m=n("38fd1");function y(t){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}var A="target",S="overview",x=Object.freeze([A,S]),w={props:{sources:{type:Array,required:!0},getEffectsFromSource:{type:Function,default:function(){return[]}},getTextForSource:{type:Function,default:function(t,e,n){return n||t}},titleTopOffset:{type:Number,default:56},hasPassives:{type:Boolean,default:!0},hasProcs:{type:Boolean,default:!0},inputFilterOptions:{required:!1},viewMode:{type:String,default:x[0]},stickyTitles:{type:Boolean,default:!0}},components:{BuffExpandableList:m["a"],OrderConfigurator:v,ProcSelector:g["a"],PassiveSelector:b["a"]},computed:{TARGET_VIEW_TYPE:function(){return A},OVERVIEW_VIEW_TYPE:function(){return S},buffListTitleStyle:function(){return{top:"".concat(this.titleTopOffset,"px")}},buffListTitleClass:function(){return{title:!0,"is-sticky":this.stickyTitles}},possibleTables:function(){return Object.freeze([{name:"Party Passives",targetType:a["O"].PARTY,effectType:a["K"].PASSIVE},{name:"Party Buffs",targetType:a["O"].PARTY,effectType:a["K"].PROC},{name:"For the Enemy",targetType:a["O"].ENEMY,effectType:a["K"].PROC},{name:"Self Passives",targetType:a["O"].SELF,effectType:a["K"].PASSIVE},{name:"Self Buffs",targetType:a["O"].SELF,effectType:a["K"].PROC},{name:"Other Passives",targetType:a["O"].OTHER,effectType:a["K"].PASSIVE},{name:"Other Buffs",targetType:a["O"].OTHER,effectType:a["K"].PROC}])},overviewTables:function(){return Object.freeze([{name:"All Passive Buffs",effectType:a["K"].PASSIVE,mappingKey:"allPassivesMapping"},{name:"All Active Buffs",effectType:a["K"].PROC,mappingKey:"allProcsMapping"}])},defaultBuffTables:function(){return Object.freeze(this.possibleTables.map((function(t,e){return e})))},effectMappingByTable:function(){var t=new Set,e=new Set,n=new Map,r=this.sources,i=this.possibleTables,o=this.getEffectsFromSource,u=this.getTableKey,l=new WeakMap,c=new WeakMap;return i.forEach((function(i){var d=i.targetType,f=i.effectType,p=new WeakMap;r.forEach((function(n){var r=o(n,d,f),i=l.get(n)||[],u=c.get(n)||[];r.forEach((function(n){f===a["K"].PROC?(t.add(Object(s["getEffectId"])(n)),i.push(n)):f===a["K"].PASSIVE&&(e.add(Object(s["getEffectId"])(n)),u.push(n))})),p.set(n,r),l.set(n,i),c.set(n,u)})),n.set(u(d,f),p)})),n.set("allProcs",Array.from(t).sort((function(t,e){return+t-+e}))),n.set("allPassives",Array.from(e).sort((function(t,e){return+t-+e}))),n.set("allProcsMapping",l),n.set("allPassivesMapping",c),n},missingProcs:function(){var t=this.effectMappingByTable.get("allProcs"),e=this.filterOptions.procs;return e.filter((function(e){return!t.includes(e)}))},missingPassives:function(){var t=this.effectMappingByTable.get("allPassives"),e=this.filterOptions.passives;return e.filter((function(e){return!t.includes(e)}))},hasBuffFilters:function(){return this.hasProcs&&this.filterOptions.procs.length>0||this.hasPassives&&this.filterOptions.passives.length>0}},data:function(){return{buffTables:[],filterOptions:{procs:[],passives:[]},activeSelector:"",filterHelper:new u["a"]}},created:function(){this.buffTables=this.defaultBuffTables.slice(),"object"===y(this.inputFilterOptions)&&(this.filterOptions.procs=Array.isArray(this.inputFilterOptions.procs)?this.inputFilterOptions.procs.slice():[],this.filterOptions.passives=Array.isArray(this.inputFilterOptions.passives)?this.inputFilterOptions.passives.slice():[])},methods:{getTableKey:function(t,e){return"".concat(t,"-").concat(e)},getEffectTypeKey:function(t){var e="";return t===a["K"].PROC?e=this.filterOptions.procs.join("-"):t===a["K"].PASSIVE&&(e=this.filterOptions.passives.join("-")),e},getEffectNameForIdAndType:function(t,e){var n;return e===a["K"].PASSIVE?n=Object(o["a"])({"passive id":t}):e===a["K"].PROC&&(n=Object(o["a"])({"proc id":t})),n||(n="Unknown buff"),"".concat(n," [").concat(t,"]")},getHighlightedBuffListForTable:function(t){var e=[];return t===a["K"].PASSIVE&&this.hasPassives?e=this.filterOptions.passives:t===a["K"].PROC&&this.hasProcs&&(e=this.filterOptions.procs),e},emitNewViewMode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;this.$emit("viewmode",t)}},watch:{activeSelector:function(){var t=this.filterOptions,e=t.procs,n=void 0===e?[]:e,r=t.passives,i=void 0===r?[]:r;this.$emit("filteroptions",{procs:n,passives:i})},viewMode:{immediate:!0,handler:function(t){x.includes(t)||this.emitNewViewMode(x[0])}}}},O=w,k=(n("0f27"),Object(p["a"])(O,r,i,!1,null,null,null));e["a"]=k.exports},bdea:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"squad-list--entry-card"},[n("v-layout",{staticClass:"pa-2",attrs:{row:""}},[n("v-flex",[n("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.squad.name)+"\n      ")])]),n("v-spacer"),n("v-flex",{staticStyle:{"flex-grow":"0"}},[n("h2",{staticClass:"subheading"},[t._v("\n        "+t._s(t.squadCost)+" Cost\n      ")])])],1),n("v-layout",{staticClass:"px-2",attrs:{row:"",wrap:""}},[t.isLoadingInParent?n("loading-indicator",{attrs:{loadingMessage:"Loading squad data"}}):t._l(t.fullUnits,(function(e,r){return n("unit-entry",{key:t.getUnitEntryKey(e,r),staticClass:"d-flex py-1",staticStyle:{"align-items":"center",border:"1px solid var(--background-color-alt)"},attrs:{xs12:"",sm6:"",index:r,isVisible:t.isVisible,unit:e,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,isLead:r===t.squad.lead,isFriend:r===t.squad.friend}})}))],2),n("v-divider",{staticClass:"mt-2"}),t._t("card-actions",[n("v-card-actions",[t.to?n("v-btn",{attrs:{flat:"",disabled:t.isLoadingInParent||!t.isVisible,to:t.to}},[t._v("View")]):n("v-btn",{attrs:{flat:"",disabled:t.isLoadingInParent||!t.isVisible},on:{click:function(e){return t.$emit("view")}}},[t._v("View")]),n("v-btn",{attrs:{flat:"",disabled:t.isLoadingInParent||!t.isVisible},on:{click:function(e){return t.$emit("share")}}},[n("v-icon",{attrs:{left:""}},[t._v("share")]),t._v("\n        Share\n      ")],1),n("v-spacer"),n("v-btn",{attrs:{flat:"",disabled:t.isLoadingInParent||!t.isVisible},on:{click:function(e){return t.$emit("delete")}}},[n("v-icon",{attrs:{left:""}},[t._v("delete")]),t._v("\n        Delete\n      ")],1)],1)],{disabled:t.isLoadingInParent||!t.isVisible})],2)},i=[],a=n("34b9"),s=n("6a92"),o=n("8b06"),u=n("8398"),l=n("b758"),c={mixins:[u["a"]],components:{UnitEntry:o["a"],LoadingIndicator:l["a"]},props:{squad:{type:Object,required:!0},to:{type:String,default:""},isVisible:{type:Boolean,default:!0},isLoadingInParent:{type:Boolean,default:!1}},computed:{squadCost:function(){var t=this;return this.squad.units.map((function(e){var n=e.id;return t.getUnit(n)})).reduce((function(t,e){return t+ +(e.cost||0)}),0)},fullUnits:function(){var t=this;return a["Q"].map((function(e){var n=t.squad.units.find((function(t){return t.position===e}));return n||(n=Object(s["d"])({isEmpty:!0,bbOrder:null,position:e})),n}))}},methods:{getUnitEntryKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(JSON.stringify(t),"-").concat(e)}}},d=c,f=n("2877"),p=Object(f["a"])(d,r,i,!1,null,null,null);e["a"]=p.exports},be39:function(t,e,n){},be55:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",t._b({staticClass:"squad-card--editable"},"v-card",t.$attrs,!1),[n("v-layout",{staticClass:"px-2 pt-2",attrs:{row:"","align-center":""}},[n("v-flex",[n("v-text-field",{attrs:{label:"Squad Name"},model:{value:t.squad.name,callback:function(e){t.$set(t.squad,"name",e)},expression:"squad.name"}})],1),n("v-flex",{staticClass:"ml-2",staticStyle:{"flex-grow":"0"}},[n("h2",{staticClass:"subheading"},[t._v("\n        "+t._s(t.squadCost)+" Cost\n      ")])])],1),n("v-layout",{staticClass:"px-2",attrs:{row:"",wrap:""},on:{mouseleave:function(e){t.highlightedIndex=-1}}},[t.isLoadingInParent?n("loading-indicator",{attrs:{loadingMessage:"Loading squad data"}}):[t._l(t.fullUnits,(function(e,r){return n("unit-entry",{key:t.getUnitEntryKey(e,r),staticClass:"d-flex py-1",style:"\n          align-items: center;\n          border: 1px solid "+(t.selectedIndex===r?"yellow":"var(--background-color-alt)")+";\n          position: relative;",attrs:{xs12:"",sm6:"",index:r,unit:e,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,isLead:r===t.squad.lead,isFriend:r===t.squad.friend},on:{mouseover:function(e){t.highlightedIndex=r},click:function(){t.selectedIndex=t.selectedIndex!==r?r:-1}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.highlightedIndex===r,expression:"highlightedIndex === i"}],style:"\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            z-index: 10;\n            cursor: pointer;\n          ",attrs:{slot:"before-content"},slot:"before-content"},[n("v-container",{staticStyle:{background:"rgba(0, 0, 0, 0.5)"},attrs:{fluid:"","justify-center":"","fill-height":""}},[n("v-flex",{attrs:{"align-center":""}},[n("v-btn",{staticStyle:{"pointer-events":"none"},attrs:{flat:"",block:""}},[n("v-icon",{attrs:{left:""}},[t._v("create")]),t._v("\n                Edit\n              ")],1)],1)],1)],1)])})),t.squad.units[t.selectedIndex]?n("v-flex",{staticClass:"py-1",attrs:{xs12:""}},[n("v-divider")],1):t._e(),n("v-layout",{attrs:{column:""}},[n("v-flex",[n("span",{domProps:{textContent:t._s(t.unitSelectionText)}})]),t.squad.units[t.selectedIndex]?n("unit-entry-editor",{staticClass:"py-2",attrs:{squad:t.squad,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,selectedIndex:t.selectedIndex},on:{newunits:function(e){t.selectedIndex=e.newIndex,t.$emit("newunits",e.units)},newsquad:function(e){t.selectedIndex=e.newIndex,t.$emit("newsquad",e.squad)}}}):t._e()],1)]],2),n("v-divider",{staticClass:"mt-2"}),t._t("card-actions",[n("v-card-actions",{staticStyle:{"justify-content":"space-between"},attrs:{disabled:t.isLoadingInParent}},[n("v-btn",{attrs:{flat:"",disabled:t.isLoadingInParent},on:{click:t.onSaveClick}},[n("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n        Save Squad\n      ")],1),n("v-btn",{attrs:{flat:"",disabled:t.isLoadingInParent,to:t.redirectOnCancel?"/tools/squads":void 0},on:{click:function(e){return t.$emit("cancel")}}},[n("span",[t._v("Cancel")])])],1)])],2)},i=[],a=n("a34a"),s=n.n(a),o=n("34b9"),u=n("6a92"),l=n("8b06"),c=n("8398"),d=n("b758"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{staticClass:"unit-entry-editor",attrs:{row:"",wrap:""}},[n("v-dialog",{attrs:{value:!!t.activeDialog,lazy:""},on:{input:function(e){t.activeDialog=""}}},["units"===t.activeDialog?n("unit-selector",{on:{input:function(e){return t.setUnit(e.data)},cancel:function(e){t.activeDialog=""}}}):"extraSkills"===t.activeDialog?n("es-selector",{on:{input:function(e){return t.setExtraSkill(e.id)},cancel:function(e){t.activeDialog=""}}}):"spheres"===t.activeDialog?n("sphere-selector",{on:{input:function(e){return t.onSelectSphere(e.id)},cancel:function(e){t.activeDialog=""}}}):t._e()],1),n("v-layout",{staticStyle:{width:"100%"},attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-subheader",[t._v("Unit")])],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("unit-card",{key:t.unitData.id,staticClass:"no-highlight ml-1",attrs:{entry:t.unitData}})],1),n("v-layout",{attrs:{row:"",wrap:"",grid:""}},[n("v-flex",{staticClass:"px-1",attrs:{xs12:""}},[n("v-btn",{attrs:{block:""},on:{click:function(e){t.activeDialog="units"}}},[t._v("\n          Select Unit\n        ")])],1),n("v-flex",{staticClass:"px-1",attrs:{sm6:""}},[n("v-btn",{attrs:{block:"",disabled:t.unitData.name===t.squadFillerMapping.EMPTY},on:{click:function(e){return t.setUnit(t.squadFillerMapping.EMPTY)}}},[t._v("\n          Set Empty\n        ")])],1),n("v-flex",{staticClass:"px-1",attrs:{sm6:""}},[n("v-btn",{attrs:{block:"",disabled:t.unitData.name===t.squadFillerMapping.ANY},on:{click:function(e){return t.setUnit(t.squadFillerMapping.ANY)}}},[t._v("\n          Set Any\n        ")])],1)],1)],1),n("v-flex",{attrs:{xs12:""}},[n("v-container",{staticClass:"pa-1",attrs:{fluid:"","grid-list-md":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-subheader",[t._v("Position")])],1),n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.unitPositionMapping,(function(e){return n("v-flex",{key:e,attrs:{xs12:"",sm6:""}},[n("v-btn",{attrs:{block:"",color:e===t.activeUnit.position?"primary":void 0},on:{click:function(n){return t.setPosition(e)}}},[t._v("\n            "+t._s(e)+"\n          ")])],1)})),1)],1)],1),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-select",{staticClass:"px-1",attrs:{items:t.leadFriendPossibilities,value:t.leadFriendStatus,disabled:t.isEmptyUnit,label:"Leader or Friend?"},on:{input:t.setLeadFriendStatus}})],1),n("v-flex",{attrs:{xs6:"",sm4:""}},[n("v-layout",{attrs:{"align-items-center":""}},[n("v-flex",{staticClass:"d-flex-container items-center",staticStyle:{flex:"none"},attrs:{id:"bb-order-label"}},[n("v-subheader",{staticClass:"pl-1",staticStyle:{flex:"auto"}},[t._v("BB Order")])],1),n("v-flex",{staticClass:"d-flex-container items-center"},[n("v-select",{staticClass:"pr-1",attrs:{"aria-labelledby":"bb-order-label",value:t.activeUnit.bbOrder,items:t.bbOrderPossibilities},on:{input:t.setBbOrder}})],1)],1)],1),n("v-flex",{attrs:{xs6:"",sm4:""}},[n("v-layout",{attrs:{"align-items-center":""}},[n("v-flex",{staticClass:"d-flex-container items-center",staticStyle:{flex:"none"},attrs:{id:"action-label"}},[n("v-subheader",{staticClass:"pl-1",staticStyle:{flex:"auto"}},[t._v("Action")])],1),n("v-flex",{staticClass:"d-flex-container items-center"},[n("v-select",{staticClass:"pr-1",attrs:{"aria-labelledby":"action-label",disabled:t.isEmptyUnit,items:t.actionPossibilities,value:t.activeUnit.action},on:{input:t.setAction}})],1)],1)],1),n("v-flex",{attrs:{xs6:""}},[n("v-layout",{attrs:{"align-items-center":""}},[n("v-flex",{staticClass:"d-flex-container items-center",staticStyle:{flex:"none"},attrs:{id:"type-label"}},[n("v-subheader",{staticClass:"pl-1",staticStyle:{flex:"auto"}},[t._v("Type")])],1),n("v-flex",{staticClass:"d-flex-container items-center"},[n("v-select",{staticClass:"pr-1",attrs:{"aria-labelledby":"type-label",disabled:t.isEmptyUnit,items:t.typePossibilities,value:t.activeUnit.type},on:{input:t.setType}})],1)],1)],1),n("v-flex",{attrs:{xs6:""}},[n("v-layout",{attrs:{"align-items-center":""}},[n("v-flex",{staticClass:"d-flex-container items-center",staticStyle:{flex:"none"},attrs:{id:"boost-label"}},[n("v-subheader",{staticClass:"pl-1",staticStyle:{flex:"auto"}},[t._v("OE+ Level")])],1),n("v-flex",{staticClass:"d-flex-container items-center"},[n("v-select",{staticClass:"pr-1",attrs:{"aria-labelledby":"boost-label",disabled:t.isEmptyUnit||!t.canEditBoost,items:t.boostPossibilities,value:t.activeUnit.omniBoost},on:{input:t.setOmniBoost}})],1)],1)],1),n("v-layout",{staticStyle:{width:"100%","padding-bottom":"8px"},attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-subheader",[t._v("Extra Skill")])],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("extra-skill-card",{key:t.esData.id,staticClass:"no-highlight ml-1",attrs:{showAssociatedUnits:!1,entry:t.esData}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-layout",{attrs:{row:"",wrap:"","align-center":"","fill-height":""}},[n("v-flex",{staticClass:"px-1",attrs:{xs12:""}},[n("v-btn",{attrs:{block:"",disabled:t.isEmptyUnit},on:{click:function(e){t.activeDialog="extraSkills"}}},[t._v("\n            Select Extra Skill\n          ")])],1),n("v-flex",{staticClass:"px-1",attrs:{xs12:""}},[n("v-btn",{attrs:{block:"",disabled:0===t.esData.id},on:{click:function(e){return t.setExtraSkill("")}}},[t._v("\n            Clear Extra Skill\n          ")])],1)],1)],1)],1),n("v-layout",{attrs:{row:"",wrap:""}},[t.$vuetify.breakpoint.smAndUp?n("v-flex",{attrs:{xs12:""}},[n("v-subheader",[t._v("Spheres")])],1):t._e(),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-layout",{attrs:{column:""}},[t.$vuetify.breakpoint.xsOnly?n("v-flex",[n("v-subheader",[t._v("Sphere 1")])],1):t._e(),n("v-flex",[n("sphere-card",{key:(t.sphereData[0]||t.emptySphere).id,staticClass:"no-highlight ml-1",attrs:{entry:t.sphereData[0]||t.emptySphere}})],1),n("v-flex",{staticClass:"px-1"},[n("v-btn",{attrs:{block:"",disabled:t.isEmptyUnit},on:{click:function(){t.lastSelectedSphereIndex=0,t.activeDialog="spheres"}}},[t._v("\n            Select Sphere 1\n          ")])],1),n("v-flex",{staticClass:"px-1"},[n("v-btn",{attrs:{block:"",disabled:!t.sphereData[0]},on:{click:function(e){t.setSpheres(t.activeUnit.spheres.slice(1,2))}}},[t._v("\n            Clear Sphere 1\n          ")])],1)],1)],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-layout",{attrs:{column:""}},[t.$vuetify.breakpoint.xsOnly?n("v-flex",[n("v-subheader",[t._v("Sphere 2")])],1):t._e(),n("v-flex",[n("sphere-card",{key:(t.sphereData[1]||t.emptySphere).id,staticClass:"no-highlight ml-1",attrs:{entry:t.sphereData[1]||t.emptySphere}})],1),n("v-flex",{staticClass:"px-1"},[n("v-btn",{attrs:{block:"",disabled:t.isEmptyUnit},on:{click:function(){t.lastSelectedSphereIndex=1,t.activeDialog="spheres"}}},[t._v("\n            Select Sphere 2\n          ")])],1),n("v-flex",{staticClass:"px-1"},[n("v-btn",{attrs:{block:"",disabled:!t.sphereData[1]},on:{click:function(e){t.setSpheres(t.activeUnit.spheres.slice(0,1))}}},[t._v("\n            Clear Sphere 2\n          ")])],1)],1)],1)],1),!t.isEmptyUnit&&Array.isArray(t.unitData.feskills)?n("v-layout",{staticStyle:{width:"100%"},attrs:{column:""}},[n("v-flex",[n("v-subheader",[n("span",[t._v("SP Enhancements")]),t.activeUnit.sp?n("span",{staticClass:"pl-1"},[t._v("\n          ("+t._s(t.activeUnit.sp)+")\n        ")]):t._e()])],1),n("v-flex",[n("sp-build-table",{attrs:{value:t.activeUnit.sp,feSkills:t.unitData.feskills},on:{input:t.setEnhancements}})],1)],1):t._e()],1)},p=[],h=n("de7e"),v=n("0a43"),g=n("3e0d"),b=n("5044"),m=n("4db1"),y=n("0e03"),A=n("083f"),S=n("fca9"),x=n("00e0"),w=n("4764"),O=n("5ab2");function k(t,e){if(null==t)return{};var n,r,i=E(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function E(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function C(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(r,i)}function q(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){C(a,r,i,s,o,"next",t)}function o(t){C(a,r,i,s,o,"throw",t)}s(void 0)}))}}function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(t){return M(t)||U(t)||B(t)||I()}function I(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B(t,e){if(t){if("string"===typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(t,e):void 0}}function U(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function M(t){if(Array.isArray(t))return L(t)}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}new S["a"]({prefix:"[UnitEntryEditor]"});var D={mixins:[c["a"]],components:{UnitCard:h["a"],ExtraSkillCard:v["a"],SphereCard:g["a"],SpBuildTable:b["a"],UnitSelector:m["a"],EsSelector:y["a"],SphereSelector:A["a"]},props:{squad:{type:Object,required:!0},selectedIndex:{type:Number,default:-1}},computed:{activeUnit:function(){return this.localSquad.units[this.selectedIndex]||{}},isEmptyUnit:function(){return this.unitData.name===o["L"].EMPTY},unitData:function(){var t=this.getUnit(this.activeUnit.id);return Object(x["u"])(t)?t:Object(x["k"])(this.activeUnit.id===o["L"].EMPTY)},esData:function(){var t=this.getExtraSkill(this.activeUnit.es);return Object(w["c"])(t)?t:Object(w["b"])()},sphereData:function(){var t=this;return this.activeUnit.spheres.map((function(e){var n=t.getItem(e);return Object(O["j"])(n)?n:t.emptySphere}))},emptySphere:function(){return Object(O["c"])()},unitPositionMapping:function(){return o["Q"]},squadFillerMapping:function(){return o["L"]},leadFriendPossibilities:function(){return["Leader","Friend","Neither"]},leadFriendStatus:function(){return[this.localSquad.lead===this.selectedIndex&&"Leader",this.localSquad.friend===this.selectedIndex&&"Friend","Neither"].find((function(t){return t}))},bbOrderPossibilities:function(){return Object.freeze(new Array(6).fill(0).map((function(t,e){return e+1})))},actionPossibilities:function(){var t=this,e=[{text:"BB",value:o["M"].BB},{text:"SBB",value:o["M"].SBB},{text:"UBB",value:o["M"].UBB}].filter((function(e){var n=e.value;return t.activeUnit.id===o["L"].ANY||t.unitData[n]||t.activeUnit.action===n})),n=[{text:"None",value:o["M"].NONE},!this.isEmptyUnit&&{text:"Attack",value:o["M"].ATK}].filter((function(t){return t}));return n.concat(e)},typePossibilities:function(){return["L","A","B","G","O","R"].map((function(t){return{value:t,text:o["i"][t]}}))},boostPossibilities:function(){return[0,1,2,3]},canEditBoost:function(){return 8===+this.unitData.rarity||this.activeUnit.id===o["L"].ANY}},data:function(){return{activeDialog:"",localSquad:{},lastSelectedSphereIndex:-1}},methods:{onSelectSphere:function(t){var e=this.activeUnit.spheres.slice();this.lastSelectedSphereIndex>-1&&!e.includes(t)&&!e.includes(+t)&&(e[this.lastSelectedSphereIndex]?e[this.lastSelectedSphereIndex]=t:e.length<2?e.push(t):e=[e[1],t],this.setSpheres(e)),this.activeDialog=""},emitUnits:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;this.$emit("newunits",{units:t,newIndex:isNaN(e)?this.selectedIndex:e}),this.activeDialog&&(this.activeDialog="")},emitSquad:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;this.$emit("newsquad",{squad:t,newIndex:isNaN(e)?this.selectedIndex:e}),this.activeDialog&&(this.activeDialog="")},updateCurrentUnit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.lastSelectedSphereIndex=-1,this.emitUnits([].concat(j(this.localSquad.units.slice(0,this.selectedIndex)),[T({},this.activeUnit,{},t)],j(this.localSquad.units.slice(this.selectedIndex+1))))},setPosition:function(t){var e=this,n=this.localSquad,r=n.units,i=n.lead,a=n.friend,s=r.find((function(e){return e.position===t}));if(s&&s!==this.activeUnit){var l=r.filter((function(t,n){return n!==e.selectedIndex&&t!==s})),c=Object(u["k"])([].concat(j(l),[T({},s,{position:this.activeUnit.position}),T({},this.activeUnit,{position:t})]),!1),d=o["Q"].indexOf(t);this.emitSquad(T({},this.localSquad,{lead:this.selectedIndex===i?d:i,friend:this.selectedIndex===a?d:a,units:c}),d)}},setLeadFriendStatus:function(t){var e=this.localSquad,n=e.lead,r=e.friend;"Leader"===t?(r===this.selectedIndex&&(this.localSquad.friend=n),this.localSquad.lead=this.selectedIndex):"Friend"===t?(n===this.selectedIndex&&(this.localSquad.lead=r),this.localSquad.friend=this.selectedIndex):n===this.selectedIndex?this.localSquad.lead=-1:r===this.selectedIndex&&(this.localSquad.friend=-1),this.emitSquad(this.localSquad)},setBbOrder:function(t){var e=this,n=this.localSquad.units.find((function(e){return e.bbOrder===t}));if(n&&n!==this.activeUnit){var r=this.localSquad.units.filter((function(t,r){return r!==e.selectedIndex&&t!==n})),i=Object(u["k"])([].concat(j(r),[T({},n,{bbOrder:this.activeUnit.bbOrder}),T({},this.activeUnit,{bbOrder:t})]),!1);this.emitUnits(i)}},setAction:function(t){this.actionPossibilities.some((function(e){var n=e.value;return t===n}))&&this.updateCurrentUnit({action:t})},setType:function(t){this.updateCurrentUnit({type:t})},setOmniBoost:function(t){this.updateCurrentUnit({omniBoost:t})},setEnhancements:function(t){this.updateCurrentUnit({sp:t})},setUnit:function(){var t=q(s.a.mark((function t(e){var n,r,i,a,l,c,d,f=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(void 0===e.then){t.next=5;break}return t.next=3,e.then((function(t){n=t}));case 3:t.next=6;break;case 5:n=this.getUnit(e);case 6:(Object(x["u"])(n)||e===o["L"].ANY||e===o["L"].EMPTY)&&(r=this.localSquad,i=r.lead,a=r.friend,l=r.name,c=Object(u["b"])({lead:i,friend:a,name:l,units:[].concat(j(this.localSquad.units.slice(0,this.selectedIndex)),[T({},this.activeUnit,{id:void 0!==e.then&&n.id||e,sp:""})],j(this.localSquad.units.slice(this.selectedIndex+1)))},{getUnit:function(t){return+t===+n.id?n:f.getUnit(t)},getExtraSkill:this.getExtraSkill,getItem:this.getItem}),c.messages,d=k(c,["messages"]),this.emitSquad(d));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),setExtraSkill:function(t){this.updateCurrentUnit({es:t})},setSpheres:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.map((function(t){return(t||"").toString()})).filter((function(t){return t}));this.updateCurrentUnit({spheres:e})}},watch:{squad:{immediate:!0,deep:!0,handler:function(t){this.localSquad=Object(u["a"])(t)}}}},F=D,N=(n("021b"),n("2877")),R=Object(N["a"])(F,f,p,!1,null,"6c20bcc0",null),V=R.exports;function z(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(r,i)}function $(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){z(a,r,i,s,o,"next",t)}function o(t){z(a,r,i,s,o,"throw",t)}s(void 0)}))}}var W={mixins:[c["a"]],components:{UnitEntry:l["a"],LoadingIndicator:d["a"],UnitEntryEditor:V},props:{squad:{type:Object,required:!0},isLoadingInParent:{type:Boolean,default:!1},redirectOnCancel:{type:Boolean,default:!0},squadId:{type:String,default:""}},computed:{squadCost:function(){var t=this;return this.squad.units.map((function(e){var n=e.id;return t.getUnit(n)})).reduce((function(t,e){return t+ +(e.cost||0)}),0)},fullUnits:function(){var t=this;return o["Q"].map((function(e){var n=t.squad.units.find((function(t){return t.position===e}));return n||(n=Object(u["d"])({isEmpty:!0,bbOrder:null,position:e})),n}))},unitSelectionText:function(){return["Select a unit to edit its details.",this.squad.units[this.selectedIndex]&&"Select the same unit to deselect it."].filter((function(t){return t})).join(" ")}},data:function(){return{highlightedIndex:-1,selectedIndex:-1}},methods:{getUnitEntryKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(JSON.stringify(t),"-").concat(e)},onSaveClick:function(){var t=$(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("squads/storeSquad",{server:this.$store.state.settings.activeServer,squad:this.squad,id:this.squadId||void 0});case 2:e=t.sent,this.$emit("save",e);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},watch:{selectedIndex:function(){this.highlightedIndex=-1}}},K=W,H=(n("6cf1"),Object(N["a"])(K,r,i,!1,null,null,null));e["a"]=H.exports},be6b:function(t,e,n){},be8b:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"buff-table-grid",style:t.mainGridStyle},[t.showHeaders?[n("span",{staticClass:"id-cell header-cell"},[n("v-btn",{staticStyle:{"min-height":"40px"},attrs:{flat:"",small:""},on:{click:t.toggleAllEffectViews}},[n("v-icon",[t._v(t._s(t.hiddenIndices.length===t.mappedEffects.length?"fullscreen":"fullscreen_exit"))]),t._v("\n        ID\n      ")],1)],1),t._m(0)]:t._e(),t._l(t.mappedEffects,(function(e,r){return[n("span",{key:e.id+"-"+r+"=id",staticClass:"id-cell"},[n("v-btn",{staticClass:"collapse-btn",attrs:{flat:"",small:""},on:{click:function(){return t.toggleEffectView(r)}}},[n("span",{staticStyle:{flex:"1 1 100%"}},[n("v-icon",[t._v(t._s(t.hiddenIndices.includes(r)?"keyboard_arrow_up":"keyboard_arrow_down"))])],1),n("span",{staticStyle:{flex:"1 1 100%"}},[t._t("default",[t._v("\n            "+t._s(e.id)+"\n          ")])],2),n("span",{staticStyle:{flex:"1 1 100%"}},[n("v-icon",[t._v(t._s(t.hiddenIndices.includes(r)?"keyboard_arrow_down":"keyboard_arrow_up"))])],1)])],1),n("span",{key:e.id+"-"+r+"-value-subgrid",staticClass:"value-subgrid"},[t.hiddenIndices.includes(r)?n("span",{staticClass:"property-cell",staticStyle:{"grid-column":"span 2"},domProps:{textContent:t._s(t.getEffectsHiddenText(t.getSortedProps(e.effect).length,e.effect))}}):[t._l(t.getSortedProps(e.effect),(function(i,a){var s,o,u;return[n("span",{key:e.id+"-"+r+"-"+a+"-property",class:(s={"property-cell":!0},s[a%2===0?"even-row":"odd-row"]=!0,s["only-row"]=1===t.getSortedProps(e.effect).length,s)},[n("span",{domProps:{textContent:t._s(i)}})]),t.hasBuffTable&&t.isProcBuffList(i)?n("span",{key:e.id+"-"+r+"-"+a+"-table",class:(o={"value-cell has-table":!0},o[a%2===0?"even-row":"odd-row"]=!0,o["only-row"]=1===t.getSortedProps(e.effect).length,o)},[n("buff-table-grid",{attrs:{effects:e.effect[i]}})],1):n("span",{key:e.id+"-"+r+"-"+a+"-value",class:(u={"value-cell":!0},u[a%2===0?"even-row":"odd-row"]=!0,u["only-row"]=1===t.getSortedProps(e.effect).length,u),staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[t._v("\n            "+t._s(e.effect[i])+"\n            "),t.isEmptyArray(e.effect[i])?n("span",{staticStyle:{"padding-left":"4px"}},[t._v("\n              (None)\n            ")]):t._e()])]}))]],2)]}))],2)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"value-subgrid header-grid"},[n("span",{staticClass:"property-cell header-cell"},[t._v("\n        Buff Property\n      ")]),n("span",{staticClass:"value-cell header-cell"},[t._v("\n        Buff Value\n      ")])])}],a=n("abcf"),s=n("c7df"),o={props:{effects:{type:Array,default:function(){return[]}},showHeaders:{type:Boolean,default:!1},translateEffectNames:{type:Boolean,default:!0}},computed:{idKeys:function(){return["passive id","unknown passive id","proc id","unknown proc id"]},mappedEffects:function(){return this.effects.map(this.getEffectDetails)},hasBuffTable:function(){return this.mappedEffects.some((function(t){return"passive"===t.type&&66===+t.id}))},gridRowConfig:function(){var t=this.mappedEffects.length;return[this.showHeaders?"minmax(40px, auto)":"","repeat(".concat(t,", auto)")].filter((function(t){return t})).join(" ")},mainGridStyle:function(){return{"grid-template-rows":this.gridRowConfig}}},data:function(){return{sortedPropsCache:new WeakMap,hiddenIndices:[]}},methods:{getEffectDetails:function(t){var e=this,n=Object(a["getEffectType"])(t),r=Object(a["getEffectId"])(t),i={},o=Object(s["c"])(t);return Object.keys(o).forEach((function(t){e.idKeys.includes(t)||(i[t]=o[t])})),this.translateEffectNames&&(i["translated name"]=Object(s["a"])(t)||"Unknown buff ".concat(r)),{type:n,id:r,effect:i}},getSortedProps:function(t){return this.sortedPropsCache.has(t)||this.sortedPropsCache.set(t,Object.freeze(Object.keys(t).sort((function(t,e){return"translated name"===t?-1:"translated name"===e?1:t<e?-1:1})))),this.sortedPropsCache.get(t)},toggleEffectView:function(t){this.hiddenIndices.includes(t)?this.hiddenIndices=this.hiddenIndices.filter((function(e){return e!==t})):this.hiddenIndices.push(t)},toggleAllEffectViews:function(){this.hiddenIndices.length===this.mappedEffects.length?this.hiddenIndices=[]:this.hiddenIndices=this.mappedEffects.map((function(t,e){return e}))},isProcBuffList:function(t){return"triggered effect"===t},getValueSubgridStyle:function(t){var e=Object.keys(t);return{"grid-template-rows":"repeat(".concat(e,", minmax(36px, auto))")}},isEmptyArray:function(t){return Array.isArray(t)&&0===t.length},getEffectsHiddenText:function(t,e){var n=e["translated name"]||Object(s["a"])(e),r=(e["triggered effect"]||[]).map(s["a"]);return["".concat(t," ").concat(1!==t?"Effects":"Effect"," Hidden"),n&&"for ".concat(n),r.length>0&&"(".concat(r.join(", "),")")].filter((function(t){return t})).join(" ")}},name:"buff-table-grid"},u=o,l=(n("c6de"),n("2877")),c=Object(l["a"])(u,r,i,!1,null,null,null);e["a"]=c.exports},c31a:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAWCAMAAAARtodwAAAAA3NCSVQICAjb4U/gAAADAFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABdQwleRAliSAlnTAl0WQuWeA2afA6fgA6hgg6igw6jhA6niA6pig6qiw+tjQ+fikytjg+tjw+wkA+wkQ+ykhGzlBa0lRe1lxy3miO7ny20nk69oTO+ozbBp0C/qE7BqU/ErErJs1vKtFvLtV7NuWbPu23WxX/XyIbYyIjp4bzt5sft5snv6M3////////v5nCgAAAA/3RSTlMA/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3N8PqRcAAAAZUlEQVQY043PsQqAMAwE0F4MgqOLq///gRJsS85FxSjYZgoPclw0vUf7hOeK36vs8CnInlGjuGFfgrAKY05fQ//IwFPlEh3fnUWLgNRHjtsAL/Ml1QwQkLds7kwpidw5a7MhWl8ckMkhdzTgrLoAAAAASUVORK5CYII="},c567:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAADAFBMVEUAAAAAAAAPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8QEBARERESEhIiIiIkJCQsLCw3G2U1HlstLS03HGg4H104GnM5G3E6GXw6JVo9GYUyMjI9Goc0NDRFIIJDK2I5OTlDHJxEHJo8PDxHHKZNJoBGHKxHG65IHKtJHahLHqhIHLVMHrRHO1ZLHbpCQkJMHb5PH7dIPVZOHr1cJplVMHtbKJZFRUVZI61dKpFQH8VSIMJNPmBfKZxHR0dgLJVISEhRIMtMRFZNQ1hSIMxJSUlSIM9UIcpjKqFMR1FiJ7VOSVNWItFaI85YItVNTU5YItZTS1tPT09dJNZdJNlUS2BnKcVqK7tdQ3hgJNxWTmBfR3dZTmdVU1dnJ91yLcNxLMx2MMV5L9FeVGl9M8ZzYQR6L+WCN8aANNOAMtyFNtSCM+aEM+eINt6GPsiERbmMPNOOOd9mZmaNN+poZ2hqamqUPOttbW18XZtubm6QUcVzcnSIXa2MWreQV7t0dHSdSO11dXWGZ6V4eHiVWsV6enqHbp58fHyCgoKUdrCGhoaYc7eHh4edcMSTeqykatWIiIiKioqNjY2sbeSoctarcNyxa+yQkJCRkZGSkpK0b+6xcumueN22cPCwduSrftKWlpaufdi1du2Xl5eyfeG1eunAoQavgteZmZmpicW4ee+ampqzgd62gOW4fuq8gPG+gvKhoaG+g/K2jNq5ieGlpaW4l9S8mdurq6u9mdusrKy8nNitra3ElujAnd/HmO+xsbHDoOLEoeOzs7O0tLS1tbXIounLoe+5ubm6urq9vb2+vr7AwMDBwcHCwsLExMTHx8fKysrXwejNzc3Ozs7bwvDR0dHdyuzU1NTV1dXW1tb/30HX19fZ2dna2trc3Nzf39/h4eHi4uLq2/fk5OTl5eXm5ubp6env4/nq6urr6+vw5vnt7e3x6fju7u7z6/nw8PD/87n07vry8vLz8/P19fWNGpipAAAAj3RSTlMA/wIEBm1unZ6gsbLCyMnKz/Hy/f///////////////////////////////fz//v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////so7r1QAAALpSURBVDjLY2AgHjCx8goKi4gIC/KxMmGRZuYS9Zhz/c3fv2+uz/EQ5WJGl2cXq3v8/9+vb1++fPv17//jOjF2VHke2Zv/fp2t87IEAq/6c7/+3ZTlQZYX8Hr963xk7owDJw7v3biyJy3y/K/XjgIIed7Ibz/Whk7YfPDEhTMn9m1bPb0peO2PbzF8cPtV3/9YlTL5zs8/9y9cOHN817plM9viV/34oAp1B4v49R/7U6Y+/P7109uLFy+e3LF+6fyZ7dH7f1wXZwEr4Kr58TydEQG2rFk6F0jlPvtRwwUOH9F7XxamMj59+hsEGJ/+ZlyygPH3U8akhV/uiYJCjM3xy8v0DqDEBhBg3PB0AyOYqEx/+cWRDeSFKZ/PuvWBFEBsABoBMoCxwu3U5ym8QAWC578ssm8BK9i5a89yoO7fv4EGVBXaL/xyThCoQPju54nOFTATuroYN/wGMquLMj0nfr4nDFQg8uhzr3s2UMFTIGBsaAAaATSgPCczqPPzIxGQgrsf+x0yYSbU1jICXfubsTgn0673412QAuHL72frJ4IVlJaWlQEZ+flAR2Yl6s/+cAlkheCmV4c0Q2AmFDCCaKARCSGah16vBTmSr/HFYx8nqBuegn0I9quTz6MX9SBvsmnd/tKswbgBAhiBDszIADqUUaP5y20tNnBQb3p12QYpLpKjwsKBlM3lV5tEwSmPy//K593yJta2LmEBYUAQEOZia20iv/vzFX8uSHSLTbr1rE7a2MzMxcUvIMDPxcXMzFiu7vGtSWKQ6GbgkNz64G69jI6BnqmVKRDpGejI1N99sFWSE5ak+NS33n2y21xJW8/A0NBAT1vJfPfju1vV+ZASrerCq9+utfoqK6qoKSj7tl79dnWhqgBysuaTaFx77cvjY4unTVl05NGXa2sbJfhQMwanqG73rN03nr979/zG7lnduqKcGFmPW1Qqpr5/0qT++hgpUW5mbLmTlV8IlHmF+FmZScjzAMUkXkPay/MUAAAAAElFTkSuQmCC"},c6de:function(t,e,n){"use strict";var r=n("be39"),i=n.n(r);i.a},c7e9:function(t,e,n){},ca29:function(t,e,n){"use strict";var r=n("7ac9"),i=n.n(r);i.a},d0b2:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("module-checker",{attrs:{requiredModules:t.requiredModules}},[n("promise-wait",{attrs:{promise:t.initialLoadPromise}},[n("v-container",{directives:[{name:"resize",rawName:"v-resize",value:t.onPageReady,expression:"onPageReady"}],staticClass:"squad-page",attrs:{fluid:""}},[n("v-container",{staticClass:"pa-0"},[n("v-layout",{attrs:{"justify-center":""}},[t.editMode?n("v-flex",{attrs:{xs12:""}},[n("squad-list-card-editable",{attrs:{squad:t.tempSquad,squadId:t.id,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,redirectOnCancel:!1,isLoadingInParent:t.isLoadingSquadData},on:{newsquad:function(e){return t.tempSquad=e},newunits:t.onNewUnits,save:function(){t.squad=t.tempSquad,t.editMode=!1},cancel:function(e){t.editMode=!1}}})],1):n("v-flex",{attrs:{xs12:""}},[n("squad-list-card",{key:t.squadCode,attrs:{squad:t.squad,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,isLoadingInParent:t.isLoadingSquadData},scopedSlots:t._u([{key:"card-actions",fn:function(e){var r=e.disabled;return n("v-card-actions",{},[n("v-btn",{attrs:{flat:"",icon:t.minimizeSquadActionButtons,disabled:r},on:{click:function(e){t.editMode=!0}}},[n("v-icon",{attrs:{left:!t.minimizeSquadActionButtons}},[t._v("edit")]),t.minimizeSquadActionButtons?t._e():n("span",[t._v("\n                    Edit\n                  ")])],1),n("v-btn",{attrs:{flat:"",icon:t.minimizeSquadActionButtons,disabled:r},on:{click:function(e){t.activeSquadDialog="share"}}},[n("v-icon",{attrs:{left:!t.minimizeSquadActionButtons}},[t._v("share")]),t.minimizeSquadActionButtons?t._e():n("span",[t._v("\n                    Share\n                  ")])],1),t.squadCode?n("v-btn",{attrs:{flat:"",icon:t.minimizeSquadActionButtons,disabled:r,to:t.getSquadUrl(t.squadCode)}},[n("v-icon",{attrs:{left:!t.minimizeSquadActionButtons}},[t._v("file_copy")]),t.minimizeSquadActionButtons?t._e():n("span",[t._v("\n                    Clone\n                  ")])],1):t._e(),n("v-spacer"),n("v-btn",{attrs:{flat:"",icon:t.minimizeSquadActionButtons,disabled:r},on:{click:function(e){t.activeSquadDialog="delete"}}},[n("v-icon",{attrs:{left:!t.minimizeSquadActionButtons}},[t._v("delete")]),t.minimizeSquadActionButtons?t._e():n("span",[t._v("\n                    Delete\n                  ")])],1)],1)}}],null,!1,962298881)})],1)],1)],1),n("v-flex",{attrs:{xs12:""}},[n("v-divider",{staticClass:"mt-2"})],1),n("v-flex",{attrs:{xs12:""}},[n("v-card",[t.isLoadingSquadData||t.editMode?t._e():n("tab-container",{staticClass:"mt-2 mx-0",attrs:{centeredTabs:!0,growTabs:!0,tabs:t.tabConfig},model:{value:t.currentTabIndex,callback:function(e){t.currentTabIndex=e},expression:"currentTabIndex"}},[n("v-layout",{attrs:{slot:"multidex-links",column:""},slot:"multidex-links"},[n("multidex-links",{attrs:{getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,squad:t.squad}})],1),n("v-layout",{staticClass:"buff-lists",attrs:{slot:"buffs",column:""},slot:"buffs"},[n("squad-buff-expandable-list-view",{attrs:{getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,getLeaderSkill:t.getLeaderSkill,squad:t.squad,topNavbarHeight:t.topNavbarHeight}})],1),n("v-layout",{attrs:{slot:"spark-statistics"},slot:"spark-statistics"},[n("squad-spark-statistics-area",{attrs:{getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,squad:t.squad,initialSimulatorOptions:t.simulatorOptions},on:{simoptions:function(e){return t.simulatorOptions=e},share:function(e){t.sparkResultToShare=e,t.activeSquadDialog="share"},apply:t.applySparkResult,currentsquadresult:function(e){return t.sparkResultToShare=e}}})],1),n("v-layout",{staticStyle:{"overflow-x":"auto"},attrs:{slot:"arena"},slot:"arena"},[n("squad-arena-suggestion-table",{attrs:{getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,squad:t.squad}})],1)],1)],1)],1),n("v-dialog",{attrs:{value:!t.isLoadingSquadData&&!!t.activeSquadDialog,lazy:""},on:{input:function(e){return t.activeSquadDialog=e?t.activeSquadDialog:""}}},[t.squadCode?["share"===t.activeSquadDialog?n("share-squad-card",{attrs:{squad:t.squad,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,sparkResult:t.sparkResultToShare},on:{back:function(e){t.activeSquadDialog=""}}}):"delete"===t.activeSquadDialog?n("delete-squad-card",{attrs:{squad:t.squad,squadId:+t.id,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill},on:{delete:function(e){return t.$router.push("/tools/squads")},cancel:function(e){t.activeSquadDialog=""}}}):t._e()]:n("v-card",[n("v-card-text",[t._v("\n            No squad selected\n          ")]),n("v-card-actions",{staticStyle:{"justify-content":"flex-end"}},[n("v-btn",{attrs:{flat:""},on:{click:function(e){t.activeSquadDialog=""}}},[t._v("\n              Back\n            ")])],1)],1)],2)],1)],1)],1)},i=[],a=n("a34a"),s=n.n(a),o=n("2f62"),u=n("f022"),l=n("fca9"),c=n("6a92"),d=n("34b9"),f=n("88fe"),p=n("b758"),h=n("4a49"),v=n("bdea"),g=n("1b56"),b=n("a598"),m=n("e5b6"),y=n("be55"),A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("buff-expandable-list-view",{attrs:{sources:t.squad.units,getEffectsFromSource:t.getEffectsForSquadUnit,titleTopOffset:t.topNavbarHeight,inputFilterOptions:t.filterOptions,getTextForSource:t.getTextForSourceInSquadUnit,viewMode:t.viewMode},on:{filteroptions:function(e){return t.filterOptions=e},viewmode:function(e){return t.viewMode=e}},scopedSlots:t._u([{key:"buffexpandablelist",fn:function(e){e.sources;var r=e.targetType,i=e.effectType,a=e.inputEffectMappingBySource,s=e.highlightedBuffIds,o=e.listKey;return[n("squad-buff-expandable-list",{key:o,attrs:{squad:t.squad,targetType:r,effectType:i,inputEffectMappingByUnitEntry:a,highlightedProcs:t.squadBuffTypes.PROC===i&&s||[],highlightedPassives:t.squadBuffTypes.PASSIVE===i&&s||[],getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,getLeaderSkill:t.getLeaderSkill}})]}}])})},S=[],x=n("abcf"),w=n("bd0f"),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("buff-expandable-list",{staticClass:"squad-buff-expandable-list",attrs:{sources:t.unitEntries,getEffectsFromSource:t.getEffectsForSquadUnit,highlightedBuffIds:t.highlightedBuffIds,effectType:t.effectType,getTextForSource:t.getTextForSourceInSquadUnit},scopedSlots:t._u([{key:"allentrypreview",fn:function(e){var r=e.entries;return n("div",{staticClass:"expandable-list-entry--columns-preview"},t._l(r,(function(e){return n("div",{key:e.source.id+"-"+e.source.position,staticClass:"expandable-list-entry--columns-preview-entry"},[n("v-layout",{attrs:{"align-content-center":"",row:""}},[n("unit-thumbnail",{staticClass:"unit-thumbnail",attrs:{src:t.getImageUrls(e.source.id).ills_battle,rarity:t.getUnit(e.source.id).rarity,imageTitle:t.getUnit(e.source.id).name,displayWidth:t.thumbnailSize,displayHeight:t.thumbnailSize}},[n("template",{slot:"after-image"},[n("text",{attrs:{x:0,y:t.thumbnailSize}},[t._v("\n              "+t._s(isNaN(e.source.bbOrder)?"-":e.source.bbOrder)+"\n            ")])])],2)],1),n("v-flex",{attrs:{"text-xs-center":""}},[n("span",{staticClass:"caption text-no-wrap"},[t._v(t._s(e.source.position))])])],1)})),0)}},{key:"value-header",fn:function(e){var r=e.entry;return n("v-layout",{staticStyle:{"max-width":"500px",width:"100%","min-width":"300px"},attrs:{row:""}},[n("unit-entry",{staticClass:"d-flex py-1",staticStyle:{"align-items":"center",border:"1px solid var(--background-color-alt)"},attrs:{xs12:"",index:t.squad.units.indexOf(r),unit:r,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,isLead:t.squad.units.indexOf(r)===t.squad.lead,isFriend:t.squad.units.indexOf(r)===t.squad.friend}})],1)}}])},[n("span",{attrs:{slot:"noentries"},slot:"noentries"},[t._v("\n    No entries of type ["+t._s(t.effectType)+"] targeting ["+t._s(t.targetType)+"] were found.\n  ")])])},k=[],E=n("8b06"),C=n("ac4c"),q=n("38fd1"),P=n("8398");function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){j(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(){var t=Object(c["d"])();return t.id=d["L"].SQUAD,t.position="Squad",t.bbOrder="-",t}var B={mixins:[P["a"]],props:{squad:{type:Object,required:!0},targetType:{type:String,required:!0},effectType:{type:String,required:!0},inputEffectMappingByUnitEntry:{type:WeakMap,default:function(){return new WeakMap}},highlightedProcs:{type:Array,default:function(){return[]}},highlightedPassives:{type:Array,default:function(){return[]}}},components:{UnitThumbnail:C["a"],UnitEntry:E["a"],BuffExpandableList:q["a"]},computed:_({blacklistedKeys:function(){return["passive id","unknown passive id","proc id","unknown proc id","add to bb","add to sbb","add to ubb","trigger on bb","trigger on sbb","trigger on ubb"]}},Object(o["c"])("units",{getImageUrls:"getImageUrls"}),{thumbnailSize:function(){return 48},unitEntries:function(){return this.squad.units.concat([I()])},effectMappingByUnitEntry:function(){var t=this,e=new WeakMap;return this.unitEntries.forEach((function(n){var r=t.inputEffectMappingByUnitEntry.get(n);Array.isArray(r)||(r=n.id!==d["L"].SQUAD?Object(c["f"])({unitEntry:n,target:t.targetType,effectType:t.effectType,squad:t.squad},t):Object(c["e"])({target:t.targetType,effectType:t.effectType,squad:t.squad},t)),e.set(n,r)})),e},highlightedBuffIds:function(){var t=[];return this.effectType===d["K"].PASSIVE?t=this.highlightedPassives:this.effectType===d["K"].PROC&&(t=this.highlightedProcs),t}}),methods:{getEffectsForSquadUnit:function(t){var e=this.effectMappingByUnitEntry.get(t);return Array.isArray(e)?e:[]},getTextForSourceInSquadUnit:function(t,e){var n=d["g"][t];if(n){if("squad.omniBoost"===t){var r=this.getUnit(e.id)||{};r.element&&(n="Elemental Paradigm (".concat(r.element,")"))}}else if("es"===t)n="Elgif: ".concat(this.getExtraSkill(e.es).name||e.es||t);else if(t.startsWith("sphere:")){var i=t.split(":")[1];n="Sphere: ".concat(this.getItem(i).name||i||t)}return n||t}}},U=B,M=(n("952b"),n("2877")),L=Object(M["a"])(U,O,k,!1,null,null,null),D=L.exports,F={mixins:[P["a"]],props:{squad:{type:Object,required:!0},topNavbarHeight:{type:Number,default:56}},components:{SquadBuffExpandableList:D,BuffExpandableListView:w["a"]},computed:{squadBuffTypes:function(){return d["K"]},possibleTables:function(){return Object.freeze([{name:"Party Passives",targetType:d["O"].PARTY,effectType:d["K"].PASSIVE},{name:"Party Buffs",targetType:d["O"].PARTY,effectType:d["K"].PROC},{name:"For the Enemy",targetType:d["O"].ENEMY,effectType:d["K"].PROC},{name:"Self Passives",targetType:d["O"].SELF,effectType:d["K"].PASSIVE},{name:"Self Buffs",targetType:d["O"].SELF,effectType:d["K"].PROC},{name:"Other Passives",targetType:d["O"].OTHER,effectType:d["K"].PASSIVE},{name:"Other Buffs",targetType:d["O"].OTHER,effectType:d["K"].PROC}])},effectMappingByTable:function(){var t=this,e=new Set,n=new Set,r=new Map,i=this.squad,a=i.units;return this.possibleTables.forEach((function(s){var o=s.targetType,u=s.effectType,l=new WeakMap;a.forEach((function(r){var a=Object(c["f"])({unitEntry:r,target:o,effectType:u,squad:i},t);a.forEach((function(t){u===d["K"].PROC?e.add(Object(x["getEffectId"])(t)):u===d["K"].PASSIVE&&n.add(Object(x["getEffectId"])(t))})),l.set(r,a)})),r.set(t.getTableKey(o,u),l)})),r.set("allProcs",Array.from(e).sort((function(t,e){return+t-+e}))),r.set("allPassives",Array.from(n).sort((function(t,e){return+t-+e}))),r}},data:function(){return{filterOptions:{procs:[],passives:[]},viewMode:""}},created:function(){this.squad.filterOptions&&(this.filterOptions.procs=Array.isArray(this.squad.filterOptions.procs)?this.squad.filterOptions.procs.slice():[],this.filterOptions.passives=Array.isArray(this.squad.filterOptions.passives)?this.squad.filterOptions.passives.slice():[]),this.squad.viewMode&&(this.viewMode=this.squad.viewMode)},methods:{getTableKey:function(t,e){return"".concat(t,"-").concat(e)},getEffectsForSquadUnit:function(t,e,n){var r=this.effectMappingByTable.get(this.getTableKey(e,n)),i=r.get(t);return Array.isArray(i)?i:[]},getTextForSourceInSquadUnit:function(t,e){var n=d["g"][t];if(!n)if("es"===t)n="Elgif: ".concat(this.getExtraSkill(e.es).name||e.es||t);else if(t.startsWith("sphere:")){var r=t.split(":")[1];n="Sphere: ".concat(this.getItem(r).name||r||t)}return n||t}},watch:{filterOptions:function(t){this.squad.filterOptions=t},viewMode:function(t){this.squad.viewMode=t}}},N=F,R=(n("5a88"),Object(M["a"])(N,A,S,!1,null,null,null)),V=R.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"squad-arena-suggestion-table"},[n("span",{staticStyle:{"text-transform":"capitalize","font-weight":"bold","text-align":"center","grid-column":"span 2"},domProps:{innerHTML:t._s("<u>Applicable Colosseum Classes:</u> "+t.usableColoClasses.join(", "))}}),t._l(t.fullUnits,(function(e,r){return[n("div",{key:t.squadKey+"-"+e.position+"-suggestion",staticClass:"suggestion-text"},[r!==t.squad.friend?[n("div",{staticStyle:{"text-transform":"capitalize","font-weight":"bold","text-align":"center"},domProps:{innerHTML:t._s("<u>Suggestion:</u> "+t.suggestionsBySquadEntry.get(e).join(" or "))}}),t._l(t.arenaTextDataBySquadEntry.get(e),(function(r,i){return n("div",{key:t.squadKey+"-"+e.position+"-"+i+"-arena-text",domProps:{textContent:t._s(r)}})}))]:n("span",[t._v("\n        Friend units are not allowed in Arena\n      ")])],2),n("unit-entry",{key:t.squadKey+"-"+e.position+"-entry",staticClass:"d-flex py-1",staticStyle:{"align-items":"center",border:"1px solid var(--background-color-alt)"},attrs:{index:r,unit:e,getUnit:t.getUnit,getItem:t.getItem,getExtraSkill:t.getExtraSkill,isLead:r===t.squad.lead,isFriend:r===t.squad.friend}})]}))],2)},$=[],W=n("00e0"),K={mixins:[P["a"]],props:{squad:{type:Object,required:!0}},components:{UnitEntry:E["a"]},computed:{fullUnits:function(){var t=this;return d["Q"].map((function(e){var n=t.squad.units.find((function(t){return t.position===e}));return n||(n=Object(c["d"])({isEmpty:!0,bbOrder:null,position:e})),n}))},suggestionsBySquadEntry:function(){var t=this,e=new WeakMap;return this.fullUnits.forEach((function(n){var r=t.getUnit(n.id)||{};e.set(n,t.getSuggestionsForUnit(r))})),e},arenaTextDataBySquadEntry:function(){var t=this,e=new WeakMap;return this.fullUnits.forEach((function(n){var r=t.getUnit(n.id)||{},i=Array.isArray(r.ai)?r.ai:[];i.length>0?e.set(n,i.map(t.generateArenaText)):e.set(n,["No Arena AI data found"])})),e},usableColoClasses:function(){var t=this,e=new Map,n=this.$store.state.settings.activeServer,r=this.fullUnits.filter((function(e,n){return n!==t.squad.friend&&e.id!==d["L"].EMPTY&&e.id!==d["L"].ANY}));r.forEach((function(r){var i=t.getUnit(r.id)||{},a=isNaN(i.cost)?[]:Object(W["f"])(+i.cost,"gl"===n);e.set(r,a)}));var i=new Set;return r.forEach((function(t){var n=e.get(t),a=r.filter((function(e){return e!==t}));n.forEach((function(t){!i.has(t)&&a.every((function(n){return e.get(n).includes(t)}))&&i.add(t)}))})),Object.freeze(Array.from(i))},squadKey:function(){return Object(c["l"])(this.squad)}},methods:{getSuggestionsForUnit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.freeze(Object(W["e"])(t).map(W["a"]))},generateArenaText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(W["b"])(t)}}},H=K,Y=(n("2b3e0"),Object(M["a"])(H,z,$,!1,null,null,null)),Q=Y.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spark-statistics-container"},[n("v-expansion-panel",{model:{value:t.currentSection,callback:function(e){t.currentSection=e},expression:"currentSection"}},[n("v-expansion-panel-content",[n("span",{staticClass:"subheading",attrs:{slot:"header"},slot:"header"},[t._v("Current Squad Statistics")]),n("section",[t.resultForCurrentSquad?n("spark-squad-card",{attrs:{squad:t.squad,sparkResult:t.resultForCurrentSquad,getUnit:t.getUnit,simulatorOptions:t.simulatorOptions},on:{share:function(){return t.emitShareEvent(t.resultForCurrentSquad)}}}):n("span",[n("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n            There was a problem generating the spark results for the current squad configuration. ("+t._s(t.errorForCurrentSquad&&t.errorForCurrentSquad.message||t.errorForCurrentSquad||"Unknown error")+")\n          ")])],1)],1)]),n("v-expansion-panel-content",[n("span",{staticClass:"subheading",attrs:{slot:"header"},slot:"header"},[t._v("Spark Simulator Input")]),n("section",[n("spark-squad-card-editable",{attrs:{squad:t.squad,getUnit:t.getUnit},model:{value:t.simulatorOptions,callback:function(e){t.simulatorOptions=e},expression:"simulatorOptions"}})],1),n("section",[n("overall-simulator-options",{attrs:{squad:t.squad},model:{value:t.simulatorOptions,callback:function(e){t.simulatorOptions=e},expression:"simulatorOptions"}})],1),n("section",[n("v-alert",{attrs:{value:!0,icon:0===t.simulatorWarnings.length?"info":"priority_high",color:0===t.simulatorWarnings.length?"info":"warning"}},[t.simulatorWarnings.length>0?[n("span",[t._v("Warnings that may affect the accuracy of results:")]),n("ul",t._l(t.simulatorWarnings,(function(e){return n("li",{key:e,domProps:{textContent:t._s(e)}})})),0)]:n("span",[t._v("No squad level warnings found. Make sure to check individual units for warnings.")])],2)],1),n("section",[n("v-btn",{attrs:{block:""},on:{click:t.runSimulator}},[t._v("Run Simulator")])],1)]),n("v-expansion-panel-content",{directives:[{name:"show",rawName:"v-show",value:!t.runningSimulator&&(t.results||t.errorForCalculations),expression:"!runningSimulator && (results || errorForCalculations)"}]},[n("span",{staticClass:"subheading",attrs:{slot:"header"},slot:"header"},[t._v("Simulator Results")]),n("div",[n("section",{staticClass:"mx-2"},[n("v-alert",{attrs:{color:"info",value:!0}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",[t._v("\n                Time Elapsed: "+t._s(t.simulationElapsedText)+"\n              ")]),n("v-flex",[t._v("\n                Total Combinations Tested: "+t._s(t.lastTestedCount)+"\n              ")]),n("v-flex",[t._v("\n                Combinations Tested/Second: "+t._s(t.combosTestedPerSecond)+"\n              ")])],1)],1)],1),Array.isArray(t.results)&&t.results.length>0?n("section",[n("section",{staticClass:"result-navigator"},[n("v-btn",{attrs:{flat:"",icon:t.$vuetify.breakpoint.xsOnly,disabled:t.currentResultIndex<=0},on:{click:function(e){t.currentResultIndex=Math.max(t.currentResultIndex-1,0)}}},[n("v-icon",[t._v("chevron_left")])],1),n("v-select",{staticClass:"mx-2",attrs:{items:t.resultSelectValues,"item-text":"label","item-value":"value"},model:{value:t.currentResultIndex,callback:function(e){t.currentResultIndex=e},expression:"currentResultIndex"}}),n("v-btn",{attrs:{flat:"",icon:t.$vuetify.breakpoint.xsOnly,disabled:t.currentResultIndex+1>=t.results.length},on:{click:function(e){t.currentResultIndex=Math.min(t.currentResultIndex+1,t.results.length-1)}}},[n("v-icon",[t._v("chevron_right")])],1)],1),n("section",[n("spark-squad-card",{key:t.getResultName(t.results[t.currentResultIndex],t.currentResultIndex),attrs:{squad:t.squad,sparkResult:t.results[t.currentResultIndex],getUnit:t.getUnit,simulatorOptions:t.simulatorOptions}},[n("v-card-actions",{attrs:{slot:"card-actions"},slot:"card-actions"},[n("v-btn",{attrs:{outline:""},on:{click:function(){return t.applySparkResult(t.results[t.currentResultIndex])}}},[n("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                Apply\n              ")],1)],1)],1)],1)]):t.errorForCalculations?n("section",[n("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n            There was a problem generating the spark results for the current squad configuration. ("+t._s(t.errorForCalculations.message||t.errorForCalculations)+")\n          ")])],1):n("section",[t._v("\n          No results found for given configuration.\n        ")])])])],1),n("v-dialog",{attrs:{value:t.showProgressDialog,"max-width":"500px",persistent:""}},[n("v-card",[n("v-card-text",[n("v-progress-linear",{attrs:{value:t.progressPercent,indeterminate:0===t.progressPercent,query:""}}),n("div",[t._v(t._s(t.progressLabel))]),n("div",[t._v("Time Elapsed: "+t._s(t.simulationElapsedText))])],1),n("v-card-actions",[n("v-spacer"),t.runningSimulator?n("v-btn",{attrs:{disabled:0===t.progressTotal},on:{click:t.cancelCalculations}},[t._v("\n          Cancel\n        ")]):n("v-btn",{on:{click:function(e){t.showProgressDialog=!1}}},[t._v("\n          Close\n        ")])],1)],1)],1),t._m(0)],1)},J=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"mt-3"},[t._v("\n    Powered by "),n("a",{attrs:{href:"https://joshuacastor.me/project-sparkle/",target:"_blank",rel:"noopener"}},[t._v("Project Sparkle")])])}],X=n("0040"),Z=Object.freeze(Object.keys(X.proc).filter((function(t){return"Attack"===X.proc[t].Type}))),tt=Object.freeze({1:{"Top Left":15,"Top Right":30,"Middle Left":20,"Middle Right":40,"Bottom Left":18,"Bottom Right":33},2:{"Top Left":13,"Top Right":24,"Middle Left":16,"Middle Right":33,"Bottom Left":15,"Bottom Right":27},3:{"Top Left":10,"Top Right":19,"Middle Left":13,"Middle Right":26,"Bottom Left":12,"Bottom Right":21},4:{"Top Left":7,"Top Right":14,"Middle Left":9,"Middle Right":19,"Bottom Left":8,"Bottom Right":15},5:{"Top Left":4,"Top Right":9,"Middle Left":6,"Middle Right":12,"Bottom Left":5,"Bottom Right":9}}),et=Object.freeze({850328:19,750167:11,810278:25,810108:32,61007:48,860357:34,850418:30,20887:43,860258:21,850158:23,61087:17,51107:21,40857:15,860518:23,860548:20,51317:105,830048:18,61207:29,850568:29}),nt=2,rt=1,it=2,at=n("801b");function st(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=ot(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function ot(t,e){if(t){if("string"===typeof t)return ut(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ut(t,e):void 0}}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lt(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(r,i)}function ct(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){lt(a,r,i,s,o,"next",t)}function o(t){lt(a,r,i,s,o,"throw",t)}s(void 0)}))}}function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ht=new l["a"]({prefix:"[SparkSimulator/utils]"});function vt(t){return Object(at["g"])(t,(function(t){return Z.includes(t.id)}))}function gt(t){var e=vt(t).map((function(t){return t.frames})),n=Object(at["f"])(t).map((function(t){return t.frames})),r=[];[e,n].forEach((function(t){t.forEach((function(t,e){for(var n=0===e?0:1,i=t["frame times"].length;n<i;n++)r.push({time:t["frame times"][n],dmg:t["hit dmg% distribution"][n]})}))}));var i={"frame times":[],"hit dmg% distribution":[]};return r.sort((function(t,e){return t.time-e.time})).forEach((function(t){var e=t.time,n=t.dmg;i["frame times"].push(e),i["hit dmg% distribution"].push(n)})),i}function bt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return((Object(at["c"])(t)||{}).effects||[]).filter((function(t){return Z.includes(Object(x["getEffectId"])(t).toString())}))}function mt(t){var e=t.burst,n=void 0===e?{}:e,r=t.extraAttackEffects,i=void 0===r?[]:r,a=t.delay,s=void 0===a?0:a,o=t.moveTypeId,u=void 0===o?d["D"].Moving:o,l=t.moveSpeed,c=void 0===l?0:l,f=t.teleporterId,p=void 0===f?0:f,h=(n["damage frames"]||[]).filter((function(t){return Z.includes(Object(x["getEffectId"])(t).toString())}));if(0===h.length&&0===i.length)return[];var v=bt(n),g=[u===d["D"]["Non-Moving"]?c:0,u===d["D"].Teleporting&&et[p.toString()]||0,isNaN(s)?0:+s].reduce((function(t,e){return t+e}),0),b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t.map((function(t){return{frame:+t+e,target:n?"aoe":"st"}}))},m=h.map((function(t,e){var n="aoe"===v[e]["target area"],r=u===d["D"].Teleporting?0:+t["effect delay time(ms)/frame"].split("/")[1],i=(u===d["D"].Teleporting?0:r)+g;return b(t["frame times"],i,n)}));if(i.length>0){var y=gt(n),A=i.filter((function(t){return Z.includes(Object(x["getEffectId"])(t).toString())})).map((function(t){var e="aoe"===t["target area"],n=+t["effect delay time(ms)/frame"].split("/")[1],r=(u===d["D"].Teleporting?0:n)+g;return b(y["frame times"],r,e)}));m=m.concat(A)}return m}function yt(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.entry,r=void 0===n?Object(c["d"])():n,i=e.synchronousGetters,a=void 0===i?{}:i,s=e.squad,o=void 0===s?Object(c["c"])():s,u=e.originalPosition,l=e.unitConfig,f=void 0===l?kt():l,p=a.unit(r.id),h=["unit.bb","unit.sbb","unit.ubb"],v=Object(c["f"])({unitEntry:ft({},r,{bbOrder:f.bbOrder||r.bbOrder,action:f.action}),target:d["O"].ENEMY,effectType:d["K"].PROC,squad:o},{getUnit:a.unit,getItem:a.item,getExtraSkill:a.extraSkill}).filter((function(t){return!h.includes(t.sourcePath)&&(!t.triggeredOn||t.triggeredOn===r.action)}));t=isNaN(f.delay)?isNaN(r.delay)?0:+r.delay:+f.delay;var g={id:r.id,position:r.position,bbOrder:f.bbOrder||r.bbOrder,action:f.action||r.action,name:p.name||r.id,extraAttackEffects:v,burst:p[f.action],moveTypeId:p.movement&&p.movement.skill&&+p.movement.skill["move type"]||0,moveSpeed:p.movement&&p.movement.skill&&+p.movement.skill["move speed"]||0,moveSpeedType:p.movement&&p.movement.skill&&+p.movement.skill["move speed type"]||"1",delay:t,teleporterId:r.id,weight:f.weight,originalPosition:u};return g.frames=mt(g),g}function At(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nt,n={};if(t.id!==d["L"].ANY&&t.id!==d["L"].EMPTY){var r=[(t.bbOrder-1)*e,t.moveTypeId===d["D"].Moving?+tt[t.moveSpeedType][t.position]:0].reduce((function(t,e){return t+e}),0);t.frames.forEach((function(t){t.forEach((function(t){var e=t.frame,i=t.target,a=+e+r;n[a]||(n[a]={aoe:0,st:0}),n[a][i]+=1}))}))}return n}function St(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[yt()],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot(),n=e.enemyCount,r=e.burstCutins,i={},a=new Map;t.forEach((function(t){var e=At(t,r?rt:nt);Object.keys(e).forEach((function(t){i[t]||(i[t]={aoe:0,st:0}),i[t].aoe+=e[t].aoe,i[t].st+=e[t].st})),a.set(t,e)}));var s,o=0,u=0,l=t.map((function(t){var e=a.get(t),r=Object.keys(e),s=r.map((function(t){return e[t].aoe*n+e[t].st})).reduce((function(t,e){return t+e}),0),l=r.map((function(t){var r=e[t],a=r.aoe,s=r.st,o=i[t].aoe-a,u=i[t].st-s,l=[o>0&&a>0,a>1].some((function(t){return t})),c=[u>0&&s>0,o>0&&s>0,u>0&&a>0,a>0&&s>0,s>1].some((function(t){return t})),d=0;return l&&(d+=a*n),c&&(d+=s,u>0&&a>0&&!l&&(d+=a)),d})).reduce((function(t,e){return t+e}),0);return o+=s,u+=l,{id:t.id,name:t.name||t.id,position:t.position,bbOrder:t.bbOrder,action:t.action,actualSparks:l,possibleSparks:s,delay:t.delay,originalPosition:t.originalPosition,weight:t.weight}})),d=l.filter((function(t){return t.weight>0})).reduce((function(t,e){return t+e.weight}),0);return s=d<=0?0:l.map((function(t){var e=t.actualSparks/Math.max(1,t.possibleSparks),n=t.weight/d;return e*n})).reduce((function(t,e){return t+e}),0),{actualSparks:u,possibleSparks:o,weightedPercentage:s,squad:Object(c["k"])(l,!1)}}function xt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sparkUnitResult,n=void 0===e?{}:e,r=t.unitData,i=void 0===r?{}:r,a=t.burstCutins,s=void 0!==a&&a,o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{delay:t,description:e}};if(n.id===d["L"].EMPTY)return[o(0,"Empty Units have no delay")];var u=i.movement&&i.movement.skill&&+i.movement.skill["move type"]||0,l=i.movement&&i.movement.skill&&+i.movement.skill["move speed"]||0,c=i.movement&&Object(W["m"])(i),f=i.movement&&i.movement.skill&&+i.movement.skill["move speed type"]||"1",p=u===d["D"].Teleporting&&et[i.id.toString()]||0,h=+tt[f][n.position],v=isNaN(n.delay)?0:+n.delay,g=isNaN(n.squadLevelDelay)?0:+n.squadLevelDelay;return[u===d["D"]["Non-Moving"]&&o(l,"innate move speed as a ".concat(c," unit")),u===d["D"].Teleporting&&o(p,"custom offset as a ".concat(c," unit")),u===d["D"].Moving&&o(h,"offset based on position and move speed type as a ".concat(c," unit")),o(s?rt:nt,"burst cut-in delay (cut-ins ".concat(s?"on":"off",")")),v>0&&o(v,"custom unit delay"),g>0&&o(g,"custom squad delay")].filter((function(t){return t}))}function wt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return isNaN(t)?e:+t}function Ot(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.unitConfig,n=void 0===e?[]:e,r=t.enemyCount,i=void 0===r?6:r,a=t.burstCutins,s=void 0!==a&&a,o=t.resultThreshold,u=void 0===o?50:o,l=t.workerCount,d=void 0===l?it:l,f=t.maxResults,p=void 0===f?10:f,h=t.optimize,v=void 0!==h&&h,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(c["c"])(),b=Array.isArray(n)?n.map((function(t,e){return kt(ft({},t,{id:g.units[e].id}))})):[];if(Array.isArray(g.units)&&b.length<g.units.length)for(var m=g.units.length,y=b.length;y<m;++y)b.push(kt(g.units[y]));return Object.freeze({unitConfig:b,enemyCount:Math.max(1,wt(i,6)),burstCutins:!!s,resultThreshold:Math.max(0,Math.min(100,wt(u,50))),workerCount:Math.max(1,Math.min(it,wt(d,it))),maxResults:Math.max(1,Math.min(100,wt(p,10))),optimize:!!v})}function kt(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.action,r=void 0===n?d["M"].ATK:n,i=e.bbOrder,a=void 0===i?1:i,s=e.delay,o=void 0===s?0:s,u=e.weight,l=void 0===u?1:u,c=e.lockPosition,f=void 0!==c&&c,p=e.id;return t=p===d["L"].EMPTY?d["M"].NONE:p!==d["L"].EMPTY&&r===d["M"].NONE?d["M"].ATK:r,Object.freeze({action:t,bbOrder:p!==d["L"].EMPTY?wt(a,d["a"]):d["a"],delay:wt(o,0),weight:wt(l,1),lockPosition:!!f})}function Et(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.unit,n=void 0===e?Object(c["d"])():e,r=t.attackEffects,i=void 0===r?[]:r,a=t.unitData,s=void 0===a?{}:a,o=new Set;i.forEach((function(t){var e=Object(x["getEffectId"])(t),n=t["target area"],r=13===+e&&!!t["random attack"];o.add(r?"rt":n)}));var u=0===Array.from(o).length?[]:[o.has("rt")&&"Random attacks aren't supported yet",!o.has("aoe")&&"No AOE attacks found"].filter((function(t){return t})),l=s.movement&&s.movement.skill&&+s.movement.skill["move type"]||0;return l!==d["D"].Teleporting||et.hasOwnProperty((s.id||n.id).toString())||u.push("This teleporting unit is not supported yet"),u}function Ct(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c["c"])(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot(),n=[],r=t.units.filter((function(t){return t.id===d["L"].EMPTY})),i=t.units.length-r.length,a=0,s=0,o=new Set;return t.units.forEach((function(r,i){var u=e.unitConfig[i];if(r.id===d["L"].EMPTY){var l=isNaN(u.bbOrder)?t.units.length:+u.bbOrder;s=Math.min(s,l)}else{var c=isNaN(u.bbOrder)?0:+u.bbOrder;a=Math.max(a,c),c>0&&(o.has(c)?n.push("Duplicate BB Order found [".concat(c,"]")):o.add(c))}})),a>i&&n.push("BB Order for non-empty units should not exceed number of non-empty units (".concat(i,")")),s>0&&s<=i&&n.push("BB Order for empty units should not be lower than the number of non-empty units (".concat(i,")")),n}function qt(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c["c"])(),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ot(),a=[],s=[],o=n.lead,u=n.friend;return d["Q"].forEach((function(i,l){var d=n.units.findIndex((function(t){return t.position===i})),f=r.squad.findIndex((function(t){return t.originalPosition===i}));a.push(Object(c["i"])(ft({},n.units[d],{position:r.squad[f].position,bbOrder:r.squad[f].bbOrder,action:r.squad[f].action}))),s.push(r.squad[f]),d===o&&(t=a[l]),d===u&&(e=a[l])})),Object(c["k"])(a,!1),Object(c["k"])(s,!1),t&&(o=a.indexOf(t)),e&&(u=a.indexOf(e)),{squad:Object(c["a"])(ft({},n,{lead:o,friend:u,units:a})),sparkResult:ft({},r,{squad:s}),options:Ot(ft({},i,{unitConfig:Pt(s)}))}}function Pt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St().squad;return t.map(kt)}function Tt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return 1===t.length?e.push(t):t.forEach((function(n,r){var i=t.slice(0,r).concat(t.slice(r+1,t.length)),a=Tt(i);a.forEach((function(t){e.push([n].concat(t))}))})),e}function _t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[yt()],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot(),n=[],r=[];t.forEach((function(t,i){var a=e.unitConfig[i];a.lockPosition?n.push(i):r.push(t.position)}));var i=[[]],a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0;return d["Q"].map((function(i,a){return n.includes(a)?t[a].position:e[r++]}))};return i=r.length>0?Tt(r).map((function(t){return a(t)})):[n.map((function(e){return t[e].position}))],i}function jt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[yt()],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot(),n=t.map((function(t,e){return e+1})),r=t.filter((function(t){return t.id===d["L"].EMPTY})),i=[],a=[];t.forEach((function(t,r){var s=e.unitConfig[r];!isNaN(s.bbOrder)&&n.includes(s.bbOrder)?i.push({unit:t,bbOrder:+s.bbOrder}):s.bbOrder===d["a"]&&a.push(t)}));var s=n.filter((function(e){return e>t.length-r.length})).map((function(t,e){return{unit:r[e],bbOrder:t}})),o=i.map((function(t){var e=t.bbOrder;return e})),u=n.filter((function(e){return!o.includes(e)&&e<=t.length-r.length})),l=[[]];return l=u.length>0?Tt(u).map((function(t){return t.map((function(t,e){return{unit:a[e],bbOrder:t}})).filter((function(t){return t.unit})).concat(i).concat(s)})):[i.concat(s)],l.map((function(e){return e.sort((function(e,n){return t.indexOf(e.unit)-t.indexOf(n.unit)})).map((function(t){return t.bbOrder}))}))}function It(){return Bt.apply(this,arguments)}function Bt(){return Bt=ct(s.a.mark((function t(){var e,n,r,i,a,o,u,l,c,f,p,h,v=arguments;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=v.length>0&&void 0!==v[0]?v[0]:[yt()],n=v.length>1&&void 0!==v[1]?v[1]:Ot(),r=v.length>2&&void 0!==v[2]?v[2]:function(){},i=_t(e,n),a=jt(e,n),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[{bbOrder:0,position:d["Q"][0]}];return t.map((function(t,e){var r=n[e],i=t.id===d["L"].EMPTY||t.id===d["L"].ANY?"":"".concat(t.id,"|").concat(t.extraAttackEffects.length,"|").concat(t.action,"|").concat(r.position,"|").concat(r.bbOrder);return i})).filter((function(t){return t})).join("-")},ht.debug({positionPermutations:i,orderPermutations:a}),u=[],l=new Map,c=0,f=st(i),t.prev=11,h=s.a.mark((function t(){var n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=p.value,c%5!==0){t.next=4;break}return t.next=4,Promise.resolve(r());case 4:a.forEach((function(t){var r=e.map((function(e,r){return{position:n[r],bbOrder:t[r]}})),i=o(e,r);l.get(i)||(l.set(i,!0),u.push(r))}));case 5:case"end":return t.stop()}}),t)})),f.s();case 14:if((p=f.n()).done){t.next=18;break}return t.delegateYield(h(),"t0",16);case 16:t.next=14;break;case 18:t.next=23;break;case 20:t.prev=20,t.t1=t["catch"](11),f.e(t.t1);case 23:return t.prev=23,f.f(),t.finish(23);case 26:return t.abrupt("return",u);case 27:case"end":return t.stop()}}),t,null,[[11,20,23,26]])}))),Bt.apply(this,arguments)}function Ut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(c["d"])();return ft({},t,{bbOrder:isNaN(t.bbOrder)?e.bbOrder:t.bbOrder})}var Mt=n("cb86"),Lt=n("3c85"),Dt=n.n(Lt);function Ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rt(t,e,n){return e&&Nt(t.prototype,e),n&&Nt(t,n),t}var Vt=function(){function t(){Ft(this,t)}return Rt(t,[{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(e.permutations,e.sparkSquad),r=(void 0===n&&yt(),e.options);void 0===r&&Ot();return t._defer("run")}},{key:"cancel",value:function(){return t._defer("cancel")}},{key:"onProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.total,e.completed;return t._defer("onProgress")}}],[{key:"_defer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"name of method to be deferred";return Promise.reject(new Error("Must implement ".concat(t,"() in subclass")))}}]),t}();function zt(t){return zt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt(t)}function $t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kt(t,e,n){return e&&Wt(t.prototype,e),n&&Wt(t,n),t}function Ht(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yt(t,e)}function Yt(t,e){return Yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Yt(t,e)}function Qt(t){return function(){var e,n=Zt(t);if(Xt()){var r=Zt(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Gt(this,e)}}function Gt(t,e){return!e||"object"!==zt(e)&&"function"!==typeof e?Jt(t):e}function Jt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Zt(t){return Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Zt(t)}var te=new l["a"]({prefix:"[SparkSimWorker/client]"}),ee=function(t){Ht(n,t);var e=Qt(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mt["a"];return $t(this,n),t=e.call(this),t._worker=r,t._progressListeners=new Set,t._worker.registerCommand("progress",(function(e){t.onProgress(e)})),t}return Kt(n,[{key:"request",value:function(t,e){return te.debug("starting request for",{method:t,data:e}),this._worker.request(t,e)}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{permutations:null,sparkSquad:[yt()],options:Ot()};return this._worker.request("run",t)}},{key:"cancel",value:function(){return this._worker.request("cancel")}},{key:"onProgress",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{total:0,completed:0};this._progressListeners.forEach((function(e){e(t)}))}},{key:"addProgressListener",value:function(t){"function"===typeof t&&this._progressListeners.add(t)}},{key:"removeProgressListener",value:function(t){"function"===typeof t&&this._progressListeners.delete(t)}},{key:"removeAllListeners",value:function(){this._progressListeners.clear()}},{key:"close",value:function(){this._worker.close(),this._worker=null}},{key:"exchangeWorker",get:function(){return this._worker}}]),n}(Vt);function ne(){var t=new Mt["a"](new Dt.a);return new ee(t)}function re(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(r,i)}function ie(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){re(a,r,i,s,o,"next",t)}function o(t){re(a,r,i,s,o,"throw",t)}s(void 0)}))}}function ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oe(t,e,n){return e&&se(t.prototype,e),n&&se(t,n),t}var ue=new l["a"]({prefix:"[SparkSimulator]"}),le=function(){function t(){ae(this,t),this._squad=null;var e=function(){return{}};this._dbGetters={unit:e,item:e,extraSkill:e},this._progressListeners=new Set,this._workers=[],this._progressTotal=0,this._progressPerWorker=[]}return oe(t,[{key:"calculateSparksForSquad",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c["c"])(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot(),r=e.units.map((function(r,i){return yt({entry:r,synchronousGetters:t._dbGetters,squad:e,originalPosition:r.position,unitConfig:Ut(n.unitConfig[i],r)})}));return St(r,n)}},{key:"calculateOptimalOrdersForSquad",value:function(){var t=ie(s.a.mark((function t(){var e,n,r,i,a,o,u,l,d,f,p,h,v=this,g=arguments;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=g.length>0&&void 0!==g[0]?g[0]:Object(c["c"])(),n=g.length>1&&void 0!==g[1]?g[1]:Ot(),r=e.units.map((function(t,r){return yt({entry:t,synchronousGetters:v._dbGetters,squad:e,originalPosition:t.position,unitConfig:n.unitConfig[r]})})),ue.debug("getting permutations for spark squad",r),t.next=6,It(r,n,(function(){return new Promise((function(t){return setTimeout((function(){return t()}))}))}));case 6:for(i=t.sent,ue.debug("permutations",i.length),this._progressTotal=i.length,a=[],o=Math.min(it,Math.max(1,n.workerCount)),u=Math.max(1,Math.floor(i.length/o)),l=0,d=function(t){var e=ne();v._workers.push(e),v._progressPerWorker.push(0),e.addProgressListener((function(e){return v.onProgress(e,t)}));var s=void 0;s=1===o?i:t+1!==o?i.slice(l,l+u):i.slice(l),ue.debug("slice",l,u,s.length),l+=u,a.push(e.run({permutations:s,sparkSquad:r,options:n}))},f=0;f<o;++f)d(f);return t.next=17,Promise.all(a);case 17:return p=t.sent,h={errors:[],results:[],countTested:i.length},p.forEach((function(t,e){h.errors=h.errors.concat(t.errors),h.results=h.results.concat(t.results).sort((function(t,e){return e.weightedPercentage-t.weightedPercentage})).slice(0,n.maxResults),v._workers[e].close()})),this._workers=[],this._progressPerWorker=[],t.abrupt("return",h);case 23:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onProgress",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.completed,r=void 0===n?0:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._progressPerWorker[i]=r;var a=this._progressPerWorker.reduce((function(t,e){return t+e}),0);this._progressListeners.forEach((function(e){e({total:t._progressTotal,completed:a})}))}},{key:"addProgressListener",value:function(t){"function"===typeof t&&this._progressListeners.add(t)}},{key:"removeProgressListener",value:function(t){"function"===typeof t&&this._progressListeners.delete(t)}},{key:"removeAllListeners",value:function(){this._progressListeners.clear()}},{key:"cancelCalculations",value:function(){this._workers.forEach((function(t){t.cancel()}))}},{key:"getters",set:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(this._dbGetters).forEach((function(n){"function"===typeof e[n]&&(t._dbGetters[n]=e[n])}))}}]),t}(),ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"spark-squad-card"},[n("v-layout",{staticClass:"pa-2",attrs:{row:"","align-center":""}},[n("v-flex",[n("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.sparkPercentage)+" Weighted Hits Sparked\n      ")])]),n("v-flex",{staticStyle:{flex:"none"}},[n("v-btn",{attrs:{icon:"",flat:"",color:t.bbOrderColorToggleIconColor},on:{click:t.toggleBbOrderColor}},[n("v-icon",[t._v("color_lens")])],1)],1)],1),n("v-layout",{staticClass:"px-2",attrs:{row:"",wrap:""}},t._l(t.fullUnits,(function(e,r){return n("unit-entry",{key:t.getUnitEntryKey(e,r),staticClass:"d-flex py-1",staticStyle:{"align-items":"center",border:"1px solid var(--background-color-alt)"},attrs:{xs12:"",sm6:"",index:r,unit:e,getUnit:t.getUnit,isLead:t.squad.units.indexOf(e)===t.squad.lead,isFriend:t.squad.units.indexOf(e)===t.squad.friend,sparkResultForUnit:t.sparkResultsByUnit.get(e),relativeWeight:t.relativeWeightByUnit.get(e),warnings:t.warningsByUnit.get(e),burstCutins:t.simulatorOptions.burstCutins}})})),1),n("v-divider",{staticClass:"mt-2"}),t._t("card-actions",[n("v-card-actions",[n("v-btn",{attrs:{flat:""},on:{click:function(e){return t.$emit("share")}}},[n("v-icon",{attrs:{left:""}},[t._v("share")]),t._v("\n        Share\n      ")],1)],1)])],2)},de=[],fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",t._g(t._b({staticClass:"spark-unit-entry"},"v-flex",t.$attrs,!1),t.$listeners),[t._t("before-content"),n("div",{staticStyle:{display:"flex"}},[n("v-layout",{staticClass:"mx-2",style:"flex-grow: 0!important; min-width: "+t.thumbnailSize+"px; max-width: "+t.thumbnailSize+"px;",attrs:{column:""}},[t.$vuetify.breakpoint.xsOnly?n("v-flex",{attrs:{"text-xs-center":""}},[n("span",{staticClass:"caption text-no-wrap"},[t._v(t._s(t.position))])]):t._e(),n("v-layout",{attrs:{"align-content-center":"",row:""}},[n("unit-thumbnail",{staticClass:"unit-thumbnail",style:"border-color: "+t.orderSettings.border+";",attrs:{src:t.getImageUrls(t.unit.id).ills_battle,rarity:t.rarity,imageTitle:t.name,displayWidth:t.thumbnailSize,displayHeight:t.thumbnailSize}},[n("template",{slot:"after-image"},[n("text",{style:t.bbOrderStyle,attrs:{x:0,y:.75*t.thumbnailSize}},[t._v("\n              "+t._s(isNaN(t.bbOrder)?"-":t.bbOrder)+"\n            ")])])],2)],1),t.orderSettings?n("v-flex",{staticClass:"text-xs-center"},[n("v-chip",{staticClass:"bb-order-chip",style:"\n            background-color: "+t.orderSettings.background+";\n            color: "+t.orderSettings.foreground+";\n            border-color: "+t.orderSettings.border+";\n          ",attrs:{tabindex:"-1",small:""}},[n("b",[t._v(t._s(t.orderSettings.text))])])],1):t._e()],1),n("v-layout",{staticStyle:{"align-self":"flex-start"},attrs:{column:""}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",{staticClass:"d-flex-container align-center font-weight-bold subheading"},[t.rarity<8?n("span",[t._v(t._s(t.rarity))]):t._e(),n("rarity-icon",{class:{"ml-1":8!==t.rarity,"mr-1":!0},attrs:{rarity:t.rarity||0,displaySize:18}}),n("span",[t._v(t._s(t.name))])],1),n("v-spacer"),t.isLead||t.isFriend?n("v-flex",{staticStyle:{"flex-grow":"0"}},[t.isLead?n("leader-icon",{attrs:{displaySize:18}}):t.isFriend?n("friend-icon",{attrs:{displaySize:18}}):t._e()],1):t._e()],1),n("v-layout",{attrs:{column:""}},[n("v-flex",[n("span",{staticClass:"headline",domProps:{textContent:t._s(t.sparkFraction)}}),n("span",{staticClass:"subheading",staticStyle:{"margin-left":"0.5em"},domProps:{textContent:t._s("SPARKS")}})]),n("v-layout",{attrs:{row:""}},[n("v-flex",{staticClass:"body-1"},[t._v("\n            Delay:\n            "),t._l(t.delayDescription,(function(e,r){return[n("v-tooltip",{key:e.description,attrs:{bottom:""}},[n("span",{staticStyle:{"text-decoration":"underline dashed"},attrs:{slot:"activator"},domProps:{textContent:t._s(e.delay)},slot:"activator"}),n("span",{domProps:{textContent:t._s(e.description)}})]),r!==t.delayDescription.length-1?n("span",{key:r,staticStyle:{margin:"0 0.5em"},domProps:{textContent:t._s("+")}}):t._e()]})),t._v("\n            ,\n            "),n("v-tooltip",{attrs:{bottom:""}},[n("span",{staticStyle:{"text-decoration":"underline dashed"},attrs:{slot:"activator"},slot:"activator"},[t._v("\n                Weight:\n              ")]),n("span",[t._v("Represents how much this unit contributes to the overall spark percentage of the squad.")])]),t._v("\n            "+t._s(t.sparkResultForUnit.weight)+" ("+t._s(t.relativeWeight)+"%)\n          ")],2),t.warnings.length>0?n("v-flex",{staticStyle:{"flex-grow":"0"}},[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.showWarningDialog,callback:function(e){t.showWarningDialog=e},expression:"showWarningDialog"}},[n("v-btn",{attrs:{slot:"activator",fab:"",small:"",color:"warning"},slot:"activator"},[n("v-icon",[t._v("info")])],1),n("v-card",[n("v-card-text",[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-flex",[n("v-alert",{staticStyle:{"overflow-x":"auto"},attrs:{outline:"",value:!0,type:"warning"}},[n("span",[t._v("This unit has issues that may affect the accuracy of results.")]),n("v-list",t._l(t.warnings,(function(e){return n("v-list-tile",{key:e},[n("v-list-tile-content",[n("v-list-tile-title",[t._v("\n                                "+t._s(e)+"\n                              ")])],1)],1)})),1)],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{flat:""},on:{click:function(e){t.showWarningDialog=!1}}},[t._v("\n                    Back\n                  ")])],1)],1)],1)],1):t._e()],1)],1)],1)],1)],2)},pe=[],he=n("c0a4"),ve=n.n(he),ge=n("69c9"),be=n("4c70"),me=n("954e");function ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ye(Object(n),!0).forEach((function(e){Se(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Se(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xe=[{stroke:ve.a.red.darken4,fill:ve.a.red.lighten4},{stroke:ve.a.blue.darken4,fill:ve.a.blue.lighten4},{stroke:ve.a.green.darken4,fill:ve.a.green.lighten4},{stroke:ve.a.yellow.darken4,fill:ve.a.yellow.lighten4},{stroke:ve.a.grey.darken4,fill:ve.a.grey.lighten4},{stroke:ve.a.purple.darken4,fill:ve.a.purple.lighten4}],we={mixins:[P["a"]],components:{UnitThumbnail:C["a"],RarityIcon:ge["a"],LeaderIcon:be["a"],FriendIcon:me["a"]},props:{unit:{type:Object,required:!0},isLead:{type:Boolean,default:!1},isFriend:{type:Boolean,default:!1},sparkResultForUnit:{type:Object,required:!0},warnings:{type:Array,default:function(){return[]}},burstCutins:{type:Boolean,default:!1},relativeWeight:{type:Number,default:0}},computed:Ae({},Object(o["c"])("units",{getImageUrls:"getImageUrls"}),{thumbnailSize:function(){return 64},iconSize:function(){return 22},unitData:function(){return this.getUnit(this.unit.id)||{}},orderSettings:function(){var t=!isNaN(this.bbOrder);return Ae({text:t&&this.getOrderText({id:this.unit.id,action:this.action})||"-"},this.getColorSetBasedOnAction(t&&this.action||void 0))},rarity:function(){return this.unitData.rarity||0},name:function(){return this.unitData.name||this.unit.id},sparkFraction:function(){return"".concat(this.sparkResultForUnit.actualSparks," / ").concat(this.sparkResultForUnit.possibleSparks)},delayDescription:function(){return xt({sparkUnitResult:this.sparkResultForUnit,unitData:this.unitData,burstCutins:!!this.burstCutins})},bbOrder:function(){return this.sparkResultForUnit.bbOrder||this.unit.bbOrder},action:function(){return this.sparkResultForUnit.action||this.unit.action},position:function(){return this.sparkResultForUnit.position||this.unit.position},bbOrderStyle:function(){var t;return this.$store.state.showBbOrderColors&&!isNaN(this.bbOrder)&&xe[+this.bbOrder-1]&&(t=Ae({},xe[+this.bbOrder-1])),t}}),data:function(){return{showWarningDialog:!1}},methods:{getColorSetBasedOnAction:function(t){var e=(t===d["M"].UBB?"red":t===d["M"].SBB&&"amber")||t===d["M"].BB&&"blueGrey"||"grey";return{border:ve.a[e].base,background:ve.a[e].lighten4,foreground:ve.a[e].darken4}},getOrderText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action||this.getUnit(t.id).sbb&&d["M"].SBB||this.getUnit(t.id).bb&&d["M"].BB||d["M"].ATK;return e.toUpperCase()}}},Oe=we,ke=(n("7e25"),Object(M["a"])(Oe,fe,pe,!1,null,null,null)),Ee=ke.exports,Ce={mixins:[P["a"]],components:{UnitEntry:Ee},props:{squad:{type:Object,required:!0},sparkResult:{type:Object,required:!0},simulatorOptions:{type:Object,required:!0}},computed:{fullUnits:function(){var t=this;return d["Q"].map((function(e){var n=t.sparkResult.squad.find((function(t){return t.position===e})),r=t.squad.units.find((function(t){return t.position===n.originalPosition}));return r||(r=Object(c["d"])({isEmpty:!0,bbOrder:null,position:e})),r}))},sparkResultsByUnit:function(){var t=this,e=new WeakMap;return this.fullUnits.forEach((function(n){e.set(n,t.sparkResult.squad.find((function(t){return t.originalPosition===n.position})))})),e},sparkPercentage:function(){return"".concat((100*this.sparkResult.weightedPercentage).toFixed(2),"%")},warningsByUnit:function(){var t=this,e=new WeakMap;return this.fullUnits.forEach((function(n){var r=["unit.bb","unit.sbb","unit.ubb"],i=t.getUnit(n.id)||{},a=bt(i[n.action]),s=Object(c["f"])({unitEntry:n,target:d["O"].ENEMY,effectType:d["K"].PROC,squad:t.squad},t).filter((function(t){return!r.includes(t.sourcePath)&&(!t.triggeredOn||t.triggeredOn===n.action)}));e.set(n,Et({unit:n,attackEffects:a.concat(s),unitData:i}))})),e},totalWeight:function(){return Math.max(1,this.sparkResult.squad.reduce((function(t,e){return t+e.weight}),0))},relativeWeightByUnit:function(){var t=new WeakMap,e=this.sparkResultsByUnit,n=this.totalWeight;return this.fullUnits.forEach((function(r){var i=e.get(r),a=i.weight/n*100;t.set(r,+a.toFixed(2))})),t},bbOrderColorToggleIconColor:function(){return this.$store.state.showBbOrderColors?"primary":void 0}},methods:{getUnitEntryKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(JSON.stringify(t),"-").concat(e)},toggleBbOrderColor:function(){this.$store.commit("setShowSparkOrderColors",!this.$store.state.showBbOrderColors)}}},qe=Ce,Pe=Object(M["a"])(qe,ce,de,!1,null,null,null),Te=Pe.exports,_e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"spark-squad-card"},[n("v-layout",{staticClass:"px-2",attrs:{row:"",wrap:""}},t._l(t.fullUnits,(function(e,r){return n("unit-entry",{key:t.getUnitEntryKey(e,r),staticClass:"d-flex py-1",staticStyle:{"align-items":"center",border:"1px solid var(--background-color-alt)"},attrs:{xs12:"",sm6:"",index:r,unit:e,getUnit:t.getUnit,isLead:r===t.squad.lead,isFriend:r===t.squad.friend,sparkSimUnitConfig:t.value.unitConfig[r]||{},warnings:t.warningsByUnit.get(e)},on:{input:function(e){return t.updateEntryForUnit(e,r)}}})})),1)],1)},je=[],Ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",t._g(t._b({staticClass:"spark-unit-entry--editable"},"v-flex",t.$attrs,!1),t.$listeners),[t._t("before-content"),n("div",{staticStyle:{display:"flex"}},[n("v-layout",{staticClass:"mx-2",style:"flex-grow: 0!important; min-width: "+t.thumbnailSize+"px; max-width: "+t.thumbnailSize+"px;",attrs:{column:""}},[t.$vuetify.breakpoint.xsOnly?n("v-flex",{staticStyle:{"flex-grow":"0"},attrs:{"text-xs-center":""}},[n("span",{staticClass:"caption text-no-wrap"},[t._v(t._s(t.unit.position))])]):t._e(),n("v-layout",{style:t.$vuetify.breakpoint.xsOnly?"flex-grow: 0;":void 0,attrs:{"align-content-end":t.$vuetify.breakpoint.smAndUp}},[n("unit-thumbnail",{staticClass:"unit-thumbnail",style:"border-color: "+t.orderSettings.border+";",attrs:{src:t.getImageUrls(t.unit.id).ills_battle,rarity:t.rarity,imageTitle:t.name,displayWidth:t.thumbnailSize,displayHeight:t.thumbnailSize}},[n("template",{slot:"after-image"},[n("text",{attrs:{x:0,y:.75*t.thumbnailSize}},[t._v("\n              "+t._s(t.bbOrderToShow)+"\n            ")])])],2)],1),t.orderSettings?n("v-flex",{staticClass:"text-xs-center"},[n("v-chip",{staticClass:"bb-order-chip",style:"\n            background-color: "+t.orderSettings.background+";\n            color: "+t.orderSettings.foreground+";\n            border-color: "+t.orderSettings.border+";\n          ",attrs:{tabindex:"-1",small:""}},[n("b",[t._v(t._s(t.orderSettings.text))])])],1):t._e(),t.warnings.length>0?n("v-flex",{staticClass:"text-xs-center",staticStyle:{"flex-grow":"0"},attrs:{"align-content-end":""}},[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.showWarningDialog,callback:function(e){t.showWarningDialog=e},expression:"showWarningDialog"}},[n("v-btn",{attrs:{slot:"activator",fab:"",small:"",color:"warning"},slot:"activator"},[n("v-icon",[t._v("info")])],1),n("v-card",[n("v-card-text",[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-flex",[n("v-alert",{attrs:{outline:"",value:!0,type:"warning"}},[n("span",[t._v("This unit has issues that may affect the accuracy of results.")]),n("v-list",t._l(t.warnings,(function(e){return n("v-list-tile",{key:e},[n("v-list-tile-content",[n("v-list-tile-title",[t._v("\n                            "+t._s(e)+"\n                          ")])],1)],1)})),1)],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{flat:""},on:{click:function(e){t.showWarningDialog=!1}}},[t._v("\n                Back\n              ")])],1)],1)],1)],1):t._e()],1),n("v-layout",{staticStyle:{"align-self":"flex-start"},attrs:{column:""}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",{staticClass:"d-flex-container align-center font-weight-bold subheading"},[t.rarity<8?n("span",[t._v(t._s(t.rarity))]):t._e(),n("rarity-icon",{class:{"ml-1":8!==t.rarity,"mr-1":!0},attrs:{rarity:t.rarity||0,displaySize:18}}),n("span",[t._v(t._s(t.nameLabel))])],1),n("v-spacer"),t.isLead||t.isFriend?n("v-flex",{staticStyle:{"flex-grow":"0"}},[t.isLead?n("leader-icon",{attrs:{displaySize:18}}):t.isFriend?n("friend-icon",{attrs:{displaySize:18}}):t._e()],1):t._e()],1),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",md4:""}},[n("v-select",{attrs:{label:"Action",disabled:t.isEmptyUnit,items:t.actionPossibilities,value:t.actionToShow},on:{input:function(e){return t.emitChangedValue({action:e})}}})],1),n("v-flex",{attrs:{xs12:"",md4:""}},[n("v-select",{attrs:{label:"BB Order",value:t.sparkSimUnitConfig.bbOrder||t.unit.bbOrder,items:t.bbOrderPossibilities},on:{input:function(e){return t.emitChangedValue({bbOrder:e})}}})],1),n("v-flex",{attrs:{xs12:"",md4:""}},[n("v-text-field",{attrs:{label:"Delay",disabled:t.isEmptyUnit,type:"number",value:isNaN(t.sparkSimUnitConfig.delay)?0:+t.sparkSimUnitConfig.delay},on:{input:function(e){return t.emitChangedValue({delay:e})}}})],1),n("v-flex",[n("v-text-field",{attrs:{label:"Weight",hint:"Higher weight means unit will be prioritized over units with lesser weight for spark results. Weight of zero and below means ignore that unit completely.","persistent-hint":"",disabled:t.isEmptyUnit||t.isAnyUnit,type:"number",value:isNaN(t.sparkSimUnitConfig.weight)?1:+t.sparkSimUnitConfig.weight},on:{input:function(e){return t.emitChangedValue({weight:e})}}})],1),n("v-flex",{staticStyle:{padding:"0 0.5em"},attrs:{xs12:""}},[n("v-btn",{attrs:{outline:!t.sparkSimUnitConfig.lockPosition,block:""},on:{click:function(e){return t.emitChangedValue({lockPosition:!t.sparkSimUnitConfig.lockPosition})}}},[n("v-icon",{attrs:{left:""}},[t._v(t._s(t.sparkSimUnitConfig.lockPosition?"lock":"lock_open"))]),n("span",{staticStyle:{"text-transform":"capitalize"}},[t._v("Position")])],1)],1)],1)],1)],1)],2)},Be=[];function Ue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ue(Object(n),!0).forEach((function(e){Le(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Le(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var De={mixins:[P["a"]],components:{UnitThumbnail:C["a"],RarityIcon:ge["a"],LeaderIcon:be["a"],FriendIcon:me["a"]},props:{unit:{type:Object,required:!0},isLead:{type:Boolean,default:!1},isFriend:{type:Boolean,default:!1},sparkSimUnitConfig:{type:Object,default:function(){}},warnings:{type:Array,default:function(){return[]}}},computed:Me({},Object(o["c"])("units",{getImageUrls:"getImageUrls"}),{thumbnailSize:function(){return 64},iconSize:function(){return 22},unitData:function(){return this.getUnit(this.unit.id)||{}},orderSettings:function(){var t=!isNaN(this.unit.bbOrder);return Me({text:t&&this.actionText||"-"},t&&this.colorSetBasedOnAction||void 0)},rarity:function(){return this.unitData.rarity||0},name:function(){return this.unitData.name||this.unit.id},isEmptyUnit:function(){return this.name===d["L"].EMPTY},isAnyUnit:function(){return this.name===d["L"].ANY},actionPossibilities:function(){var t=this,e=[{text:"BB",value:d["M"].BB},{text:"SBB",value:d["M"].SBB},{text:"UBB",value:d["M"].UBB}].filter((function(e){var n=e.value;return t.unit.id===d["L"].ANY||t.unitData[n]||t.unit.action===n})),n=[this.isEmptyUnit&&{text:"None",value:d["M"].NONE},!this.isEmptyUnit&&{text:"Attack",value:d["M"].ATK}].filter((function(t){return t}));return n.concat(e)},bbOrderPossibilities:function(){return[d["a"]].concat(new Array(6).fill(0).map((function(t,e){return e+1})))},moveTypeText:function(){var t=Object.keys(this.unitData).length>0&&Object(W["m"])(this.unitData);return t&&" (".concat(t,")")||""},nameLabel:function(){return"".concat(this.name).concat(this.moveTypeText)},actionToShow:function(){return this.sparkSimUnitConfig.action||this.unit.action},colorSetBasedOnAction:function(){var t=(this.actionToShow===d["M"].UBB?"red":this.actionToShow===d["M"].SBB&&"amber")||this.actionToShow===d["M"].BB&&"blueGrey"||"grey";return{border:ve.a[t].base,background:ve.a[t].lighten4,foreground:ve.a[t].darken4}},actionText:function(){var t=this.actionToShow||this.unitData.sbb&&d["M"].SBB||this.unitData.bb&&d["M"].BB||d["M"].ATK;return t.toUpperCase()},bbOrderToShow:function(){return[!isNaN(this.sparkSimUnitConfig.bbOrder)&&this.sparkSimUnitConfig.bbOrder,this.sparkSimUnitConfig.bbOrder===d["a"]&&"-",!isNaN(this.unit.bbOrder)&&this.unit.bbOrder,"-"].find((function(t){return t}))}}),data:function(){return{showWarningDialog:!1}},methods:{emitChangedValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$emit("input",kt(Me({},this.sparkSimUnitConfig,{},t)))}}},Fe=De,Ne=(n("2393"),Object(M["a"])(Fe,Ie,Be,!1,null,null,null)),Re=Ne.exports;function Ve(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ze(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ve(Object(n),!0).forEach((function(e){$e(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var We={mixins:[P["a"]],components:{UnitEntry:Re},props:{squad:{type:Object,required:!0},value:{type:Object,required:!0}},computed:{fullUnits:function(){var t=this;return d["Q"].map((function(e){var n=t.squad.units.find((function(t){return t.position===e}));return n||(n=Object(c["d"])({isEmpty:!0,bbOrder:null,position:e})),n}))},warningsByUnit:function(){var t=this,e=new WeakMap;return this.fullUnits.forEach((function(n,r){var i=t.value.unitConfig[r]||{},a=["unit.bb","unit.sbb","unit.ubb"],s=t.getUnit(n.id)||{},o=bt(s[i.action||n.action]),u=Object(c["f"])({unitEntry:n,target:d["O"].ENEMY,effectType:d["K"].PROC,squad:t.squad},t).filter((function(t){return!a.includes(t.sourcePath)&&(!t.triggeredOn||t.triggeredOn===n.action)}));e.set(n,Et({unit:n,attackEffects:o.concat(u),unitData:s}))})),e},hasEmptyUnit:function(){return this.fullUnits.some((function(t){return t.id===d["L"].EMPTY}))}},mounted:function(){this.hasEmptyUnit&&this.checkEmptyUnitConfig()},methods:{getUnitEntryKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(JSON.stringify(t),"-").concat(e)},updateEntryForUnit:function(t,e){if(!(t instanceof Event)){var n=this.value.unitConfig.slice();n[e]=t,this.emitChangedValue({unitConfig:n})}},emitChangedValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$emit("input",Ot(ze({},this.value,{},t),this.squad))},checkEmptyUnitConfig:function(){var t=this;if(Array.isArray(this.value.unitConfig)){var e=!1,n=this.value.unitConfig.map((function(n,r){var i=t.squad.units[r],a=n;return i.id===d["L"].EMPTY&&n.action!==d["M"].NONE&&(e=!0,a=kt(ze({},n,{action:d["M"].NONE}))),a}));e&&this.emitChangedValue({unitConfig:n})}}},watch:{squad:function(){this.hasEmptyUnit&&this.checkEmptyUnitConfig()},hasEmptyUnit:function(t){t&&this.checkEmptyUnitConfig()}}},Ke=We,He=Object(M["a"])(Ke,_e,je,!1,null,null,null),Ye=He.exports,Qe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{staticClass:"overall-simulator-options",attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm4:"",md2:""}},[n("span",[t._v("Set All Orders:")])]),n("v-flex",{attrs:{xs6:"",sm4:"",md2:""}},[n("v-btn",{staticClass:"mx-2",on:{click:t.setAllOrdersInitial}},[t._v("Initial")])],1),n("v-flex",{attrs:{xs6:"",sm4:"",md2:""}},[n("v-btn",{staticClass:"mx-2",on:{click:t.setAllOrdersAny}},[t._v("Any")])],1),n("v-flex",{attrs:{xs12:"",sm4:"",md2:""}},[n("span",[t._v("Set All Positions:")])]),n("v-flex",{attrs:{xs6:"",sm4:"",md2:""}},[n("v-btn",{staticClass:"mx-2",on:{click:function(){return t.setAllPositions(!0)}}},[t._v("Locked")])],1),n("v-flex",{attrs:{xs6:"",sm4:"",md2:""}},[n("v-btn",{staticClass:"mx-2",on:{click:function(){return t.setAllPositions(!1)}}},[t._v("Unlocked")])],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{label:"Enemy Count",type:"number",hint:"There must be at least 2 enemies to ensure accuracy",value:t.value.enemyCount,"persistent-hint":""},on:{input:function(e){return t.emitChangedValue({enemyCount:e})}}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-switch",{attrs:{label:t.burstCutinToggleLabel,"hide-details":""},model:{value:t.burstCutins,callback:function(e){t.burstCutins=e},expression:"burstCutins"}})],1),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-text-field",{attrs:{label:"Result Threshold",type:"number",value:t.value.resultThreshold,suffix:"%"},on:{input:function(e){return t.emitChangedValue({resultThreshold:e})}}})],1),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-text-field",{attrs:{label:"Max Results",type:"number",value:t.value.maxResults},on:{input:function(e){return t.emitChangedValue({maxResults:e})}}})],1),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-text-field",{attrs:{label:"Worker Count",type:"number",value:t.value.workerCount,hint:t.workerCountFieldLabel,"persistent-hint":""},on:{input:function(e){return t.emitChangedValue({workerCount:e})}}})],1)],1)},Ge=[];function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(n),!0).forEach((function(e){Ze(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ze(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tn={props:{value:{type:Object,required:!0},squad:{type:Object,required:!0}},computed:{burstCutinToggleLabel:function(){return"Burst Cutins are ".concat(this.value.burstCutins?"on":"off")},workerCountFieldLabel:function(){return"Max: ".concat(it)},MAX_WORKERS:function(){return it}},data:function(){return{burstCutins:!1}},methods:{emitChangedValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$emit("input",Ot(Xe({},this.value,{},t),this.squad))},setAllOrdersInitial:function(){var t=this,e=this.value.unitConfig.map((function(e,n){var r=t.squad.units[n];return kt(Xe({},e,{bbOrder:r.bbOrder}))}));this.emitChangedValue({unitConfig:e})},setAllOrdersAny:function(){var t=this.value.unitConfig.map((function(t){return kt(Xe({},t,{bbOrder:d["a"]}))}));this.emitChangedValue({unitConfig:t})},setAllPositions:function(t){var e=this.value.unitConfig.map((function(e){return kt(Xe({},e,{lockPosition:!!t}))}));this.emitChangedValue({unitConfig:e})}},watch:{value:{immediate:!0,handler:function(t){t&&(this.burstCutins=!!t.burstCutins)}},burstCutins:function(t){this.emitChangedValue({burstCutins:t})}}},en=tn,nn=(n("e4c8"),Object(M["a"])(en,Qe,Ge,!1,null,null,null)),rn=nn.exports;function an(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(r,i)}function sn(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){an(a,r,i,s,o,"next",t)}function o(t){an(a,r,i,s,o,"throw",t)}s(void 0)}))}}var on=new l["a"]({prefix:"[SparkStatisticsArea]"}),un={mixins:[P["a"]],props:{squad:{type:Object,required:!0},initialSimulatorOptions:{type:Object,default:function(){}}},components:{SparkSquadCard:Te,SparkSquadCardEditable:Ye,OverallSimulatorOptions:rn},computed:{resultSelectValues:function(){var t=this;return Object.freeze(this.results.map((function(e,n){return{label:t.getResultName(e,n),value:n}})))},simulatorWarnings:function(){return Ct(this.squad,this.simulatorOptions)},progressLabel:function(){return"".concat(this.progressPercent.toFixed(2),"% (").concat(this.progressActual,"/").concat(this.progressTotal,")")},progressPercent:function(){return this.progressActual/Math.max(1,this.progressTotal)*100},combosTestedPerSecond:function(){return(this.lastTestedCount/Math.max(this.simulationEndTime-this.simulationStartTime,1)*1e3).toFixed(2)}},data:function(){return{sparkSimulator:new le,results:null,currentSection:0,runningSimulator:!1,resultForCurrentSquad:null,simulatorOptions:null,currentResultIndex:0,showProgressDialog:!1,progressTotal:0,progressActual:0,progressAnimationFrame:null,progressObject:{total:0,completed:0,countTested:0},errors:[],simulationStartTime:Date.now(),simulationEndTime:Date.now(),simulationElapsedText:"",lastTestedCount:0,errorForCurrentSquad:null,errorForCalculations:null}},created:function(){this.simulatorOptions=Ot(this.initialSimulatorOptions,this.squad)},mounted:function(){this.sparkSimulator.getters={unit:this.getUnit,item:this.getItem,extraSkill:this.getExtraSkill},this.calculateResultForCurrentSquad()},methods:{cancelCalculations:function(){this.sparkSimulator.cancelCalculations()},runSimulator:function(){var t=sn(s.a.mark((function t(){var e,n=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.progressObject={total:0,completed:0},this.setProgress(),this.results=null,this.runningSimulator=!0,this.showProgressDialog=!0,this.errorForCalculations=null,this.currentResultIndex=0,this.progressAnimationFrame&&(cancelAnimationFrame(this.progressAnimationFrame),this.progressAnimationFrame=null),this.sparkSimulator.addProgressListener((function(t){n.progressObject=t,n.throttledSetProgress()})),this.simulationStartTime=Date.now(),this.throttledSetProgress(),t.next=13,this.$nextTick();case 13:return t.prev=13,t.next=16,this.sparkSimulator.calculateOptimalOrdersForSquad(this.squad,this.simulatorOptions);case 16:e=t.sent,this.errors=e.errors,this.results=e.results,t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](13),on.error("error calculating spark results",{err:t.t0,squad:this.squad,simulatorOptions:this.simulatorOptions}),this.errorForCalculations=t.t0;case 25:return this.progressAnimationFrame&&(cancelAnimationFrame(this.progressAnimationFrame),this.progressAnimationFrame=null),this.setProgress(),this.runningSimulator=!1,this.showProgressDialog=!1,this.progressObject={total:0,completed:0},this.simulationEndTime=Date.now(),this.sparkSimulator.removeAllListeners(),t.next=34,this.$nextTick();case 34:this.currentSection=2;case 35:case"end":return t.stop()}}),t,this,[[13,21]])})));function e(){return t.apply(this,arguments)}return e}(),calculateResultForCurrentSquad:function(){this.errorForCurrentSquad=null;try{this.resultForCurrentSquad=Object.freeze(this.sparkSimulator.calculateSparksForSquad(this.squad,Ot(this.squad.simulatorOptions,this.squad)))}catch(t){on.error("error calculating results for current squad",{err:t}),this.errorForCurrentSquad=t,this.resultForCurrentSquad=null}},emitShareEvent:function(t){this.$emit("share",t)},emitSimulatorOptions:function(){this.$emit("simoptions",this.simulatorOptions)},getResultName:function(t,e){return"Result ".concat(e+1," (").concat((100*t.weightedPercentage).toFixed(2),"%)")},applySparkResult:function(t){var e=qt(this.squad,t,this.simulatorOptions);this.$emit("apply",e),this.results=null,this.simulatorOptions=e.options,this.currentSection=0},setProgress:function(){this.progressActual=this.progressObject&&this.progressObject.completed||0,this.progressTotal=this.progressObject&&this.progressObject.total||0,this.lastTestedCount=this.progressObject&&this.progressObject.completed||0,this.simulationElapsedText=this.getTimeElapsedText()},throttledSetProgress:function(){var t=this;if(!this.progressAnimationFrame){var e=function(e){return e!==t.progressObject},n=function n(){var r=t.progressObject;t.progressAnimationFrame=requestAnimationFrame((function(){t.simulationElapsedText=t.getTimeElapsedText(),e(r)&&t.setProgress(),t.runningSimulator&&requestAnimationFrame(n)}))};n()}},getTimeElapsedText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=t-this.simulationStartTime,n=1/6e4,r=.001,i=Math.floor(e*n),a=Math.floor((e-i/n)*r);return"".concat(i.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))}},watch:{simulatorOptions:function(){this.emitSimulatorOptions()},squad:function(){this.calculateResultForCurrentSquad()},resultForCurrentSquad:function(t){this.$emit("currentsquadresult",t)}}},ln=un,cn=(n("d9ad"),Object(M["a"])(ln,G,J,!1,null,null,null)),dn=cn.exports,fn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"squad-multidex-links"},[n("dl",[t._l(t.fullUnits,(function(e){return[n("dt",{key:t.unitKeyBySquadEntry.get(e)+"-title",staticClass:"title mt-3 mb-2",domProps:{textContent:t._s(t.titleBySquadEntry.get(e))}}),n("dd",{key:t.unitKeyBySquadEntry.get(e)+"-links"},[n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.linksBySquadEntry.get(e),(function(e,r){return n("v-flex",{key:r,staticClass:"pa-2",attrs:{xs12:"",sm6:""}},[n(t.getComponentNameFromEntry(e),{tag:"component",attrs:{entry:t.getDataForEntry(e),to:t.generateMultidexPathToEntry(e),sp:e.sp}},[t._v("\n              "+t._s(e)+"\n            ")])],1)})),1)],1)]}))],2)])},pn=[],hn=n("de7e"),vn=n("0a43"),gn=n("3e0d"),bn={mixins:[P["a"]],props:{squad:{type:Object,required:!0}},components:{UnitEntryCard:hn["a"],ExtraSkillEntryCard:vn["a"],ItemEntryCard:gn["a"]},computed:{fullUnits:function(){var t=this;return d["Q"].map((function(e){var n=t.squad.units.find((function(t){return t.position===e}));return n||(n=Object(c["d"])({isEmpty:!0,bbOrder:null,position:e})),n}))},linksBySquadEntry:function(){var t=new WeakMap;return this.fullUnits.forEach((function(e){t.set(e,Object(c["h"])(e))})),t},unitKeyBySquadEntry:function(){var t=new WeakMap;return this.fullUnits.forEach((function(e,n){t.set(e,"".concat(JSON.stringify(e),"-").concat(n))})),t},titleBySquadEntry:function(){var t=this,e=new WeakMap;return this.fullUnits.forEach((function(n){var r=t.getUnit(n.id)||{},i="".concat(r.name||r.id||n.id," (").concat(n.position,")");e.set(n,i)})),e},multidexPathGetters:function(){var t=this.$store.getters;return d["F"].reduce((function(e,n){var r=n.name;return e[r]=t["".concat(r,"/getMultidexPathTo")],e}),{})}},methods:{generateMultidexPathToEntry:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.moduleName,r=e.id,i=e.sp,a=this.multidexPathGetters[n]||function(e){return"/multidex/".concat(n,"/?server=").concat(t.$store.state.settings.activeServer,"&viewId=").concat(e)},s=a(r);return i&&i.length>0?"".concat(s,"&enhancements=").concat(i):s},getComponentNameFromEntry:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.moduleName,n="router-link";return"units"===e?n="unit-entry-card":"extraSkills"===e?n="extra-skill-entry-card":"items"===e&&(n="item-entry-card"),n},getDataForEntry:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.moduleName,n=t.id,r={id:n};return"units"===e?r=this.getUnit(n)||r:"extraSkills"===e?r=this.getExtraSkill(n)||r:"items"===e&&(r=this.getItem(n)||r),r}}},mn=bn,yn=Object(M["a"])(mn,fn,pn,!1,null,null,null),An=yn.exports;function Sn(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(r,i)}function xn(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){Sn(a,r,i,s,o,"next",t)}function o(t){Sn(a,r,i,s,o,"throw",t)}s(void 0)}))}}function wn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function On(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wn(Object(n),!0).forEach((function(e){kn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var En=new l["a"]({prefix:"[Squad]"}),Cn={props:{id:{type:String,required:!0}},components:{ModuleChecker:f["a"],SquadListCard:v["a"],ShareSquadCard:g["a"],DeleteSquadCard:b["a"],TabContainer:m["a"],SquadListCardEditable:y["a"],LoadingIndicator:p["a"],SquadBuffExpandableListView:V,SquadArenaSuggestionTable:Q,SquadSparkStatisticsArea:dn,PromiseWait:h["a"],MultidexLinks:An},computed:On({},Object(o["e"])("settings",["activeServer"]),{targetTypes:function(){return d["O"]},squadBuffTypes:function(){return d["K"]},requiredModules:function(){return u["b"]},tabConfig:function(){return["Multidex Links","Buffs","Spark Statistics","Arena"].map((function(t){return{name:t,slot:t.toLowerCase().replace(/ /g,"-")}}))},squadCode:function(){return this.squad?Object(c["l"])(this.squad):""},minimizeSquadActionButtons:function(){return this.$vuetify.breakpoint.xsOnly}}),data:function(){return{squad:null,squadUnits:{},squadItems:{},squadExtraSkills:{},squadLeaderSkills:{},isLoadingSquadData:!1,activeSquadDialog:"",editMode:!1,currentTabIndex:0,tempSquad:{},topNavbarHeight:56,sparkResultToShare:null,simulatorOptions:{},initialLoadPromise:Promise.resolve(),disableActiveClassTimeout:null}},mounted:function(){var t=this;this.isLoadingSquadData=!0,this.initialLoadPromise=this.$store.dispatch("squads/getSquadById",this.id).then((function(e){if(!e||!e.squad)throw new Error("Specified squad doesn't exist.");t.squad=Object(c["a"])(e.squad)}))},methods:On({},Object(o["b"])("units",{getUnits:"getByIds"}),{},Object(o["b"])("items",{getItems:"getByIds"}),{},Object(o["b"])("extraSkills",{getExtraSkills:"getByIds"}),{},Object(o["b"])("leaderSkills",{getLeaderSkills:"getByIds"}),{getUnit:function(t){return this.squadUnits[t]||{}},getItem:function(t){return this.squadItems[t]||{}},getExtraSkill:function(t){return this.squadExtraSkills[t]||{}},getLeaderSkill:function(t){return this.squadLeaderSkills[t]||{}},updatePageDbForSquad:function(){var t=xn(s.a.mark((function t(e){var n,r,i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=15;break}return n=Object(c["g"])(e),r=function(t){return"".concat(t[0].toLowerCase()).concat(t.slice(1))},i=this.activeServer,t.prev=4,t.next=7,["Units","Items","ExtraSkills","LeaderSkills"].reduce((function(t,e){var o=[],u=a["squad".concat(e)],l=n[r(e)],c={},d=Object.keys(u).map((function(t){return+t})).concat(l);return d.forEach((function(t){!isNaN(t)&&l.includes(t)&&(u[t]?c[t]=u[t]:o.push(t))})),t.then(xn(s.a.mark((function t(){var n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(o.length>0)){t.next=8;break}return a.isLoadingSquadData||(a.isLoadingSquadData=!0),t.next=4,a["get".concat(e)]({ids:o,server:i,extractedFields:[]});case 4:n=t.sent,a["squad".concat(e)]=Object.freeze(On({},c,{},n)),t.next=9;break;case 8:a["squad".concat(e)]=Object.freeze(c);case 9:case"end":return t.stop()}}),t)}))))}),Promise.resolve());case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](4),En.error(t.t0);case 12:return t.prev=12,this.isLoadingSquadData=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[4,9,12,15]])})));function e(e){return t.apply(this,arguments)}return e}(),setDocumentTitle:function(){var t="BF-MT - Squad";this.squad&&this.squad.name?document.title=[t,this.squad.name].join(" - "):document.title=t},getSquadUrl:function(t){return this.$router.resolve({path:"/tools/squads/add",query:{import:"string"!==typeof t?Object(c["l"])(t):t}}).route.fullPath},onNewUnits:function(t){this.tempSquad=On({},this.tempSquad,{units:t})},onPageReady:function(){this.updateTopNavbarHeight(),this.$store.state.disableHtmlOverflow&&this.$store.commit("setHtmlOverflowDisableState",!1)},updateTopNavbarHeight:function(){var t=document.querySelector("nav.v-toolbar");this.topNavbarHeight=t&&t.offsetHeight||56},applySparkResult:function(){var t=xn(s.a.mark((function t(){var e,n,r,i,a=arguments;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},n=e.squad,r=e.sparkResult,i=e.options,n.simulatorOptions=i||this.simulatorOptions,t.next=4,this.$store.dispatch("squads/storeSquad",{server:this.$store.state.settings.activeServer,squad:n,id:this.id});case 4:this.sparkResultToShare=r,this.squad=n;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkWindowActiveClass:function(){var t=this;if(!this.disableActiveClassTimeout){var e=function e(){var n=t.$el.querySelector(".v-window__container--is-active");n?(n.classList.remove("v-window__container--is-active"),t.disableActiveClassTimeout=setTimeout(e,1e3)):t.disableActiveClassTimeout=null};this.disableActiveClassTimeout=setTimeout(e,1e3)}}}),watch:{squad:function(){var t=xn(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.setDocumentTitle(),t.next=3,this.updatePageDbForSquad(e);case 3:this.onPageReady();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),editMode:function(){var t=xn(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e?(this.tempSquad=Object(c["a"])(this.squad),this.tempSquad.simulatorOptions=this.simulatorOptions):this.tempSquad={};case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),tempSquad:function(){var t=xn(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e||!Array.isArray(e.units)){t.next=5;break}return t.next=3,this.updatePageDbForSquad(e);case 3:t.next=7;break;case 5:return t.next=7,this.updatePageDbForSquad(this.squad);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),currentTabIndex:function(){this.checkWindowActiveClass()}}},qn=Cn,Pn=Object(M["a"])(qn,r,i,!1,null,null,null);e["default"]=Pn.exports},d41e:function(t,e,n){"use strict";var r=n("654e"),i=n.n(r);i.a},d939:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("module-checker",{attrs:{requiredModules:t.requiredModules,ensureDbSync:!0,useUpdateDialog:!1}},[n("v-container",{attrs:{fluid:""}},[t.hasSelection?n("v-layout",[n("loading-indicator",{attrs:{loadingMessage:"Processing selection..."}})],1):[n("v-layout",{attrs:{row:"","align-center":""}},[n("v-flex",[n("v-text-field",{attrs:{label:"Search","persistent-hint":"",hint:t.searchHint},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendQuery(e)}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1),n("v-flex",{staticStyle:{"flex-grow":"0"}},[n("v-btn",{staticClass:"mr-0",attrs:{icon:"",flat:"",outline:t.hasDirtyQuery},on:{click:t.sendQuery}},[n("v-icon",[t._v("search")])],1)],1)],1),n("v-layout",{staticStyle:{"min-height":"0","max-height":"55vh",flex:"1"}},[n("div",{staticClass:"py-2 px-1",staticStyle:{overflow:"auto",flex:"1"}},[t._t("entries",[n("v-layout",{attrs:{row:"",wrap:""}},[t._v("\n                  "+t._s(t.entriesToShow)+"\n              ")])],{entries:t.entriesToShow})],2)]),t.numPages>1?n("v-layout",{attrs:{row:"","justify-center":"","align-center":""}},[n("v-pagination",{attrs:{"total-visible":t.$vuetify.breakpoint.mdAndUp?20:void 0,length:t.numPages},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1):t._e()],t.showCancelButton?[n("v-layout",{directives:[{name:"show",rawName:"v-show",value:!t.hasSelection,expression:"!hasSelection"}],staticStyle:{"justify-content":"flex-end"},attrs:{row:""}},[n("v-flex",{staticStyle:{flex:"none"}},[n("v-btn",{attrs:{flat:""},on:{click:function(e){return t.$emit("cancel")}}},[t._v("Cancel")])],1)],1)]:t._e()],2)],1)],1)},i=[],a=n("b758"),s=n("88fe"),o={props:{allEntryIds:{type:Array,default:function(){return[]}},value:{type:String,default:""},entriesPerPage:{type:Number,default:24},hasSelection:{type:Boolean,default:!1},requiredModules:{type:Array,default:function(){return[]}},showCancelButton:{type:Boolean,default:!0}},components:{LoadingIndicator:a["a"],ModuleChecker:s["a"]},computed:{numPages:function(){return Math.ceil(this.allEntryIds.length/this.entriesPerPage)},entriesToShow:function(){var t=Math.max((this.currentPage-1)*this.entriesPerPage,0);return this.allEntryIds.slice(t,t+this.entriesPerPage)},hasDirtyQuery:function(){return this.query!==this.value},searchHint:function(){return["".concat(this.allEntryIds.length," results"),this.hasDirtyQuery&&"*"].filter((function(t){return t})).join("")}},data:function(){return{currentPage:1,query:""}},methods:{sendQuery:function(){this.$emit("input",this.query)}},watch:{value:{immediate:!0,handler:function(t){this.query=t||""}}}},u=o,l=n("2877"),c=Object(l["a"])(u,r,i,!1,null,null,null);e["a"]=c.exports},d9ad:function(t,e,n){"use strict";var r=n("e36c"),i=n.n(r);i.a},e36c:function(t,e,n){},e4c8:function(t,e,n){"use strict";var r=n("be6b"),i=n.n(r);i.a},e7ab:function(t,e,n){},f2fe:function(t,e,n){},f8bc:function(t,e,n){"use strict";var r=n("bbc5"),i=n.n(r);i.a},fa37:function(t,e,n){"use strict";var r=n("8d77"),i=n.n(r);i.a}}]);
//# sourceMappingURL=squads.ce25e496.js.map