{"version":3,"sources":["webpack:///./src/modules/core/units.js","webpack:///./src/components/Multidex/HitCountTable.vue?894a","webpack:///src/components/Multidex/HitCountTable.vue","webpack:///./src/components/Multidex/HitCountTable.vue?2d4e","webpack:///./src/components/Multidex/HitCountTable.vue","webpack:///./src/modules/core/bursts.js","webpack:///./src/components/Multidex/Units/EntryCard.vue?baec","webpack:///src/components/Multidex/Units/EntryCard.vue","webpack:///./src/components/Multidex/Units/EntryCard.vue?45e0","webpack:///./src/components/Multidex/Units/EntryCard.vue","webpack:///./src/components/Multidex/HitCountTable.vue?4e68"],"names":["getExtraAttacks","unit","extraAttacks","bb","sbb","ubb","possibleEffects","isAttackingPassive","e","some","triggeredEffect","attackingProcs","includes","mapEffect","effect","source","filter","forEach","push","_objectSpread","trigger on bb","trigger on sbb","trigger on ubb","_unit$extraSkill$eff","effects","feskills","map","s","skill","reduce","acc","val","concat","passive","burstTypes","Object","keys","type","getSpCategory","num","spCategoryMapping","getSpSkillEffects","skillEntry","sp_type","spCodeToIndex","char","charCodeAt","spIndexToCode","index","String","fromCharCode","hasEvolutions","prev","next","evo_mats","getEvolutions","_getEvolutions","apply","this","arguments","_callee","getUnit","evolutions","tempUnit","_args","D_GitHub_bf_mt_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","wrap","_context","length","undefined","id","abrupt","Promise","resolve","toString","sent","current","mats","cost","evo_cost","stop","getDropCheckInfo","hasHitCounts","hits","dropchecks","dropCheckPerHit","getMoveType","isNormalAttack","moveTypeCode","safeGet","moveTypeMapping","evaluateSingleArenaCondition","_ref","_ref$condition","condition","_ref$target","target","isParty","arenaConditionCodeToText","code","mapping","topHalf","anywhere","middleAndBelow","beforeHealers","bottomHalf","afterHealers","getArenaPositionRecommendation","defaultSuggestion","Array","isArray","ai","skillBasedProcs","entry","action","chanceMapping","chance","highestChanceConditions","sort","b","key","positions","from","Set","getColoClassUsage","isGlobal","v","getHighestRarityUnit","category","unitById","name","i","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","fluid","row","xs12","_v","_l","legendIndex","class","pr-1","$vuetify","breakpoint","smAndUp","sm6","md3","_s","label","domProps","innerHTML","desc","_e","col","xs4","text","item","text-xs-center hitcount-table--row d-align-items-center","blue--text","selfSparkType","orange--text","purple--text text--lighten-2","value","staticRenderFns","HitCountTablevue_type_script_lang_js_","props","attack","sparkedFrames","default","attackIndex","Number","attackType","delay","computed","headers","sortable","align","items","_this","frame","frameIndex","hitNum","frameNum","damage","diff","legendColors","data","hasSparks","methods","_this2","sparkEntry","sparkTypes","_ref2","hasNativeAttacks","t","hasExtraAttacks","Multidex_HitCountTablevue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","getBurstEffects","burst","level","levelIndex","levels","getBcDcInfo","endLevel","attacks","proc id","indexOf","numHits","dropChecks","getHitCountData","filterFn","f","effectData","targetAreaMapping","frames","getHealFrameData","getExtraAttackFrames","_x","_getExtraAttackFrames","attackFrameSets","healFrameSets","d","SWorker","run","frameTimes","hitDmgDistribution","frameSet","keepFirstFrame","slice","unifiedFrames","time","dmg","frame times","hit dmg% distribution","getExtraAttackHitCountData","_x2","_getExtraAttackHitCountData","_callee2","hasWiles","extraAttackFrames","_args2","_context2","target area","effect delay time(ms)/frame","getTotalDistribution","calculateSparkedFrames","_x3","_x4","_calculateSparkedFrames","_callee3","hitCountData","extraAttackHitCountData","result","_context3","native","extra","allFrames","addFrame","timeKey","split","hasSelfSpark","inputDelay","getSelfSparkCount","to","xs3","src","getImageUrls","ills_thum","rarity","imageTitle","displayWidth","thumbnailSize","displayHeight","xs9","element","displaySize","staticStyle","word-break","textContent","white-space","guide_id","color","genderIconInfo","icon","ml-1","EntryCardvue_type_script_lang_js_","mixins","BaseEntryCardMixin","components","ElementIcon","RarityIcon","UnitThumbnail","vuex_esm","utils","gender","xlOnly","mdAndUp","Units_EntryCardvue_type_script_lang_js_","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_HitCountTable_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_HitCountTable_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/bursts~units.87bb5a61.js","sourcesContent":["import { attackingProcs } from '@/modules/EffectProcessor/constants';\r\nimport { spCategoryMapping, moveTypeMapping } from '@/modules/constants';\r\nimport { safeGet } from '@/modules/utils';\r\n\r\nexport function getExtraAttacks (unit) {\r\n  const extraAttacks = {\r\n    bb: [],\r\n    sbb: [],\r\n    ubb: [],\r\n  };\r\n  if (!unit) {\r\n    return extraAttacks;\r\n  }\r\n\r\n  let possibleEffects = [];\r\n  const isAttackingPassive = e => e['passive id'] === '66' &&\r\n    e['triggered effect'].some(triggeredEffect => attackingProcs.includes(triggeredEffect['proc id'] || triggeredEffect['unknown proc id']));\r\n  const mapEffect = (effect, source) => {\r\n    effect['triggered effect']\r\n      .filter(triggeredEffect => attackingProcs.includes(triggeredEffect['proc id'] || triggeredEffect['unknown proc id']))\r\n      .forEach(triggeredEffect => {\r\n        possibleEffects.push({\r\n          ...triggeredEffect,\r\n          source,\r\n          'trigger on bb': effect['trigger on bb'],\r\n          'trigger on sbb': effect['trigger on sbb'],\r\n          'trigger on ubb': effect['trigger on ubb'],\r\n        });\r\n      });\r\n  };\r\n\r\n  if (unit['extra skill']) {\r\n    const { effects = [] } = unit['extra skill'];\r\n    effects.filter(isAttackingPassive).forEach(e => mapEffect(e, 'ES'));\r\n  }\r\n\r\n  if (unit.feskills) {\r\n    unit.feskills\r\n      .map(s => s.skill.effects)\r\n      .reduce((acc, val) => acc.concat(val), [])\r\n      .filter(s => s.passive && isAttackingPassive(s.passive))\r\n      .map(s => s.passive)\r\n      .forEach(e => mapEffect(e, 'SP'));\r\n  }\r\n\r\n  possibleEffects.forEach(effect => {\r\n    const burstTypes = Object.keys(extraAttacks);\r\n    burstTypes.forEach(type => {\r\n      if (effect[`trigger on ${type}`]) {\r\n        extraAttacks[type].push(effect);\r\n      }\r\n    });\r\n  });\r\n  return extraAttacks;\r\n}\r\n\r\nexport function getSpCategory (num) {\r\n  return spCategoryMapping[+num];\r\n}\r\n\r\nexport function getSpSkillEffects (skillEntry) {\r\n  const effects = [];\r\n  skillEntry.skill.effects.forEach(e => {\r\n    // distinguish between passive and add to bb/sbb/ubb\r\n    Object.keys(e).forEach(type => {\r\n      const effect = e[type];\r\n      effects.push({ sp_type: type, ...effect });\r\n    });\r\n  });\r\n  return effects;\r\n}\r\n\r\nexport function spCodeToIndex (char) {\r\n  return char.charCodeAt(0) - ((char < 'a') ? 'A'.charCodeAt(0) : ('a'.charCodeAt(0))) + (char < 'a' ? 0 : 26);\r\n}\r\n\r\nexport function spIndexToCode (index) {\r\n  return String.fromCharCode(index >= 26 ? (index - 26 + 'a'.charCodeAt(0)) : (index + 'A'.charCodeAt(0)));\r\n}\r\n\r\nexport function hasEvolutions (unit) {\r\n  return unit && !!(unit.prev || unit.next || unit.evo_mats);\r\n}\r\n\r\nexport async function getEvolutions (unit = {}, getUnit = (id) => ({ id })) {\r\n  if (!hasEvolutions(unit)) {\r\n    return [];\r\n  }\r\n\r\n  const evolutions = [];\r\n  let tempUnit = unit;\r\n  // go to first in evo line\r\n  while (tempUnit.prev) {\r\n    tempUnit = await Promise.resolve(getUnit(tempUnit.prev.toString()));\r\n  }\r\n\r\n  while (tempUnit.next) {\r\n    evolutions.push({\r\n      current: tempUnit.id.toString(),\r\n      next: tempUnit.next,\r\n      mats: tempUnit.evo_mats,\r\n      cost: tempUnit.evo_cost,\r\n    });\r\n    tempUnit = await Promise.resolve(getUnit(tempUnit.next.toString()));\r\n  }\r\n  return evolutions;\r\n}\r\n\r\nexport function getDropCheckInfo (unit) {\r\n  const hasHitCounts = unit && unit['damage frames'] && unit['damage frames'].hits > 0;\r\n  if (!hasHitCounts) {\r\n    return { hits: 0, dropchecks: 0 };\r\n  }\r\n\r\n  const hits = +unit['damage frames'].hits;\r\n  const dropCheckPerHit = +unit['drop check count'] || 0;\r\n  return {\r\n    hits,\r\n    dropchecks: dropCheckPerHit * hits,\r\n  };\r\n}\r\n\r\nexport function getMoveType (unit, isNormalAttack = true) {\r\n  const moveTypeCode = safeGet(unit, ['movement', isNormalAttack ? 'attack' : 'skill', 'move type']);\r\n  return moveTypeMapping[+moveTypeCode];\r\n}\r\n\r\nexport function evaluateSingleArenaCondition ({ condition = '', target = '' }) {\r\n  const isParty = target === 'party';\r\n  switch (condition) {\r\n    case 'hp_50pr_over':\r\n      return 'topHalf';\r\n    case 'hp_50pr_under':\r\n    case 'hp_75pr_under':\r\n      return !isParty ? 'middleAndBelow' : 'beforeHealers';\r\n    case 'hp_25pr_under':\r\n      return !isParty ? 'bottomHalf' : 'beforeHealers';\r\n    // other: hp_min, hp_max, atk_max, random\r\n    default:\r\n      break;\r\n    }\r\n\r\n    if (!isParty) {\r\n      return 'anywhere';\r\n    } else {\r\n      switch (condition) {\r\n        case 'hp_max':\r\n          return 'afterHealers';\r\n        case 'hp_min':\r\n          return 'beforeHealers';\r\n        default:\r\n          return 'anywhere';\r\n      }\r\n    }\r\n}\r\n\r\nexport function arenaConditionCodeToText (code) {\r\n  const mapping = {\r\n    topHalf: 'Top Half',\r\n    anywhere: 'Anywhere',\r\n    middleAndBelow: 'Middle or Lower Half',\r\n    beforeHealers: 'Anywhere Before Healers',\r\n    bottomHalf: 'Bottom Half',\r\n    afterHealers: 'Anywhere After Healers',\r\n  };\r\n  return mapping[code];\r\n}\r\n\r\nexport function getArenaPositionRecommendation (unit = {}) {\r\n  const defaultSuggestion = 'anywhere';\r\n  if (!Array.isArray(unit.ai)) {\r\n    return [defaultSuggestion];\r\n  }\r\n\r\n  const skillBasedProcs = unit.ai.filter(entry => entry.action === 'skill');\r\n  if (skillBasedProcs.length === 0) {\r\n    return [defaultSuggestion];\r\n  }\r\n\r\n  const chanceMapping = {};\r\n  skillBasedProcs.forEach(entry => {\r\n    const condition = entry['target conditions'];\r\n    const chance = entry['chance%'];\r\n    const target = entry['target type'];\r\n\r\n    if (!chanceMapping[chance]) {\r\n      chanceMapping[chance] = [];\r\n    }\r\n    chanceMapping[chance].push({ condition, target });\r\n  });\r\n\r\n  const highestChanceConditions = Object.keys(chanceMapping)\r\n    .sort((a, b) => +b - +a)\r\n    .map(key => chanceMapping[key])[0];\r\n\r\n  const positions = Array.from(new Set(highestChanceConditions.map(evaluateSingleArenaCondition)));\r\n\r\n  return positions;\r\n}\r\n\r\nexport function getColoClassUsage (cost = 0, isGlobal = true) {\r\n  return [\r\n    ((cost <= 32 && isGlobal) || (cost <= 14 && !isGlobal)) && 'Warrior',\r\n    ((cost <= 46 && isGlobal) || (cost <= 19 && !isGlobal)) && 'Gladiator',\r\n    ((cost <= 52 && isGlobal) || (cost <= 35 && !isGlobal)) && 'Conqueror',\r\n    'Hero', // all units can go to hero class\r\n  ].filter(v => v);\r\n}\r\nexport function getHighestRarityUnit (category = 0, unitById = (id) => ({ name: id })) {\r\n  for (let i = 9; i >= 0; --i) {\r\n    const id = `${+category + i}`;\r\n    const unit = unitById(id);\r\n    if (unit) {\r\n      return unit;\r\n    }\r\n  }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"hitcount-table\",attrs:{\"fluid\":\"\"}},[(_vm.hasSparks)?_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('b',[_vm._v(\"Note:\")]),_vm._v(\" No delays are added to these visible values, but sparked rows are calculated using unit delays.\\n    \")]),_vm._l((_vm.legendColors),function(entry,legendIndex){return _c('v-flex',{key:legendIndex,class:{ 'pr-1': _vm.$vuetify.breakpoint.smAndUp },attrs:{\"xs12\":\"\",\"sm6\":\"\",\"md3\":\"\"}},[_c('b',{class:entry.class},[_vm._v(_vm._s(entry.label)+\": \")]),_c('span',{domProps:{\"innerHTML\":_vm._s(entry.desc)}})])})],2):_vm._e(),_c('v-layout',{staticClass:\"hitcount-table--headers d-align-items-center\",attrs:{\"row\":\"\"}},_vm._l((_vm.headers),function(col,i){return _c('v-flex',{key:i,staticClass:\"text-xs-center\",attrs:{\"xs4\":\"\"}},[_c('b',[_vm._v(_vm._s(col.text))])])})),_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',_vm._l((_vm.items),function(item,index){return _c('v-layout',{key:index,class:{\n          'text-xs-center hitcount-table--row d-align-items-center': true,\n          'blue--text': _vm.selfSparkType(item) === 'native',\n          'orange--text': _vm.selfSparkType(item) === 'extra',\n          'purple--text text--lighten-2': _vm.selfSparkType(item) === 'both',\n        },attrs:{\"row\":\"\"}},_vm._l((_vm.headers),function(col,i){return _c('v-flex',{key:i,staticClass:\"text-xs-center\",attrs:{\"xs4\":\"\"}},[_vm._v(\"\\n          \"+_vm._s(item[col.value])+\"\\n        \")])}))}))],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container fluid class=\"hitcount-table\">\r\n    <v-layout row wrap v-if=\"hasSparks\">\r\n      <v-flex xs12>\r\n        <b>Note:</b> No delays are added to these visible values, but sparked rows are calculated using unit delays.\r\n      </v-flex>\r\n      <v-flex xs12 sm6 md3 v-for=\"(entry, legendIndex) in legendColors\" :key=\"legendIndex\" :class=\"{ 'pr-1': $vuetify.breakpoint.smAndUp }\">\r\n        <b :class=\"entry.class\">{{ entry.label }}: </b>\r\n        <span v-html=\"entry.desc\"/>\r\n      </v-flex>\r\n    </v-layout>\r\n    <v-layout row class=\"hitcount-table--headers d-align-items-center\">\r\n      <v-flex xs4 v-for=\"(col, i) in headers\" :key=\"i\" class=\"text-xs-center\">\r\n        <b>{{ col.text }}</b>\r\n      </v-flex>\r\n    </v-layout>\r\n    <v-layout row>\r\n      <v-flex>\r\n        <v-layout\r\n          v-for=\"(item, index) in items\" :key=\"index\"\r\n          :class=\"{\r\n            'text-xs-center hitcount-table--row d-align-items-center': true,\r\n            'blue--text': selfSparkType(item) === 'native',\r\n            'orange--text': selfSparkType(item) === 'extra',\r\n            'purple--text text--lighten-2': selfSparkType(item) === 'both',\r\n          }\"\r\n          row>\r\n          <v-flex xs4 v-for=\"(col, i) in headers\" :key=\"i\" class=\"text-xs-center\">\r\n            {{ item[col.value] }}\r\n          </v-flex>\r\n        </v-layout>\r\n      </v-flex>\r\n    </v-layout>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    attack: {\r\n      type: Object,\r\n    },\r\n    sparkedFrames: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n    attackIndex: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    // native or extra\r\n    attackType: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    delay: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n  },\r\n  computed: {\r\n    headers: () => [\r\n      { text: 'Hit #', sortable: false, value: 'hitNum', align: 'center' },\r\n      { text: 'Frame #', sortable: false, value: 'frameNum', align: 'center' },\r\n      { text: 'DMG% per hit', sortable: false, value: 'damage', align: 'center' },\r\n      { text: 'Frame Diff', sortable: false, value: 'diff', align: 'center' },\r\n    ],\r\n    items () {\r\n      return this.attack['frame times'].map((frame, frameIndex) => (\r\n        {\r\n          hitNum: frameIndex + 1,\r\n          frameNum: frame,\r\n          damage: this.attack['hit dmg% distribution'][frameIndex],\r\n          diff: (frameIndex === 0) ? 0 : (frame - this.attack['frame times'][frameIndex - 1]),\r\n        }\r\n      ));\r\n    },\r\n    legendColors: () => [\r\n      { label: 'Default Color Text', desc: 'No sparks' },\r\n      { label: 'Blue Text', desc: 'Sparks with an attack that <u>is not</u> from ES/SP/Items (i.e. \"native\" attacks)', class: 'blue--text' },\r\n      { label: 'Orange Text', desc: 'Sparks with an attack that <u>is</u> from ES/SP/Items (i.e. \"extra\" attacks)', class: 'orange--text' },\r\n      { label: 'Purple Text', desc: 'Sparks with at least one native attack and one extra attack', class: 'purple--text text--lighten-2' },\r\n    ]\r\n  },\r\n  data () {\r\n    return {\r\n      hasSparks: false,\r\n    };\r\n  },\r\n  methods: {\r\n    selfSparkType (item) {\r\n      const sparkEntry = (this.sparkedFrames || {})[(item.frameNum + this.delay).toString()];\r\n      if (!sparkEntry) {\r\n        return '';\r\n      } else {\r\n        this.hasSparks = true;\r\n      }\r\n\r\n      const sparkTypes = sparkEntry\r\n        .filter(({ index, type }) => !(index === this.attackIndex && type === this.attackType))\r\n        .map(({ type }) => type);\r\n\r\n      const hasNativeAttacks = sparkTypes.some(t => t === 'native');\r\n      const hasExtraAttacks = sparkTypes.some(t => t === 'extra');\r\n      // console.debug(this.attackIndex, this.attackType, item.frameNum, this.delay, sparkEntry, sparkTypes, hasNativeAttacks, hasExtraAttacks);\r\n      if (hasNativeAttacks && hasExtraAttacks) {\r\n        return 'both';\r\n      } else if (hasNativeAttacks) {\r\n        return 'native';\r\n      } else {\r\n        return 'extra';\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.hitcount-table {\r\n  .hitcount-table--row {\r\n    border-bottom: 1px solid var(--background-color-alt);\r\n    min-height: 36px;\r\n\r\n    &:hover {\r\n      background-color: var(--background-color-alt--lighten-1);\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HitCountTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HitCountTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HitCountTable.vue?vue&type=template&id=5f67dad8&\"\nimport script from \"./HitCountTable.vue?vue&type=script&lang=js&\"\nexport * from \"./HitCountTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HitCountTable.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"HitCountTable.vue\"\nexport default component.exports","import { attackingProcs } from '@/modules/EffectProcessor/constants';\r\nimport { targetAreaMapping } from '@/modules/constants';\r\nimport SWorker from '@/assets/sww.min.js';\r\n\r\nexport function getBurstEffects (burst, level) {\r\n  // default to last level\r\n  const levelIndex = (level !== undefined) ? level : burst.levels.length - 1;\r\n  return burst.levels[levelIndex];\r\n}\r\n\r\nexport function getBcDcInfo (burst) {\r\n  if (!burst) {\r\n    return { cost: 0, hits: 0, dropchecks: 0 };\r\n  }\r\n\r\n  const endLevel = getBurstEffects(burst);\r\n\r\n  const attacks = endLevel.effects\r\n    .map((e, i) => ({\r\n      'proc id': e['proc id'] || e['unknown proc id'],\r\n      hits: e.hits || (burst['damage frames'][i] || {}).hits || 0,\r\n    })).filter(e => attackingProcs.indexOf(e['proc id']) > -1);\r\n  const numHits = attacks.reduce((acc, val) => (acc + +val.hits), 0);\r\n  const dropChecks = numHits * +burst['drop check count'];\r\n\r\n  return {\r\n    cost: endLevel['bc cost'],\r\n    hits: numHits,\r\n    dropchecks: dropChecks,\r\n  };\r\n}\r\n\r\nexport function getHitCountData (burst, filterFn = (f) => attackingProcs.includes(f.id)) {\r\n  if (!burst) {\r\n    return [];\r\n  }\r\n\r\n  const endLevel = getBurstEffects(burst);\r\n  return burst['damage frames']\r\n    .map((f, i) => {\r\n      const effectData = endLevel.effects[i];\r\n      return {\r\n        target: targetAreaMapping[effectData['random attack'] ? 'random' : effectData['target area']],\r\n        id: (f['proc id'] || f['unknown proc id']).toString(),\r\n        frames: f,\r\n        delay: effectData['effect delay time(ms)/frame'],\r\n        effects: effectData,\r\n      };\r\n    }).filter(filterFn);\r\n}\r\n\r\nexport function getHealFrameData (burst) {\r\n  return getHitCountData(burst, f => f.id === '2');\r\n}\r\n\r\nexport async function getExtraAttackFrames (burst) {\r\n  const attackFrameSets = getHitCountData(burst).map(d => d.frames);\r\n  const healFrameSets = getHealFrameData(burst).map(d => d.frames);\r\n\r\n  const frames = await SWorker.run((attackFrameSets, healFrameSets) => {\r\n    let frameTimes = [];\r\n    let hitDmgDistribution = [];\r\n\r\n     // gather frame data\r\n    attackFrameSets.forEach((frameSet, i) => {\r\n      const keepFirstFrame = i === 0;\r\n      frameTimes = frameTimes.concat(frameSet['frame times'].slice(keepFirstFrame ? 0 : 1));\r\n      hitDmgDistribution = hitDmgDistribution.concat(frameSet['hit dmg% distribution'].slice(keepFirstFrame ? 0 : 1));\r\n    });\r\n\r\n    healFrameSets.forEach((frameSet, i) => {\r\n      const keepFirstFrame = i === 0 && attackFrameSets.length === 0;\r\n      frameTimes = frameTimes.concat(frameSet['frame times'].slice(keepFirstFrame ? 0 : 1));\r\n      hitDmgDistribution = hitDmgDistribution.concat(frameSet['hit dmg% distribution'].slice(keepFirstFrame ? 0 : 1));\r\n    });\r\n\r\n    // sort frames by frame time\r\n    const unifiedFrames = [];\r\n    frameTimes.forEach((time, i) => {\r\n      unifiedFrames.push({\r\n        time,\r\n        dmg: hitDmgDistribution[i]\r\n      });\r\n    });\r\n\r\n    const frames = {\r\n      'frame times': [],\r\n      'hit dmg% distribution': [],\r\n    };\r\n    unifiedFrames.sort((a, b) => a.time - b.time).forEach(({ time, dmg }) => {\r\n      frames['frame times'].push(time);\r\n      frames['hit dmg% distribution'].push(dmg);\r\n    });\r\n    return frames;\r\n  }, [attackFrameSets, healFrameSets]);\r\n\r\n  return frames;\r\n}\r\n\r\nexport async function getExtraAttackHitCountData (burst, extraAttacks = [], hasWiles = true) {\r\n  if (!burst) {\r\n    return [];\r\n  }\r\n\r\n  const attacks = extraAttacks.slice();\r\n  const extraAttackFrames = await getExtraAttackFrames(burst);\r\n\r\n  if (hasWiles) {\r\n    attacks.push({\r\n      'target area': 'single',\r\n      'proc id': '1',\r\n      'effect delay time(ms)/frame': '0.0/0',\r\n      source: 'Wiles Sphere',\r\n    });\r\n  }\r\n  return attacks.map(effectData => {\r\n    return {\r\n      target: targetAreaMapping[effectData['random attack'] ? 'random' : effectData['target area']],\r\n      id: (effectData['proc id'] || effectData['unknown proc id']).toString(),\r\n      frames: extraAttackFrames,\r\n      effects: effectData,\r\n      delay: effectData['effect delay time(ms)/frame'],\r\n      source: effectData.source,\r\n    };\r\n  });\r\n}\r\n\r\nexport function getTotalDistribution (frames) {\r\n  return frames['hit dmg% distribution'].reduce((acc, val) => acc + val, 0);\r\n}\r\n\r\nexport async function calculateSparkedFrames (hitCountData, extraAttackHitCountData) {\r\n  const result = await SWorker.run((native, extra) => {\r\n    const allFrames = {};\r\n    const addFrame = (time, index, type) => {\r\n      const timeKey = time.toString();\r\n      if (!allFrames[timeKey]) {\r\n        allFrames[timeKey] = [];\r\n      }\r\n      allFrames[timeKey].push({ index, type });\r\n    };\r\n    native.forEach((entry, index) => {\r\n      const delay = +(entry.delay.split('/')[1]);\r\n      const frames = entry.frames['frame times'];\r\n      // console.debug('native', index, delay);\r\n      frames.forEach(time => {\r\n        addFrame(+time + delay, index, 'native');\r\n      });\r\n    });\r\n    extra.forEach((entry, index) => {\r\n      const delay = +(entry.delay.split('/')[1]);\r\n      const frames = entry.frames['frame times'];\r\n      // console.debug('extra', index, delay);\r\n      frames.forEach(time => {\r\n        addFrame(+time + delay, index, 'extra');\r\n      });\r\n    });\r\n    const sparkedFrames = {};\r\n    for (const time in allFrames) {\r\n      const entry = allFrames[time];\r\n      if (entry.length > 1) {\r\n        sparkedFrames[time] = entry.slice();\r\n      }\r\n    }\r\n    return sparkedFrames;\r\n  }, [hitCountData, extraAttackHitCountData]);\r\n  return result;\r\n}\r\n\r\nexport function hasSelfSpark (frames, inputDelay, sparkedFrames) {\r\n  const delay = +(inputDelay.split('/')[1]);\r\n  return sparkedFrames && frames['frame times'].some((time) => !!sparkedFrames[(+time + delay).toString()]);\r\n}\r\n\r\nexport function getSelfSparkCount (frames, inputDelay, sparkedFrames) {\r\n  if (!sparkedFrames) {\r\n    return 0;\r\n  }\r\n\r\n  const delay = +(inputDelay.split('/')[1]);\r\n  return frames['frame times']\r\n    .filter(time => (sparkedFrames[(+time + delay)] || []).length > 0)\r\n    .length;\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('base-entry-card',{attrs:{\"to\":_vm.to}},[_c('v-container',{staticClass:\"pa-3\",attrs:{\"fluid\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{staticClass:\"text-xs-center d-align-self-center pb-0\",attrs:{\"xs3\":\"\"}},[_c('unit-thumbnail',{attrs:{\"src\":_vm.getImageUrls(_vm.entry.id).ills_thum,\"rarity\":_vm.rarity,\"imageTitle\":_vm.entry.name,\"displayWidth\":_vm.thumbnailSize,\"displayHeight\":_vm.thumbnailSize}})],1),_c('v-flex',{staticClass:\"pb-0\",attrs:{\"xs9\":\"\"}},[_c('v-container',{staticClass:\"pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',[_c('div',{staticClass:\"d-flex-container items-center\"},[_c('element-icon',{staticClass:\"mr-1\",attrs:{\"element\":_vm.entry.element,\"displaySize\":20}}),_c('h1',{staticClass:\"subheading d-inline-block\",staticStyle:{\"word-break\":\"break-word\"}},[_c('b',{domProps:{\"textContent\":_vm._s(_vm.entry.name)}})])],1)])],1),_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs4\":\"\"}},[_c('h2',{staticClass:\"subheading\",staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(\"# \"+_vm._s(_vm.entry.guide_id))])]),_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"xs4\":\"\"}},[_c('v-icon',{attrs:{\"color\":_vm.genderIconInfo.color}},[_vm._v(\"fas \"+_vm._s(_vm.genderIconInfo.icon))])],1),_c('v-flex',{staticClass:\"text-xs-right d-align-self-center\",attrs:{\"xs4\":\"\"}},[_c('div',{staticClass:\"d-flex-container items-center content-flex-end\"},[(_vm.rarity < 8)?_c('span',[_vm._v(_vm._s(_vm.rarity))]):_vm._e(),_c('rarity-icon',{class:{ 'ml-1': _vm.rarity !== 8 },attrs:{\"rarity\":_vm.rarity,\"displaySize\":18}})],1)])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <base-entry-card :to=\"to\">\r\n    <v-container fluid class=\"pa-3\">\r\n      <v-layout row>\r\n        <v-flex xs3 class=\"text-xs-center d-align-self-center pb-0\">\r\n          <unit-thumbnail\r\n            :src=\"getImageUrls(entry.id).ills_thum\"\r\n            :rarity=\"rarity\"\r\n            :imageTitle=\"entry.name\"\r\n            :displayWidth=\"thumbnailSize\" :displayHeight=\"thumbnailSize\"/>\r\n        </v-flex>\r\n        <v-flex xs9 class=\"pb-0\">\r\n          <v-container fluid class=\"pa-0\">\r\n            <v-layout row>\r\n              <v-flex>\r\n                <div class=\"d-flex-container items-center\">\r\n                  <element-icon :element=\"entry.element\" :displaySize=\"20\" class=\"mr-1\"/>\r\n                  <h1 class=\"subheading d-inline-block\" style=\"word-break: break-word;\">\r\n                    <b v-text=\"entry.name\"/>\r\n                  </h1>\r\n                </div>\r\n              </v-flex>\r\n            </v-layout>\r\n            <v-layout row>\r\n              <v-flex xs4>\r\n                <h2 class=\"subheading\" style=\"white-space: nowrap;\"># {{ entry.guide_id }}</h2>\r\n              </v-flex>\r\n              <v-flex xs4 class=\"text-xs-center\">\r\n                <v-icon :color=\"genderIconInfo.color\">fas {{ genderIconInfo.icon }}</v-icon>\r\n              </v-flex>\r\n              <v-flex xs4 class=\"text-xs-right d-align-self-center\">\r\n                <div class=\"d-flex-container items-center content-flex-end\">\r\n                  <span v-if=\"rarity < 8\">{{ rarity }}</span>\r\n                  <rarity-icon :class=\"{ 'ml-1': rarity !== 8 }\" :rarity=\"rarity\" :displaySize=\"18\"/>\r\n                </div>\r\n              </v-flex>\r\n            </v-layout>\r\n          </v-container>\r\n        </v-flex>\r\n      </v-layout>\r\n    </v-container>\r\n  </base-entry-card>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\nimport { getGenderInfo } from '@/modules/utils';\r\nimport EntryCardMixin from '@/components/Multidex/BaseEntryCardMixin';\r\nimport ElementIcon from '@/components/Multidex/ElementIcon';\r\nimport RarityIcon from '@/components/Multidex/RarityIcon';\r\nimport UnitThumbnail from '@/components/Multidex/Units/UnitThumbnail';\r\n\r\nexport default {\r\n  mixins: [EntryCardMixin],\r\n  components: {\r\n    ElementIcon,\r\n    RarityIcon,\r\n    UnitThumbnail,\r\n  },\r\n  computed: {\r\n    ...mapGetters('units', ['getImageUrls']),\r\n    genderIconInfo () {\r\n      return getGenderInfo(this.entry.gender);\r\n    },\r\n    rarity () {\r\n      return this.entry.rarity;\r\n    },\r\n    thumbnailSize () {\r\n      const breakpoint = this.$vuetify.breakpoint;\r\n      if (breakpoint.xlOnly) {\r\n        return 64;\r\n      } else if (breakpoint.mdAndUp) {\r\n        return 56;\r\n      } else {\r\n        return 48;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EntryCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EntryCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EntryCard.vue?vue&type=template&id=6e2902b2&\"\nimport script from \"./EntryCard.vue?vue&type=script&lang=js&\"\nexport * from \"./EntryCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"EntryCard.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HitCountTable.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HitCountTable.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}