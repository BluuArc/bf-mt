(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["compare"],{"0aa0":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("module-checker",{attrs:{requiredModules:t.requiredModules}},[n("compare-page",{attrs:{compareInput:t.compareInput}})],1)},a=[],i=n("a34a"),o=n.n(i),s=n("670c"),c=n("fca9"),u=n("88fe"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("promise-wait",{attrs:{promise:t.dbLoadPromise,loadingMessage:"Loading data from database..."}},[n("template",{slot:"loading"},[n("div",{staticStyle:{height:"100%"}},[n("v-container",{attrs:{"fill-height":"","justify-center":""}},[n("v-flex",{staticClass:"text-xs-center",staticStyle:{"flex-grow":"0"}},[n("loading-indicator",{attrs:{loadingMessage:t.dbLoadMessage||"Loading data from database...",progress:t.dbLoadProgress}})],1)],1)],1)]),n("card-tabs-container",{staticClass:"compare-page",attrs:{tabs:t.tabs,containerClass:"pt-1"},model:{value:t.currentTabIndex,callback:function(e){t.currentTabIndex=e},expression:"currentTabIndex"}},[n("div",{attrs:{slot:"input"},slot:"input"},[n("v-dialog",{attrs:{persistent:"",lazy:""},model:{value:t.showPickerDialog,callback:function(e){t.showPickerDialog=e},expression:"showPickerDialog"}},[n("v-card",[n("add-compare-entry",{attrs:{type:t.activePickerType,step:t.pickerStep},on:{input:t.addCompareInput,step:function(e){return t.pickerStep=e},cancel:function(e){t.showPickerDialog=!1}}})],1)],1),n("v-dialog",{attrs:{persistent:"","max-width":"400px"},model:{value:t.showClearDialog,callback:function(e){t.showClearDialog=e},expression:"showClearDialog"}},[n("v-card",[n("v-card-text",[t._v("\n            Clear all "+t._s(t.typeToClear)+" entries?\n          ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{outline:""},on:{click:function(){return t.clearEntries(t.typeToClear)}}},[t._v("\n              Yes\n            ")]),n("v-btn",{attrs:{flat:""},on:{click:function(e){t.showClearDialog=!1}}},[t._v("\n              No\n            ")])],1)],1)],1),n("v-btn",{attrs:{color:"primary",fab:"",fixed:"",right:"",bottom:""},on:{click:function(e){t.showPickerDialog=!0}}},[n("v-icon",[t._v("add")])],1),t.compareInput.length>25?n("section",[n("v-alert",{attrs:{value:!0,type:"warning"}},[t._v("\n          Comparing too many entries may lead to performance and memory issues.\n        ")])],1):t._e(),t._l(t.sections,function(e,r){return n("section",{key:e,staticClass:"mb-3"},[n("div",{staticClass:"title"},[t._v("\n          "+t._s(e+"s")+"\n          "),t.getEntriesForMultidexKey(t.allMultidexKeys[r]).length>0?n("v-btn",{attrs:{icon:""},on:{click:function(){t.typeToClear=e,t.showClearDialog=!0}}},[n("v-icon",[t._v("highlight_off")])],1):t._e()],1),t.getEntriesForMultidexKey(t.allMultidexKeys[r]).length>0?[n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.getEntriesForMultidexKey(t.allMultidexKeys[r]),function(e){return n("v-flex",{key:e.id,staticClass:"pa-2",attrs:{xs12:"",sm6:"",lg4:""}},[n("entry-card",{attrs:{entry:e,type:t.COMPARE_KEY_ORDER[r]},on:{remove:function(){return t.removeCompareInput({type:t.COMPARE_KEY_ORDER[r],id:e.id})}}})],1)}),1)]:n("v-layout",[t._v("\n          No entries input for "+t._s(e)+".\n        ")])],2)})],2),n("div",{attrs:{slot:"compare"},slot:"compare"},[n("v-card",{staticClass:"pa-2"},[n("buff-expandable-list-view",{attrs:{viewMode:t.viewMode,sources:t.compareInput,getEffectsFromSource:t.getEffectsFromSource,titleTopOffset:t.topNavbarHeight,getTextForSource:t.getTextForSource},on:{viewmode:function(e){return t.viewMode=e}},scopedSlots:t._u([{key:"allentrypreview",fn:function(e){var r=e.entries,a=e.effectId;return n("span",{},t._l(r,function(e){return n("span",{key:t.getCompareInputKey(e.source)},[t._l(e.sourcePaths,function(r){return[n("v-chip",{key:t.getCompareInputKey(e.source)+"-"+a+"-"+r,attrs:{color:t.getChipConfig(e.source,r).backgroundColor,"text-color":t.getChipConfig(e.source,r).textColor,outline:t.getChipConfig(e.source,r).outline,small:""}},[t.getChipConfig(e.source).avatar?n("v-avatar",{attrs:{size:"64",color:"grey darken-1",tabindex:"-1"}},[t.getChipConfig(e.source).avatarIsUrl?n("img",{attrs:{src:t.getChipConfig(e.source).avatar}}):n("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.getChipConfig(e.source).avatar)}})]):t._e(),t._v("\n                  "+t._s(t.getChipConfig(e.source,r).name)+"\n                ")],1)]})],2)}),0)}},{key:"value-header",fn:function(e){var r=e.entry;return n("span",{staticStyle:{"max-width":"500px",width:"100%","min-width":"300px"}},[n(t.getHeaderCardConfig(r).type,{tag:"component",staticClass:"no-highlight v-card--flat px-2",staticStyle:{width:"100%","background-color":"transparent"},attrs:{entry:t.getHeaderCardConfig(r).entry}})],1)}}])},[n("template",{slot:"view-config-extra"},[n("section",[n("v-layout",{staticClass:"pl-2",attrs:{row:"","justify-center":"","align-center":""}},[n("v-flex",{attrs:{xs2:""}},[t._v("\n                  Unit Chip View\n                ")]),n("v-flex",{staticClass:"text-xs-center",attrs:{xs5:""}},[n("v-btn",{attrs:{flat:"",outline:!t.unitChipViewModeIsOutlined},on:{click:function(e){t.unitChipViewModeIsOutlined=!1}}},[t._v("\n                    Filled\n                  ")])],1),n("v-flex",{staticClass:"text-xs-center",attrs:{xs5:""}},[n("v-btn",{attrs:{flat:"",outline:t.unitChipViewModeIsOutlined},on:{click:function(e){t.unitChipViewModeIsOutlined=!0}}},[t._v("\n                    Outlined\n                  ")])],1)],1)],1)])],2)],1)],1)])],2)},p=[],d=n("34b9"),f=n("00e0"),b=n("5ab2"),h=n("4764"),y=n("801b"),m=n("4691"),v=n("4a49"),g=n("b758"),x=n("e5b6"),k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n(t.entryCard,{tag:"component",attrs:{entry:t.entry,to:t.multidexLink}}),n("v-card-actions",[t._t("actions",[n("v-spacer"),n("v-btn",{attrs:{flat:""},on:{click:function(e){return t.$emit("remove")}}},[n("v-icon",{attrs:{left:""}},[t._v("\n          clear\n        ")]),t._v("\n        Remove\n      ")],1)])],2)],1)},w=[],C=n("de7e"),S=n("3e0d"),O=n("0a43"),_=n("37b0"),D=n("bafe"),I=n("2a20"),E={props:{entry:{type:Object,required:!0},type:{type:String,required:!0},useMultidexLink:{type:Boolean,default:!0}},components:{UnitEntryCard:C["a"],ItemEntryCard:S["a"],ExtraSkillEntryCard:O["a"],LeaderSkillEntryCard:_["a"],BurstEntryCard:D["a"],BaseEntryCard:I["a"]},computed:{entryCard:function(){return Object(s["d"])(this.type)},multidexLink:function(){var t=(d["b"][this.type]||{}).multidexKey;return t&&this.useMultidexLink?this.$store.getters["".concat(t,"/getMultidexPathTo")](this.entry.id):""}}},P=E,j=n("2877"),T=Object(j["a"])(P,k,w,!1,null,null,null),M=T.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-stepper",{staticClass:"add-compare-entry-area",attrs:{vertical:""},model:{value:t.currentStep,callback:function(e){t.currentStep=e},expression:"currentStep"}},[n("v-stepper-step",{attrs:{step:"1",editable:"",complete:t.validTypeSelected}},[t._v("\n    Select Entry Type\n  ")]),n("v-stepper-content",{attrs:{step:"1"}},[n("section",{staticClass:"entry-type-selector-area"},[t._l(t.allTypePairings,function(e){return n("v-btn",{key:e.value,attrs:{outline:""},on:{click:function(n){return t.selectType(e.value)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])}),n("div",{staticStyle:{width:"100%",display:"flex","justify-content":"flex-end"}},[n("v-btn",{staticStyle:{flex:"none"},attrs:{flat:""},on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n          Cancel\n        ")])],1)],2)]),n("v-stepper-step",{attrs:{step:"2"}},[t._v("\n    Select "+t._s(t.selectedTypeName||"Entry")+"\n  ")]),n("v-stepper-content",{attrs:{step:"2"}},[t.activeSelectorComponent?[n(t.activeSelectorComponent,{tag:"component",on:{input:t.onEntrySelect,cancel:function(e){return t.$emit("cancel")}}})]:n("span",[t._v("\n      Selector of type ["+t._s(t.selectedTypeName||t.selectedType)+"] is not supported.\n    ")])],2)],1)},L=[],F=n("4db1"),N=n("0e03"),U=n("083f"),K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-selector",{attrs:{showCancelButton:t.showCancelButton,value:t.nameFilter,hasSelection:t.hasSelection,requiredModules:t.requiredModules,allEntryIds:t.allIds},on:{input:function(e){return t.nameFilter=(e||"").toLowerCase()},cancel:function(e){return t.$emit("cancel")}},scopedSlots:t._u([{key:"entries",fn:function(e){var r=e.entries;return n("v-layout",{attrs:{row:"",wrap:""}},t._l(r,function(e){return n("v-flex",{key:e,attrs:{xs12:"",sm6:"",md4:"",xl3:""}},[n("entry-card",{staticClass:"ma-2",staticStyle:{background:"var(--background-color)",cursor:"pointer",height:"auto"},attrs:{entry:t.pageDb[e]},nativeOn:{click:function(n){return t.sendEntry(e)}}})],1)}),1)}}])})},B=[],q=n("d939"),A={props:{showCancelButton:{type:Boolean,default:!0}},components:{BaseSelector:q["a"],EntryCard:D["a"]},computed:{requiredModules:function(){return["bursts","units"]},pageDb:function(){return this.$store.state.bursts.pageDb},allIds:function(){var t=this;return Object.keys(this.pageDb).filter(function(e){var n=!t.nameFilter||t.hasName(t.pageDb[e].name,t.nameFilter);return n})}},data:function(){return{nameFilter:"",hasSelection:!1}},methods:{hasName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.toLowerCase().includes(e)},sendEntry:function(t){this.hasSelection=!0,this.$emit("input",{id:t})}}},z=A,R=Object(j["a"])(z,K,B,!1,null,null,null),H=R.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-selector",{attrs:{showCancelButton:t.showCancelButton,value:t.nameFilter,hasSelection:t.hasSelection,requiredModules:t.requiredModules,allEntryIds:t.allIds},on:{input:function(e){return t.nameFilter=(e||"").toLowerCase()},cancel:function(e){return t.$emit("cancel")}},scopedSlots:t._u([{key:"entries",fn:function(e){var r=e.entries;return n("v-layout",{attrs:{row:"",wrap:""}},t._l(r,function(e){return n("v-flex",{key:e,attrs:{xs12:"",sm6:"",md4:"",xl3:""}},[n("entry-card",{staticClass:"ma-2",staticStyle:{background:"var(--background-color)",cursor:"pointer",height:"auto"},attrs:{entry:t.pageDb[e]},nativeOn:{click:function(n){return t.sendEntry(e)}}})],1)}),1)}}])})},W=[],Y={props:{showCancelButton:{type:Boolean,default:!0}},components:{BaseSelector:q["a"],EntryCard:_["a"]},computed:{requiredModules:function(){return["leaderSkills","units"]},pageDb:function(){return this.$store.state.leaderSkills.pageDb},allIds:function(){var t=this;return Object.keys(this.pageDb).filter(function(e){var n=!t.nameFilter||t.hasName(t.pageDb[e].name,t.nameFilter);return n})}},data:function(){return{nameFilter:"",hasSelection:!1}},methods:{hasName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.toLowerCase().includes(e)},sendEntry:function(t){this.hasSelection=!0,this.$emit("input",{id:t})}}},J=Y,G=Object(j["a"])(J,V,W,!1,null,null,null),Q=G.exports,X={props:{type:{type:String,default:""},step:{type:Number,default:1}},components:{UnitSelector:F["a"],ExtraSkillSelector:N["a"],SphereSelector:U["a"],BurstSelector:H,LeaderSkillSelector:Q},computed:{validTypeSelected:function(){return d["c"].includes(this.selectedType)},allTypePairings:function(){return d["c"].map(function(t){return{value:t,name:d["b"][t].name}})},selectedTypeName:function(){return(d["b"][this.selectedType]||"").name},activeSelectorComponent:function(){switch(this.selectedTypeName){case d["b"].unit.name:return"UnitSelector";case d["b"].item.name:return"SphereSelector";case d["b"].es.name:return"ExtraSkillSelector";case d["b"].bb.name:return"BurstSelector";case d["b"].ls.name:return"LeaderSkillSelector";default:return""}}},data:function(){return{selectedType:"",currentStep:1}},methods:{selectType:function(t){this.selectedType=t,this.currentStep=2},onEntrySelect:function(t){this.$emit("input",{id:t.id,type:this.selectedType})}},watch:{type:{immediate:!0,handler:function(t){this.selectedType=t||""}},step:{immediate:!0,handler:function(t){this.currentStep=Math.max(1,+t)}},currentStep:function(t){+t!==+this.step&&this.$emit("step",+t)}}},Z=X,tt=(n("aa5b"),Object(j["a"])(Z,$,L,!1,null,null,null)),et=tt.exports,nt=n("bd0f");function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){at(t,e,n[e])})}return t}function at(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function it(t,e,n,r,a,i,o){try{var s=t[i](o),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,a)}function ot(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){it(i,r,a,o,s,"next",t)}function s(t){it(i,r,a,o,s,"throw",t)}o(void 0)})}}var st=new c["a"]({prefix:"[Compare]"}),ct={props:{compareInput:{type:Array,default:function(){return[]}}},components:{PromiseWait:v["a"],LoadingIndicator:g["a"],CardTabsContainer:x["a"],EntryCard:M,AddCompareEntry:et,BuffExpandableListView:nt["a"],UnitEntryCard:C["a"],ItemEntryCard:S["a"],ExtraSkillEntryCard:O["a"],LeaderSkillEntryCard:_["a"],BurstEntryCard:D["a"],BaseEntryCard:I["a"]},computed:{tabs:function(){return Object.freeze(["Input","Compare"].map(function(t){return{name:t,slot:t.toLowerCase()}}))},sections:function(){return d["c"].map(function(t){return d["b"][t].name})},allMultidexKeys:function(){return d["c"].map(function(t){return d["b"][t].multidexKey})},COMPARE_KEY_ORDER:function(){return d["c"]}},data:function(){return{unitsDb:{},itemsDb:{},extraSkillsDb:{},burstsDb:{},leaderSkillsDb:{},dbLoadPromise:Promise.resolve(),dbLoadProgress:-1,dbLoadMessage:"",showPickerDialog:!1,activePickerType:"",pickerStep:1,viewMode:"",topNavbarHeight:56,currentTabIndex:0,unitChipViewModeIsOutlined:!1,showClearDialog:!1,typeToClear:""}},beforeMount:function(){this.onNewInput()},methods:{getMultidexDatabaseIdsFromCompareInput:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=d["c"].reduce(function(t,e){return t[d["b"][e].multidexKey]=[],t},{});return t.forEach(function(t){var n=(d["b"][t.type]||{}).multidexKey;e[n]&&e[n].push(t.id)}),e},updatePageDbForInput:function(){var t=ot(o.a.mark(function t(){var e,n,r,a,i,s=this,c=arguments;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:[],n=this.$store.state.settings.activeServer,r=this.getMultidexDatabaseIdsFromCompareInput(e),a=Object.keys(r),i=Math.max(a.length,1),st.debug({databaseIds:r}),this.dbLoadProgress=0,t.prev=7,t.next=10,a.reduce(function(t,e){var c=[],u=s["".concat(e,"Db")],l=r[e],p=Object.keys(u).concat(l),f={};return p.forEach(function(t){l.includes(t)&&(u[t]?f[t]=u[t]:c.push(t))}),t.then(ot(o.a.mark(function t(){var r,u;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r=(d["B"].find(function(t){return t.name===e})||{}).fullName||e,s.dbLoadProgress=Math.max(a.indexOf(e)/i*100,0),s.dbLoadMessage="Loading entries for ".concat(r),!(c.length>0)){t.next=10;break}return t.next=6,s.$store.dispatch("".concat(e,"/getByIds"),{ids:c,server:n,extractedFields:[]});case 6:u=t.sent,s["".concat(e,"Db")]=Object.freeze(rt({},f,u)),t.next=11;break;case 10:s["".concat(e,"Db")]=Object.freeze(f);case 11:case"end":return t.stop()}},t,this)})))},Promise.resolve());case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](7),st.error("error updating page db",t.t0);case 15:this.dbLoadProgress=100;case 16:case"end":return t.stop()}},t,this,[[7,12]])}));return function(){return t.apply(this,arguments)}}(),getLocalDbForMultidexKey:function(t){return this.allMultidexKeys.includes(t)&&this["".concat(t,"Db")]||{}},getEntriesForMultidexKey:function(t){var e=this.getLocalDbForMultidexKey(t);return Object.values(e)},getDataForCompareEntry:function(t){var e=this.getLocalDbForMultidexKey(d["b"][t.type].multidexKey);return e[t.id]},onNewInput:function(){this.dbLoadPromise=this.updatePageDbForInput(this.compareInput)},replaceRouteWithInput:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise(function(n,r){t.$router.replace(rt({},t.$route,{query:rt({},t.$route.query,{input:e.map(s["b"]).join(",")})}),n,r)})},removeCompareInput:function(){var t=ot(o.a.mark(function t(){var e,n,r,a,i,s=arguments;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=s.length>0&&void 0!==s[0]?s[0]:{},n=e.type,r=e.id,a=this.compareInput.find(function(t){return t.type===n&&(t.id===r||t.id===(r||"").toString())}),i=this.compareInput.filter(function(t){return t!==a}),i.length===this.compareInput.length){t.next=6;break}return t.next=6,this.replaceRouteWithInput(i);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addCompareInput:function(){var t=ot(o.a.mark(function t(){var e,n,r,a,i,c=arguments;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=c.length>0&&void 0!==c[0]?c[0]:{},n=e.type,r=e.id,st.debug("received input to add",{type:n,id:r}),a=this.compareInput.find(function(t){return t.type===n&&(t.id===r||t.id===(r||"").toString())}),a){t.next=7;break}return i=this.compareInput.concat([Object(s["c"])({type:n,id:r})]),t.next=7,this.replaceRouteWithInput(i);case 7:this.showPickerDialog=!1;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getEffectsFromSource:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.type,r=e.id,a=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return d["c"].includes(n)?n===d["b"].unit.key&&this.unitsDb[r]?t=Object(f["h"])({unit:this.unitsDb[r],target:a,effectType:i}):n===d["b"].item.key&&this.itemsDb[r]?t=Object(b["b"])({item:this.itemsDb[r],target:a,effectType:i}):n===d["b"].es.key&&this.extraSkillsDb[r]?t=Object(h["a"])({skill:this.extraSkillsDb[r],target:a,effectType:i}):n===d["b"].bb.key&&this.burstsDb[r]?t=Object(y["d"])({burst:this.burstsDb[r],target:a,effectType:i}):n===d["b"].ls.key&&this.leaderSkillsDb[r]?t=Object(m["a"])({skill:this.leaderSkillsDb[r],target:a,effectType:i}):(st.warn("getEffectsFromSource: setting empty entry",{type:n,id:r,target:a,effectType:i}),t=[]):(st.warn("source type not supported",n),t=[]),t},updateTopNavbarHeight:function(){var t=document.querySelector("nav.v-toolbar");this.topNavbarHeight=t&&t.offsetHeight||56},getCompareInputKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.type,n=t.id;return"".concat(e,"-").concat(n)},getHeaderCardConfig:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.type,r=e.id;return d["c"].includes(n)?n===d["b"].unit.key&&this.unitsDb[r]?t=this.unitsDb[r]:n===d["b"].item.key&&this.itemsDb[r]?t=this.itemsDb[r]:n===d["b"].es.key&&this.extraSkillsDb[r]?t=this.extraSkillsDb[r]:n===d["b"].bb.key&&this.burstsDb[r]?t=this.burstsDb[r]:n===d["b"].ls.key&&this.leaderSkillsDb[r]&&(t=this.leaderSkillsDb[r]):st.warn("getHeaderCardConfig: source type not supported",n),t||(t={}),{entry:t,type:Object(s["d"])(n)}},getChipConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.type,n=t.id,r=arguments.length>1?arguments[1]:void 0,a={name:n,avatar:"",avatarIsUrl:!1,backgroundColor:void 0,textColor:void 0,outline:!1};if(d["c"].includes(e))if(e===d["b"].unit.key&&this.unitsDb[n]){a.name=this.unitsDb[n].name||n,a.avatar=this.$store.getters["units/getImageUrls"](n).ills_battle,a.avatarIsUrl=!0;var i=this.getColorMappingForSourcePath(r);i&&(a.backgroundColor=i.background,a.textColor=i.text,a.name="".concat(a.name," (").concat(r.split(".")[1].toUpperCase(),")"),a.outline=!!this.unitChipViewModeIsOutlined)}else e===d["b"].item.key&&this.itemsDb[n]?(a.name=this.itemsDb[n].name||n,a.avatar=this.$store.getters["items/getImageUrl"](n,this.itemsDb[n]),a.avatarIsUrl=!0):e===d["b"].es.key&&this.extraSkillsDb[n]?(a.name=this.extraSkillsDb[n].name||n,a.avatar="ES"):e===d["b"].bb.key&&this.burstsDb[n]?(a.name=this.burstsDb[n].name||n,a.avatar="BB"):e===d["b"].ls.key&&this.leaderSkillsDb[n]&&(a.name=this.leaderSkillsDb[n].name||n,a.avatar="LS");return a},getTextForSource:function(t,e,n){var r;if("es"===t&&this.extraSkillsDb[e.id]){var a=this.extraSkillsDb[e.id]&&this.extraSkillsDb[e.id].name||e.id;r="Extra Skill: ".concat(a)}return r||n||t},getColorMappingForSourcePath:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.startsWith("unit.")&&d["d"].unit[t.split(".")[1]]||void 0},clearEntries:function(){var t=ot(o.a.mark(function t(e){var n,r;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=d["c"].find(function(t){return d["b"][t].name===e}),!n){t.next=5;break}return r=this.compareInput.filter(function(t){return t.type!==n}),t.next=5,this.replaceRouteWithInput(r);case 5:this.showClearDialog=!1;case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},watch:{compareInput:function(){this.onNewInput()},showPickerDialog:function(){this.pickerStep=1},currentTabIndex:{immediate:!0,handler:function(){this.updateTopNavbarHeight(),this.$store.state.disableHtmlOverflow&&this.$store.commit("setHtmlOverflowDisableState",!1)}}}},ut=ct,lt=(n("20ba"),Object(j["a"])(ut,l,p,!1,null,null,null)),pt=lt.exports,dt=n("cd30");function ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){bt(t,e,n[e])})}return t}function bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ht(t,e,n,r,a,i,o){try{var s=t[i](o),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,a)}function yt(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){ht(i,r,a,o,s,"next",t)}function s(t){ht(i,r,a,o,s,"throw",t)}o(void 0)})}}var mt=new c["a"]({prefix:"[Compare]"}),vt={props:{input:{type:String,default:""}},components:{ModuleChecker:u["a"],ComparePage:pt},computed:{requiredModules:function(){return Object.freeze(["units","items","bursts","extraSkills","leaderSkills"])},compareInput:function(){var t=Array.from(new Set(this.input.split(","))).map(function(t){try{return Object(s["a"])(t)}catch(e){mt.warn("error parsing input",{input:t,err:e})}}).filter(function(t){return t});return Object.freeze(t)},sanitizedCompareInput:function(){return this.compareInput.map(s["b"]).join(",")}},watch:{input:{immediate:!0,handler:function(){var t=yt(o.a.mark(function t(e){var n=this;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e&&!this.$route.query.hasOwnProperty("input")){t.next=9;break}if(this.sanitizedCompareInput!==this.input){t.next=5;break}dt["a"].compareInputString=e,t.next=7;break;case 5:return t.next=7,new Promise(function(t,e){n.$router.replace(ft({},n.$route,{query:ft({},n.$route.query,{input:n.sanitizedCompareInput})}),t,e)});case 7:t.next=12;break;case 9:if(!dt["a"].compareInputString){t.next=12;break}return t.next=12,new Promise(function(t,e){n.$router.replace(ft({},n.$route,{query:ft({},n.$route.query,{input:dt["a"].compareInputString})}),t,e)});case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}}},gt=vt,xt=Object(j["a"])(gt,r,a,!1,null,null,null);e["default"]=xt.exports},"20ba":function(t,e,n){"use strict";var r=n("6102"),a=n.n(r);a.a},"37b0":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-entry-card",{staticStyle:{height:"100%"},attrs:{to:t.to}},[n("v-container",{staticClass:"pa-3",attrs:{fluid:""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",[n("div",{staticClass:"d-flex-container items-center"},[n("h1",{staticClass:"subheading d-inline-block",staticStyle:{"word-break":"break-word"}},[n("b",{domProps:{textContent:t._s(t.entry.name||"No Name")}})])])])],1),n("v-layout",{attrs:{row:""}},[n("v-flex",{staticStyle:{"word-break":"break-word"}},[t.entry.desc&&"None"!==t.entry.desc&&"0"!==t.entry.desc?n("span",[t._v(t._s(t.entry.desc))]):n("span",[t._v("No description.")])])],1),t.entry.associated_units?n("v-layout",{staticClass:"d-align-items-center",attrs:{row:"",wrap:""}},[n("v-flex",{staticClass:"text-xs-center",attrs:{xs5:"",sm4:""}},[t._v("\n        Associated Units:\n      ")]),n("v-flex",{staticClass:"text-xs-left",attrs:{xs7:""}},t._l(t.entry.associated_units,function(e,r){return n("unit-thumbnail",{key:r,attrs:{src:t.getImageUrls(e).ills_thum,rarity:t.getUnit(e).rarity,imageTitle:t.getUnit(e).name,displayWidth:t.thumbnailSize,displayHeight:t.thumbnailSize}})}),1)],1):t._e()],1)],1)},a=[],i=n("2f62"),o=n("50a6"),s=n("ac4c");function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){u(t,e,n[e])})}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={mixins:[o["a"]],components:{UnitThumbnail:s["a"]},computed:c({},Object(i["e"])("units",["pageDb"]),Object(i["c"])("units",["getImageUrls"]),{thumbnailSize:function(){var t=this.$vuetify.breakpoint;return t.xlOnly?64:t.mdAndUp?56:48}}),methods:{getUnit:function(t){return this.pageDb[t]||{}}}},p=l,d=n("2877"),f=Object(d["a"])(p,r,a,!1,null,null,null);e["a"]=f.exports},4691:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("c7df"),a=n("34b9");function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){o(t,e,n[e])})}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t&&Array.isArray(t.effects)?Array.from(t.effects):[]}function c(t){var e=t.skill,n=void 0===e?{}:e,o=t.target,c=void 0===o?a["K"].PARTY:o,u=t.effectType,l=void 0===u?a["G"].PROC:u,p=s(n).map(function(t){return i({},t,{sourcePath:"Leader Skill: ".concat(n.name||"(No name found)"," (").concat(n.id,")")})});return Object(r["b"])({leaderSkillEffects:p,target:c,effectType:l})}},6102:function(t,e,n){},"670c":function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return l}),n.d(e,"d",function(){return p});var r=n("34b9");function a(t,e){return s(t)||o(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)if(n.push(o.value),e&&n.length===e)break}catch(c){a=!0,i=c}finally{try{r||null==s["return"]||s["return"]()}finally{if(a)throw i}}return n}function s(t){if(Array.isArray(t))return t}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.split("-"),n=a(e,2),i=n[0],o=n[1],s=(o||"").split("_"),c=a(s,2),u=c[0],l=c[1];return r["c"].includes(i)?{type:i,id:u,options:l}:void 0}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.type,n=void 0===e?"":e,r=t.id,a=void 0===r?"":r,i=t.options,o=void 0===i?"":i,s="".concat(n,"-").concat(a);return o?"".concat(s,"_").concat(Array.isArray(o)?o.join("~"):o):s}function l(t){var e=t.type,n=void 0===e?"":e,r=t.id,a=void 0===r?"":r,i=t.options;return{type:n,id:a,options:i}}function p(t){switch(t){case r["b"].unit.key:return"UnitEntryCard";case r["b"].item.key:return"ItemEntryCard";case r["b"].es.key:return"ExtraSkillEntryCard";case r["b"].ls.key:return"LeaderSkillEntryCard";case r["b"].bb.key:return"BurstEntryCard";default:return"BaseEntryCard"}}},aa5b:function(t,e,n){"use strict";var r=n("f64f"),a=n.n(r);a.a},bafe:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-entry-card",{staticStyle:{height:"100%"},attrs:{to:t.to}},[n("v-container",{staticClass:"pa-3",attrs:{fluid:""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",[n("div",{staticClass:"d-flex-container items-center"},[n("h1",{staticClass:"subheading d-inline-block",staticStyle:{"word-break":"break-word"}},[n("b",{domProps:{textContent:t._s(t.entry.name||"No Name")}})])])])],1),n("v-layout",{attrs:{row:""}},[n("v-flex",{staticStyle:{"word-break":"break-word"}},[t.entry.desc&&"None"!==t.entry.desc&&"0"!==t.entry.desc?n("span",[t._v(t._s(t.entry.desc))]):n("span",[t._v("No description.")])])],1),t.entry.associated_units?n("v-layout",{staticClass:"d-align-items-center",attrs:{row:"",wrap:""}},[n("v-flex",{staticClass:"text-xs-center",attrs:{xs5:"",sm4:""}},[t._v("\n        Associated Units:\n      ")]),n("v-flex",{staticClass:"text-xs-left",attrs:{xs7:""}},t._l(t.entry.associated_units,function(e,r){return n("unit-thumbnail",{key:r,attrs:{src:t.getImageUrls(e).ills_thum,rarity:t.getUnit(e).rarity,imageTitle:t.getUnit(e).name,displayWidth:t.thumbnailSize,displayHeight:t.thumbnailSize}})}),1)],1):t._e()],1)],1)},a=[],i=n("2f62"),o=n("50a6"),s=n("ac4c");function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){u(t,e,n[e])})}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={mixins:[o["a"]],components:{UnitThumbnail:s["a"]},computed:c({},Object(i["e"])("units",["pageDb"]),Object(i["c"])("units",["getImageUrls"]),{thumbnailSize:function(){var t=this.$vuetify.breakpoint;return t.xlOnly?64:t.mdAndUp?56:48}}),methods:{getUnit:function(t){return this.pageDb[t]||{}}}},p=l,d=n("2877"),f=Object(d["a"])(p,r,a,!1,null,null,null);e["a"]=f.exports},cd30:function(t,e,n){"use strict";var r=n("670c");function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bfmt:compareInput";a(this,t),this._compareInputStorageKey=e}return o(t,[{key:"compareInputString",get:function(){return sessionStorage.getItem(this._compareInputStorageKey)},set:function(t){sessionStorage.setItem(this._compareInputStorageKey,t)}},{key:"compareInput",get:function(){var t=this.compareInputString;return t?t.split(",").map(function(t){try{return Object(r["a"])(t)}catch(e){return}}).filter(function(t){return t}):[]},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.map(r["b"]).join(",");this.compareInputString=e}}]),t}();e["a"]=new s},f64f:function(t,e,n){}}]);
//# sourceMappingURL=compare.94027c3c.js.map